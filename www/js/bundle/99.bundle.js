"use strict";(self.webpackChunklzone_de=self.webpackChunklzone_de||[]).push([[99],{99:(t,e,n)=>{n.r(e),n.d(e,{CatalogView:()=>r});var o=n(933),a=n(3),i=n(779),s=n(470);class r{#t={};#e;#n;static#o=i.vs("\n        <h1>Folder \"{{ group }}\"</h1>\n\n        {{#if properties.removable }}\n            <button id='removeFolder' data-group='{{ group }}'>Remove folder</button>\n        {{/if}}\n\n        <h2>Installed Content</h2>\n\n        <p>\n            <div id='installedSections'>\n            {{#each tree.nodes }}\n                {{#if this.name}}\n                    <div class='installed'>\n                        <button data-section='{{ this.name }}'>Remove</button>\n                        <a href=\"{{ this.url }}\">{{ this.name }}</a>\n                    </div>\n                {{/if}}\n            {{/each }}\n            </div>\n        </p>\n\n        {{#if properties.catalog }}\n        <h2>\n            Installable Content\n            {{#if properties.catalog.editUrl }}\n                <a href=\"{{ properties.catalog.editUrl }}\" target=\"_blank\">\n                    <button id=\"editBtn\" class=\"btn\">Edit</button>\n                </a>\n            {{/if }}\n        </h2>\n\n        <p id='installableFilter'>\n            <b>Filter by:</b> Type\n            <select id='filterType'>\n                <option value='*'>All</option>\n                {{#each types }}\n                    <option value='{{ this }}'>{{ this }}</option>\n                {{/each }}\n            </select>\n            Category\n            <select id='filterCategory'>\n                <option value='*'>All</option>\n                {{#each categories }}\n                    <option value='{{ this }}'>{{ this }}</option>\n                {{/each }}\n            </select>\n        </p>\n\n        <p>\n            <div id='installableSections'>\n            {{#each catalog }}\n                <div class='installable'>\n                    <button data-section='{{ @key }}'>Add</button>\n                    <a href=\"https://github.com/{{ this.github }}\">{{ @key }}</a>\n                    <span class='sectionCategory' type='{{ this.type }}'>{{this.category}}</span>\n                </div>\n            {{/each }}\n            </div>\n        </p>\n\n        <h2>Custom Installation</h2>\n        \n        <p>\n            Add a Github repo of your own to the app:\n\n            <div id='customInstall'>\n                <table>\n                    <tr>\n                        <td>Name:</td>\n                        <td><input type='text' id='customName' placeholder='Title' required/></td>\n                    </tr>\n                    <tr>\n                        <td>Repo:</td>\n                        <td><input type='text' id='customRepo' placeholder='<user>/<repo>' required pattern='\\w+/[\\w.]+'/>\n                    </tr>\n                    <tr>\n                        <td>File Pattern: (optional Regex with exactly one capture group to extract names)<br/>\n                        <td><input type='text' id='customFilePattern' placeholder='^path/(.*)\\.md$'/></td>\n                    </tr>\n                    <tr>\n                        <td></td>\n                        <td><button class=\"btn\">Add</button></td>\n                    </tr>\n                <table>\n            </div>\n        </p>\n        {{/if}}\n\n        <h2>Storage Usage</h2>\n\n        <p>\n            As cheat sheets are stored in your browser they can eat up some space.\n        </p>\n        <p>\n            Your current usage is: {{ diskUsage}}\n        </p>        \n    ");constructor(t,e){this.#e=t,this.#n=decodeURI(e),this.#a(),document.addEventListener("sections-updated",this.#a.bind(this))}async#a(){this.#t=await o.m.getInstallable(this.#n),i.dN(this.#e,r.#o,{group:this.#n,catalog:Object.keys(this.#t).sort().reduce(((t,e)=>(t[e]=this.#t[e],t)),{}),types:this.#t?Object.keys(this.#t).map((t=>this.#t[t].type)).filter(((t,e,n)=>n.indexOf(t)===e)).sort():[],categories:this.#t?Object.keys(this.#t).map((t=>this.#t[t].category)).filter(((t,e,n)=>n.indexOf(t)===e)).sort():[],properties:window.Config.groups[this.#n],removable:window.Config.groups[this.#n].removable,diskUsage:await this.#i(),tree:(await a.w.getTree()).nodes[this.#n]}),s.Ng("change","#installableFilter select",(()=>{const t=document.getElementById("filterType").value,e=document.getElementById("filterCategory").value,n=document.querySelectorAll("#installableSections .installable");console.log(`Filtering sections by type: ${t}, category: ${e}`),n.forEach((n=>{console.log(`Checking section: ${n.querySelector(".sectionCategory").textContent}`),"*"!==t&&n.querySelector(".sectionCategory").getAttribute("type")!==t||"*"!==e&&n.querySelector(".sectionCategory").textContent!==e?n.style.display="none":n.style.display="block"}))})),s.Ng("click","#customInstall button",(t=>{const e={github:document.getElementById("customRepo").value,type:"github",filePattern:document.getElementById("customFilePattern").value};0==e.filePattern.length&&(e.filePattern=null),o.m.install(this.#n,document.getElementById("customName").value,e,t.target)})),s.Ng("click","button#removeFolder",(t=>o.m.removeGroup(t.getAttribute("data-group")))),s.Ng("click",".installable button",(t=>o.m.install(this.#n,t.getAttribute("data-section"),this.#t[t.getAttribute("data-section")],t))),s.Ng("click",".installed button",(async t=>o.m.remove(this.#n,t.getAttribute("data-section"))))}async#i(){if(!navigator.storage)return"Sorry: Browser does not report usage!";const t=await navigator.storage.estimate();return`${Math.floor(t.usage/1024/1024)} MB used / ${Math.floor((t.quota-t.usage)/1024/1024)} MB available`}}}}]);