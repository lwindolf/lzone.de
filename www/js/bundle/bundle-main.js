(()=>{var e,t,n={855:(e,t,n)=>{var a={"./Catalog.js":[99,99],"./Chat.js":[388],"./Checks.js":[943],"./Content.js":[913],"./Discover.js":[805,805],"./FeedReader.js":[845,845],"./Feeds.js":[849,849],"./FileBrowser.js":[734,734],"./Folder.js":[546,546],"./Home.js":[789],"./Settings.js":[491,491],"./Sidebar.js":[216],"./renderers/CheatSheet.js":[209],"./renderers/Pdf.js":[965]};function i(e){if(!n.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(i)))}i.keys=()=>Object.keys(a),i.id=855,e.exports=i},755:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=755,e.exports=t},386:(e,t,n)=>{"use strict";n.d(t,{q:()=>B});var a=n(388),i=n(662),s=n(551);class r{static commands={help:{syntax:"help",summary:"Show this help again",func:()=>["text",this.help()]},base64:{syntax:"base64 [-d] <string>",summary:"string <-> base64",func:e=>"-d"!==e[1]?["text",btoa(e[2])]:["text",atob(e[1])]},cw:{syntax:"cw",summary:"Print calendar weeks",func:()=>{const e=new Date,t=e=>{const t=new Date(e);return t.setDate(t.getDate()+3),Math.ceil(Math.ceil((t.getTime()-new Date(t.getFullYear(),0,1).getTime())/864e5)/7)};return["text",`Current week is ${t(e)}\n\nFollowing weeks are:\n`+Array.from({length:10},((e,t)=>t+1)).map((n=>{const a=new Date(e);return a.setDate(a.getDate()+(1-a.getDay())),a.setDate(a.getDate()+7*n),`week ${t(a)} --- Monday ${a.toLocaleDateString()}`})).join("\n")]}},cat:{syntax:"cat <filename>",summary:"Read file from OPFS",func:async e=>{const t=e[1],n=await navigator.storage.getDirectory();try{const e=await n.getFileHandle(t),a=await e.getFile();return["text",await a.text()]}catch(e){return["text",`ERROR: File ${t} not found.`]}}},curl:{syntax:"curl <URL> [>filename.ext]",summary:"Fetch URL using CORS proxy and optionally save to OPFS",func:async e=>{const t=e[1],n=await fetch(t);if(!n.ok)return["text",`ERROR: ${n.status} ${n.statusText}`];const a=await n.text();if(e[2]&&e[2].startsWith(">")){const t=e[2].substring(1).trim(),n=await navigator.storage.getDirectory(),i=await n.getFileHandle(t,{create:!0}),s=await i.createWritable();return await s.write(a),await s.close(),["text",`Saved to ${t}`]}return["text",a]}},date:{syntax:"date <epoch>",summary:"epoch -> date",func:(e,t)=>["text",new Date(parseInt(t))]},epoch:{syntax:"epoch <date>",summary:"date -> epoch",func:(e,t)=>{const n=new Date(t).getTime();return["text",`Epoch [ms] : ${n}\nUnix epoch : ${n/1e3}`]}},ip:{syntax:"ip",summary:"Print IP (https://ifconfig.me)",func:async()=>{const e=await fetch("https://ifconfig.me/all.json"),t=await e.json();return console.log(t),["text",t.ip_addr]}},ipcalc:{syntax:"ipcalc <CIDR>",summary:"Calculate address range",func:e=>{const t=this.#e(e[1]);return["text",`Base      : ${t[0]}\nBroadcast : ${t[1]}`]}},ls:{syntax:"ls",summary:"List all files/directories in the OPFS root",func:async()=>{const e=await navigator.storage.getDirectory(),t=[];for await(const[n,a]of e.entries())t.push(`${"directory"===a.kind?"üìÅ":"üìÑ"} ${n}`);return 0===t.length?["text","No entries in OPFS found."]:["text",t.sort().join("\n")]}},mkdir:{syntax:"mkdir <dirname>",summary:"Create directory in OPFS root",func:async e=>{const t=e[1],n=await navigator.storage.getDirectory();try{return await n.getDirectoryHandle(t,{create:!0}),["text",`Created directory ${t}`]}catch(e){return["text",`ERROR: Could not create directory ${t}.`]}}},mkpasswd:{syntax:"mkpasswd [<len>] [<chars>]",summary:"Random password",func:e=>["text",this.#t(e[1]?parseInt(e[1]):void 0,e[2])]},qr:{syntax:"qr <URL>",summary:"Create QR code",func:(e,t)=>["html",`<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURI(t)}"/>`]},rm:{syntax:"rm <filename>",summary:"Remove file from OPFS",func:async e=>{const t=e[1],n=await navigator.storage.getDirectory();try{return await n.removeEntry(t),["text",`Removed ${t}`]}catch(e){return["text",`ERROR: File ${t} not found.`]}}},si:{syntax:"si <value MB>",summary:"Print power 2 values",func:e=>{const t=parseInt(e[1]);return["text",`${1024*t} KiB\n${t/1024} GiB\n${t/1024/1024} TiB`]}},setting:{syntax:"setting <name>",summary:"Get a setting value",func:async e=>["text",JSON.stringify(await s.w.get(e[1],""))]},weather:{syntax:"weather",summary:"Embed weather map",func:()=>(document.getElementById("CommandsViewEmbed")?.remove(),a.ChatView.addToolResult("weather",'<div id="CommandsViewEmbed">Loading weather widget...</div>',"html"),navigator.geolocation.getCurrentPosition((e=>{const t=e.coords;console.log("Your current position is:"),console.log(`Latitude : ${t.latitude}`),console.log(`Longitude: ${t.longitude}`),console.log(`More or less ${t.accuracy} meters.`);const n=e.coords.latitude,a=e.coords.longitude;document.getElementById("CommandsViewEmbed").innerHTML=`<iframe frameborder="0" src="https://imweather.com/widget/map?lat=${n}&lng=${a}&z=6.20&model=nowcast&element=radar_obs&values=true" style="height:400px;width:100%;max-width:640px;"></iframe>`}),(e=>{document.getElementById("CommandsViewEmbed").innerHTML=`Fetching Geo position failed (Error ${e.code}: ${e.message})!`}),{enableHighAccuracy:!1,timeout:2e4,maximumAge:100}),[void 0,void 0])},webamp:{syntax:"webamp",summary:"Embed music player",func:()=>{if(document.getElementById("webampApp"))window.webamp.reopen();else{const e=document.createElement("div");e.id="webampApp",document.body.appendChild(e),i.u.get("lib_webamp").then((()=>{const e=document.getElementById("webampApp");window.webamp=new Webamp,window.webamp.renderWhenReady(e)}))}return["text","Opening webamp."]}}};static register(e){r.commands={...r.commands,...e}}static isValid=e=>Object.hasOwn(r.commands,e.split(/\s+/)[0]);static help=()=>"Syntax:\n\n    <query>             # Search all cheat sheets\n    ?<query>            # Perform a chat bot query\n    !<command>          # Run a command\n\nCommands:\n\n"+Object.entries(r.commands).sort(((e,t)=>e[0].localeCompare(t[0]))).map((e=>"    "+e[1].syntax+" ".repeat(30-e[1].syntax.length)+" # "+e[1].summary)).join("\n");static#t(e,t){if(void 0===e)e=32;else if(!Number.isInteger(e)||e<=0)throw new Error("len must be a positive integer");if(void 0===t)t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789√§√º√∂√Ñ√ú√ñ_-+=/¬∞^`'\"|#@!.";else{if("string"!=typeof t)throw new Error("chars must be a string");if(t.length>256)throw new Error("chars must be <= 256")}const n=256-256%t.length;let a,i="";for(let s=0;s<e;s++){do{a=window.crypto.getRandomValues(new Uint8Array(1))[0]}while(a>=n);i+=t[a%t.length]}return i}static#e(e){var t=e.split("/"),n=t[0].split("."),a=["0","0","0","0"],i=(a=/\d+\.\d+\.\d+\.\d+/.test(t[1])?t[1].split(".").map((function(e){return parseInt(e,10)})):(a=("1".repeat(parseInt(t[1],10))+"0".repeat(32-parseInt(t[1],10))).match(/.{1,8}/g)).map((function(e){return parseInt(e,2)}))).map((function(e){return 255^e})),s=n.map((function(e,t){return e&a[t]})),r=s.map((function(e,t){return e|i[t]}));return[s.join("."),r.join(".")]}static async run(e){try{const t=e.split(/\s/),n=e.substring(t[0].length);return void 0===r.commands[t[0]]?["text","Unknown command"]:await r.commands[t[0]].func(t,n)}catch(e){return["text",`ERROR: Exception (${e})`]}}}var o=n(913),d=n(84);class c{static addEvent(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)}static removeEvent(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n)}static jtdSearchLoaded=function(e,t){var n,a=document.getElementById("search-input"),i=document.getElementById("search-results"),s=0;function r(){document.documentElement.classList.remove("search-active")}function o(){s++;var o=a.value;if(""===o?r():(document.documentElement.classList.add("search-active"),window.scroll(0,-1),setTimeout((function(){window.scroll(0,0)}),0)),o!==n&&(n=o,i.innerHTML="",""!==o)){var d=e.query((function(e){var t=window.lunr.tokenizer(o);e.term(t,{boost:10}),e.term(t,{wildcard:window.lunr.Query.wildcard.TRAILING})}));if(0==d.length&&o.length>2){var c=window.lunr.tokenizer(o).filter((function(e){return e.str.length<20}));c.length>0&&(d=e.query((function(e){e.term(c,{editDistance:Math.round(Math.sqrt(o.length/2-1))})})))}if(0==d.length){var l=document.createElement("div");l.classList.add("search-no-result"),l.innerText="No results found",i.appendChild(l)}else{var u=document.createElement("ul");u.classList.add("search-results-list"),i.appendChild(u),function e(t,n,a,i,r,o){if(o==s){for(var d=a;d<a+i;d++){if(d==n.length)return;h(t,n[d])}setTimeout((function(){e(t,n,a+i,i,r,o)}),r)}}(u,d,0,10,100,s)}}function h(e,n){var a=t[n.ref],i=document.createElement("li");i.classList.add("search-results-list-item"),e.appendChild(i);var s=document.createElement("a");s.classList.add("search-result"),s.setAttribute("href",a.relUrl),i.appendChild(s);var r=document.createElement("div");r.classList.add("search-result-title"),s.appendChild(r);var o=document.createElement("div");o.classList.add("search-result-doc"),o.innerHTML='<svg viewBox="0 0 24 24" class="search-result-icon"><use xlink:href="#svg-doc"></use></svg>',r.appendChild(o);var d=document.createElement("div");d.classList.add("search-result-doc-title"),d.innerHTML=a.doc,o.appendChild(d);var c=d;if(a.doc!=a.title){o.classList.add("search-result-doc-parent");var l=document.createElement("div");l.classList.add("search-result-section"),l.innerHTML=a.title,r.appendChild(l),c=l}var u=n.matchData.metadata,h=[],p=[];for(var g in u){var f=u[g];if(f.title){let e=f.title.position;for(let t in e)h.push(e[t])}if(f.content){let e=f.content.position;for(let t in e){var w=e[t],v=w[0],y=w[0]+w[1],b=!0,x=!0;for(let e=0;e<5;e++){let e=a.content.lastIndexOf(" ",v-2),t=a.content.lastIndexOf(". ",v-2);if(t>=0&&t>e){v=t+1,b=!1;break}if(e<0){v=0,b=!1;break}v=e+1}for(let e=0;e<10;e++){let e=a.content.indexOf(" ",y+1),t=a.content.indexOf(". ",y+1);if(t>=0&&t<e){y=t,x=!1;break}if(e<0){y=a.content.length,x=!1;break}y=e}p.push({highlight:w,previewStart:v,previewEnd:y,ellipsesBefore:b,ellipsesAfter:x})}}}if(h.length>0&&(h.sort((function(e,t){return e[0]-t[0]})),c.innerHTML="",m(c,a.title,0,a.title.length,h)),p.length>0){p.sort((function(e,t){return e.highlight[0]-t.highlight[0]}));var E=p[0],C={highlight:[E.highlight],previewStart:E.previewStart,previewEnd:E.previewEnd,ellipsesBefore:E.ellipsesBefore,ellipsesAfter:E.ellipsesAfter},k=[C];for(let e=1;e<p.length;e++)E=p[e],C.previewEnd<E.previewStart?(C={highlight:[E.highlight],previewStart:E.previewStart,previewEnd:E.previewEnd,ellipsesBefore:E.ellipsesBefore,ellipsesAfter:E.ellipsesAfter},k.push(C)):(C.highlight.push(E.highlight),C.previewEnd=E.previewEnd,C.ellipsesAfter=E.ellipsesAfter);var I=document.createElement("div");I.classList.add("search-result-previews"),s.appendChild(I);var R=a.content;for(let e=0;e<Math.min(k.length,3);e++){let t=k[e];var S=document.createElement("div");S.classList.add("search-result-preview"),I.appendChild(S),t.ellipsesBefore&&S.appendChild(document.createTextNode("... ")),m(S,R,t.previewStart,t.previewEnd,t.highlight),t.ellipsesAfter&&S.appendChild(document.createTextNode(" ..."))}}var L=document.createElement("span");L.classList.add("search-result-rel-url"),L.innerText=a.relUrl,r.appendChild(L)}function m(e,t,n,a,i){var s=n;for(var r in i){let n=i[r],a=document.createElement("span");a.innerHTML=t.substring(s,n[0]),e.appendChild(a),s=n[0]+n[1];var o=document.createElement("span");o.classList.add("search-result-highlight"),o.innerHTML=t.substring(n[0],s),e.appendChild(o)}var d=document.createElement("span");d.innerHTML=t.substring(s,a),e.appendChild(d)}}c.addEvent(a,"focus",(function(){setTimeout(o,0)})),c.addEvent(a,"keyup",(function(e){switch(e.keyCode){case 27:a.value="";break;case 38:case 40:case 13:return void e.preventDefault()}o()})),c.addEvent(a,"keydown",(function(e){let t;switch(e.keyCode){case 38:if(e.preventDefault(),t=document.querySelector(".search-result.active"),t&&(t.classList.remove("active"),t.parentElement.previousSibling)){var n=t.parentElement.previousSibling.querySelector(".search-result");n.classList.add("active"),n.scrollIntoView({behavior:"smooth",block:"nearest"})}return;case 40:if(e.preventDefault(),t=document.querySelector(".search-result.active"),t){if(t.parentElement.nextSibling){var a=t.parentElement.nextSibling.querySelector(".search-result");t.classList.remove("active"),a.classList.add("active"),a.scrollIntoView({behavior:"smooth",block:"nearest"})}}else{let e=document.querySelector(".search-result");e&&e.classList.add("active")}return}})),c.addEvent(document,"click",(function(e){e.target!=a&&r()}))};static selectResult(){let e=document.querySelector(".search-result.active");if(e)e.click();else{var t=document.querySelector(".search-result");t&&t.click()}}static async init(){window.lunr.tokenizer.separator=/[\s\-/]+/,document.addEventListener("search-index-updated",(e=>{console.log("Search.init: reloading search index..."),c.jtdSearchLoaded(e.detail.index,e.detail.docs)}));try{const e=await d.d.getCache();if(e&&e.index&&e.docs){console.log("Load search index from cache...");let t=window.lunr.Index.load(JSON.parse(e.index));return void c.jtdSearchLoaded(t,e.docs)}}catch(e){console.error(`ERROR: Failed to load index from cache (${e})!`)}d.d.update()}}class l{#n;#a;setMode(e){this.#a.textContent=e,this.#a.dataset.mode=e,this.#n.placeholder=""}getMode(){return this.#a.dataset.mode}constructor(e){this.#a=document.querySelector(".search-input-wrap .mode"),this.#n=document.getElementById(e),this.#n.focus(),this.#n.addEventListener("input",(async()=>"!"==this.#n.value[0]?(this.setMode("Cmd"),void(this.#n.value=this.#n.value.slice(1))):"?"==this.#n.value[0]?(this.setMode("Chat"),void(this.#n.value=this.#n.value.slice(1))):void 0)),this.#n.addEventListener("keydown",(async e=>"Enter"===e.key||13===e.keyCode?(window.location.hash="/-/CLI","Cmd"===this.getMode()?l.#i(this.#n.value):"Chat"===this.getMode()?a.ChatView.submitPrompt(this.#n.value):c.selectResult(),this.#n.value="",void e.preventDefault()):"Escape"===e.key||27===e.keyCode?(this.#n.value.length>0?o.ContentView.hideSearch():this.setMode("Search"),void e.preventDefault()):void(this.#n.value.length>1&&"Search"===this.getMode()&&o.ContentView.showSearch()))),document.addEventListener("keydown",(function(e){e.ctrlKey&&75===e.keyCode&&(l.#s(),e.preventDefault())})),this.setMode("Search")}static#s=()=>document.getElementById("search-input").focus();static#i=async e=>{const[t,n]=await r.run(e);a.ChatView.addToolResult(e,n,t)}}class u{#r;constructor(){i.u.get("Split").then((e=>{this.#r=e(["#sidebar","#main","#toolpanel"],{sizes:[0,70,30],minSize:[300,300,0],maxSize:[300,1/0,1/0],gutterSize:1,expandToMin:!0,direction:"horizontal"}),window.addEventListener("resize",(()=>this.#o())),this.#o()}))}#o(){window.innerWidth>1200?(this.#r.setSizes([5,70,25]),document.getElementById("toolpanel").style.display="block",document.getElementById("sidebar").style.display="block"):window.innerWidth>640?(this.#r.setSizes([5,95,0]),this.#r.collapse(2),document.getElementById("toolpanel").style.display="none",document.getElementById("sidebar").style.display="block"):(this.#r.setSizes([0,100,0]),this.#r.collapse(1),this.#r.collapse(2),document.getElementById("toolpanel").style.display="none",document.getElementById("sidebar").style.display="none")}}var h=n(216),m=n(943),p=n(933),g=n(779);class f{#d;#c;#l;#u;#h;#m;#p;constructor(e,t,n){this.#d=document.getElementById("modal"),this.#c=document.getElementById("modalContent"),this.#u=(0,g.vs)(e),this.#l=n,this.#d.style.display="block",this.#c.innerHTML=this.#u(t),this.#d.addEventListener("click",this.#h=e=>{"modal"===e.target.id&&(this.destroy(),e.preventDefault())}),this.#d.addEventListener("submit",this.#m=e=>{this.#g(),e.preventDefault()}),document.addEventListener("keydown",this.#p=e=>{"Escape"===e.code&&(this.destroy(),e.preventDefault())})}#g(){var e={};[...this.#c.querySelectorAll("input, select, textarea")].forEach((t=>e[t.name]=t.value)),this.#l(e).then((e=>{e&&this.destroy()}))}update(e){this.#c.innerHTML=this.#u(e)}destroy(){this.#d.style.display="none",this.#c.innerHTML="",this.#d.removeEventListener("click",this.#h),this.#d.removeEventListener("submit",this.#m),this.#d.removeEventListener("keydown",this.#p)}}class w extends f{constructor(){super("\n            <h2>Help</h2>\n\n            <h3>Keyboard</h3>\n\n            <table>\n                <tr>\n                    <td>F1</td>\n                    <td>Help</td>\n                </tr>\n                <tr>\n                    <td>Ctrl - right arrow</td>\n                    <td>Next Unread</td>\n                </tr>\n                <tr>\n                    <td>Ctrl - Shift - M</td>\n                    <td>Mark All Read</td>\n                </tr>\n                <tr>\n                    <td>Ctrl - Shift - U</td>\n                    <td>Update All</td>\n                </tr>\n            </table>\n\n            <h3>Mouse</h3>\n\n            <table>\n                <tr>\n                    <td>Left Click</td>\n                    <td>Select feed or item / Open a link</td>\n                </tr>\n                <tr>\n                    <td>Middle Click</td>\n                    <td>Toggle Unread / Mark All Read</td>\n                </tr>\n                <tr>\n                    <td>Double Click</td>\n                    <td>Open item in browser</td>\n                </tr>\n            </table>\n        ",{},(async()=>!0))}}var v=n(470),y=n(624),b=n(753),x=n(182);class E extends x.S{constructor(e){super({root:e,template:"\n                <h1 id='itemViewContentTitle'>\n                    <a target='_system' href='{{feed.homepage}}'>{{feed.title}}</a>\n                </h1>\n\n                <p>\n                    Source: <a target='_system' href='{{feed.source}}'>{{feed.source}}</a><br>\n                </p>\n            \n                <p>{{{feed.description}}}</p>\n\n                <div class='feedInfoError'>\n                {{#if feed.error}}\n                    <div class='feedInfoErrorBox'>\n                        <span>There was a problem when fetching this subscription!</span>\n                        <ul>\n                            <li>\n                                {{#compare feed.error '==' 1}}‚õî{{/compare}}\n                                {{#compare feed.error '>'  1}}‚úÖ{{/compare}}\n                                <span>1. Authentication</span>\n                            </li>\n                            <li>\n                                {{#compare feed.error '==' 2}}‚õî{{/compare}}\n                                {{#compare feed.error '>'  2}}‚úÖ{{/compare}}\n                                {{#compare feed.error '<'  2}}‚¨ú{{/compare}}\n                                <span>2. Download</span>\n                            </li>\n                            <li>\n                                {{#compare feed.error '==' 4}}‚õî{{/compare}}\n                                {{#compare feed.error '>'  4}}‚úÖ{{/compare}}\n                                {{#compare feed.error '<'  4}}‚¨ú{{/compare}}\n                                <span>3. Feed Discovery</span>\n                            </li>\n                            <li>\n                                {{#compare feed.error '==' 8}}‚õî{{/compare}}\n                                {{#compare feed.error '<'  8}}‚¨ú{{/compare}}\n                                <span>4. Parsing</span>\n                            </li>\n                        </ul>    \n\n                        {{#unless feed.allowCorsProxy}}\n                            {{#compare feed.error '==' 2}}\n                                <p>Downloads often do not work due to <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CORS\">CORS restrictions</a>.\n                                You might want to use the Cloudflare CORS proxy (<a href=\"https://corsproxy.io\">corsproxy.io</a>) for this feed.</p>\n                                <button class='btn' data-action='feedreader:allowCorsProxy' data-id='{{feed.id}}' data-global='false'>Use proxy for this feed</button>\n                                <button class='btn' data-action='feedreader:allowCorsProxy' data-id='{{feed.id}}' data-global='true'>Use proxy for all feeds</button>\n                            {{/compare}}\n                        {{/unless}}\n                    </div>\n                {{/if}}\n                </div>\n\n                Last updated: <span class='feedLastUpdated'>{{lastUpdated}}</span><br>\n                <button class='btn' data-action='feedreader:updateNode' data-id='{{feed.id}}'>Update Now</button>\n            ",events:["nodeUpdated","feedSelected"],mapper:async e=>{const t=b.f.getNodeById(e.id);return t?{feed:t,lastUpdated:t.last_updated?new Date(1e3*t.last_updated).toLocaleString():"never"}:{}}})}}var C=n(890),k=n(136);class I{displayedFeedId;selected;static#f=(0,g.vs)("\n        <div class='newItems hidden'>Click to show new items</div>\n        <div>\n            {{#each items}}\n                <div class='item context-node' data-id='{{id}}' data-feed='{{nodeId}}'></div>\n            {{/each}}\n        </div>\n    ");static#w=(0,g.vs)("\n        <span class='date'>{{time}}</span>\n        <span class='title' data-read='{{read}}'>\n            {{#if starred}}‚≠ê{{/if}}\n            {{title}}\n        </span>\n    ");#v(e){let t=e.title;if(!t||0===t.trim().length)if(e.description&&e.description.length>0){const n=(new DOMParser).parseFromString(e.description,"text/html").body.textContent||"";t=n.substring(0,100)+(n.length>100?"...":"")}else t="No title";(0,g.XX)(`.item[data-id="${e.id}"]`,I.#w,{time:k.i.getShortDateStr(e.time),read:e.read,starred:e.starred,title:t})}async#y(e){const t=b.f.getNodeById(e),n=await t.getItems();this.selected=void 0,this.displayedFeedId=e,console.log(`itemlist Loading items for feed ${t.title}`,n),(0,g.XX)("#itemlistViewContent",I.#f,{node:t,items:n.sort(((e,t)=>t.time-e.time))}),n.forEach((e=>this.#v(e)))}async toggleItemRead(e){const t=await C.q.getById(e),n=b.f.getNodeById(t.nodeId);t.setRead(!t.read),n.updateUnread(t.read?-1:1)}async toggleItemStar(e){const t=await C.q.getById(e);t.setStarred(!t.starred)}async#b(e,t){const n=await C.q.getById(e);t!==this.displayedFeedId&&await this.#y(t),[...document.querySelectorAll(".item.selected")].forEach((e=>e.classList.remove("selected")));let a=document.querySelector(`.item[data-id="${e}"]`);a.classList.add("selected"),a.scrollIntoView({block:"nearest"}),document.getElementById("itemlist").focus(),console.log("itemlist Item selected:",n),this.selected=n,n.read||await this.toggleItemRead(e)}async nextUnread(){let e,t,n;this.selected?(t=b.f.getNodeById(this.selected.nodeId),n=this.selected.id):(t=b.f.getNextUnreadNode(0),n=0),console.log("itemlist nextUnread: starting at node id",t.id,"item id",n),e=await t.getNextUnread(n),e||(t=b.f.getNextUnreadNode(t.id),e=await t.getNextUnread(n)),console.log("itemlist nextUnread: result",e),e&&D.select(t.id,e.id)}openItemLink=async e=>window.open((await C.q.getById(e)).source,"_system","location=yes");constructor(){document.addEventListener("itemUpdated",(e=>this.#v(e.detail))),document.addEventListener("itemSelected",(e=>this.#b(e.detail.id,e.detail.feedId))),document.addEventListener("feedSelected",(e=>this.#y(e.detail.id))),document.addEventListener("itemsAdded",(e=>{e.detail.feedId==this.displayedFeedId&&document.querySelector("#itemlistViewContent .newItems").classList.remove("hidden")})),v.Ng("click",".item",(e=>D.select(parseInt(e.dataset.feed),parseInt(e.dataset.id)))),v.Ng("auxclick",".item",(e=>this.toggleItemRead(parseInt(e.dataset.id))),(e=>1==e.button)),v.Ng("dblclick",".item",(e=>this.openItemLink(parseInt(e.dataset.id)))),v.Ng("click",".newItems",(()=>{document.querySelector(".newItems").classList.add("hidden"),this.#y(this.displayedFeedId)})),document.addEventListener("keydown",(e=>{if("itemlist"!==document.activeElement.id)return;if("itemlist"===!e.target.id)return;const t=document.querySelector(".item.selected");"ArrowDown"===e.key&&(t?t.nextElementSibling?.click():document.querySelector(".item")?.click(),e.preventDefault()),"ArrowUp"===e.key&&(t?t.previousElementSibling?.click():document.querySelector(".item")?.click(),e.preventDefault()),"Enter"===e.key&&t&&(this.openItemLink(parseInt(t.dataset.id)),e.preventDefault())}))}}class R extends x.S{constructor(e){super({root:e,template:"\n                <h1 id='itemViewContentTitle'>\n                    {{#if item.title}}\n                        <a target='_system' href='{{item.source}}'>{{item.title}}</a>\n                    {{else}}\n                        <a target='_system' class='missingTitle' href='{{item.source}}'>Link to post</a>\n                    {{/if}}\n                </h1>\n\n                <span class='date'>{{time}}</span>\n                <div class='date'></div>\n\n                {{#each item.media}}\n                    {{#contains 'audio' mime }}\n                        <audio controls preload='none' src='{{ url }}'></audio>\n                    {{/contains}}\n                    {{#contains 'video' mime }}\n                        <video controls preload='none' src='{{ url }}'></video>\n                    {{/contains}}\n                {{/each}}\n\n                <p>{{{item.description}}}</p>\n            ",events:["itemSelected"],mapper:async e=>{const t=await C.q.getById(e.id);return{item:t,time:k.i.getShortDateStr(t.time)}},postRender:async e=>{const t=await C.q.getById(e.id);t.title&&t.media&&t.media.length>0&&(document.title=window.Config.siteName+" | "+t.title),document.getElementById("itemViewContent").scrollIntoView({block:"start"})}})}}var S=n(217);class L{fresh=!1;static#x;static#E=new Map;constructor(e,t){L.#E.set(e,t),L.#x||(L.#x=document.addEventListener("contextmenu",(e=>{let t=e.target;for(;t&&(!t.id||!L.#E.has(t.id));)t=t.parentElement;t&&t.id&&L.#E.has(t.id)&&(e.preventDefault(),this.createMenu(t,e,L.#E.get(t.id)))}))),document.addEventListener("click",(()=>this.checkRemove())),document.addEventListener("auxclick",(()=>this.checkRemove()))}checkRemove(){this.fresh?this.fresh=!1:document.querySelectorAll(".context-menu").forEach((e=>e.remove()))}createMenu(e,t,n){this.checkRemove(e);const a=t.target.closest(".context-node");a&&(this.fresh=!0,this.menu=document.createElement("div"),this.menu.className="context-menu",n.forEach((e=>{if(e.type&&a.dataset.type!==e.type)return;const t=document.createElement("div");t.className="context-menu-item",t.textContent=e.label,t.addEventListener("click",(()=>S.r.dispatch(e.action,a.dataset))),this.menu.appendChild(t)})),this.menu.style.setProperty("--mouse-x",t.pageX+"px"),this.menu.style.setProperty("--mouse-y",t.pageY+"px"),this.menu.style.display="block",e.appendChild(this.menu))}hide(){this.menu.style.display="none"}}class D{static#C="#/-/Feed/";static#k;static#I;static#R;static feedlist;static feedinfo;static itemlist;static itemview;static async setup(e){this.#k=e,this.#k.innerHTML='\n            <div id="itemlist" tabindex="1">\n                <div id="itemlistViewContent"></div>\n            </div>\n            <div id="itemview" tabindex="2">\n                <div id="itemViewContent" style="display: none"></div>\n                <div id="feedViewContent"></div>\n            </div>',i.u.get("Split").then((e=>{e(["#itemlist","#itemview"],{sizes:[30,70],minSize:[100,100],gutterSize:3,expandToMin:!0,direction:"vertical"})})),this.feedinfo=new E(this.#k.ownerDocument.getElementById("feedViewContent")),this.itemview=new R(this.#k.ownerDocument.getElementById("itemViewContent")),this.feedinfo.setData({id:this.#I}),this.itemview.setData({id:this.#R})}static async registerActions(){this.feedlist=new b.f,this.itemlist=new I,await b.f.setup(),new L("sidebar",[{label:"Update",action:"feedreader:updateNode",type:"feed"},{label:"Mark Read",action:"feedreader:markRead",type:"feed"}]),new L("itemlist",[{label:"Open Link",action:"feedreader:openItemLink"},{label:"Toggle Read",action:"feedreader:toggleItemRead"},{label:"Toggle Star",action:"feedreader:toggleItemStar"}]),S.r.register("feedreader:addFeed",(e=>b.f.add(new y.J({source:e.source,title:e.title})))),S.r.register("feedreader:markRead",(e=>b.f.markAllRead(e.id))),S.r.register("feedreader:updateNode",(e=>b.f.updateNode(b.f.getNodeById(e.id),!0))),S.r.register("feedreader:removeNode",(e=>b.f.remove(e.id))),S.r.register("feedreader:allowCorsProxy",(e=>{const t=b.f.getNodeById(e.id);"true"===e.global?s.w.set("allowCorsProxy",!0):b.f.allowCorsProxy(t.id,!0),t.update()})),S.r.register("sidebar:feed:middleClick",(e=>b.f.markAllRead(e.id))),S.r.register("feedreader:nextUnread",(()=>this.itemlist.nextUnread())),S.r.register("feedreader:select",(e=>this.select(e.itemId,e.nodeId))),S.r.register("feedreader:toggleItemRead",(e=>this.itemlist.toggleItemRead(parseInt(e.id)))),S.r.register("feedreader:toggleItemStar",(e=>this.itemlist.toggleItemStar(parseInt(e.id)))),S.r.register("feedreader:openItemLink",(e=>this.itemlist.openItemLink(parseInt(e.id)))),S.r.hotkey("C-A-KeyR","feedreader:markRead",this.#C,(()=>({id:this.#I}))),S.r.hotkey("C-A-KeyU","feedreader:updateNode",this.#C,(()=>({id:this.#I}))),S.r.hotkey("C-ArrowRight","feedreader:nextUnread",this.#C),window.addEventListener("hashchange",(()=>this.#S())),this.#S()}static#S(){const e=this.#I,t=this.#R;if(!window.location.hash.startsWith(this.#C))return;console.log("feedreader onLocationChange",window.location.hash);const n=window.location.hash.match(/Feed\/(?<feedId>\d+)(\/Item\/(?<itemId>\d+))?/);if(this.#I=n.groups.feedId?parseInt(n.groups.feedId):null,this.#R=n.groups.itemId?parseInt(n.groups.itemId):null,e!=this.#I||t!=this.#R)if(console.log("feedreader selection needs to be changed: item",this.#R,"feed",this.#I),this.#R){if(v.JD("itemSelected",{feedId:this.#I,id:this.#R}),!this.#k)return;this.#k.ownerDocument.getElementById("itemViewContent").style.display="block",this.#k.ownerDocument.getElementById("feedViewContent").style.display="none",this.itemview.setData({id:this.#R})}else{if(v.JD("feedSelected",{id:this.#I}),!this.#k)return;this.#k.ownerDocument.getElementById("itemViewContent").style.display="none",this.#k.ownerDocument.getElementById("feedViewContent").style.display="block",this.feedinfo.setData({id:this.#I})}}static select(e,t=void 0){window.location.hash=`${this.#C}${e}${t?`/Item/${t}`:""}`}static selectItem(e){window.location.hash=`${this.#C}${this.#I}/Item/${e}`}}D.registerActions();const $=window.fetch.bind(window);window.fetch=async function(e,t={}){const n=new AbortController,a=setTimeout((()=>n.abort()),3e4);t.signal=n.signal;try{let n,a=t.allowCorsProxy;try{n=await $(e,t)}catch(i){a||(a=await s.w.get("allowCorsProxy",!1)),n=await $(window.Config.corsProxy+encodeURI(e),t)}return n}catch(e){console.error("Fetch error:",e)}finally{clearTimeout(a)}};const O=(e,...t)=>{if("string"!=typeof e)return void window.originalConsoleLog(e,...t);const n=e.split(" ")[0];(window?.app?.debug[n]||window?.app?.debug.all)&&window.originalConsoleLog(e,...t)};window.originalConsoleLog=window.console.log,window.console.log=O,window.console.info=O,window.console.warn=O,window.console.debug=O;class B{static#L(){let e={};try{let t,n=/\+/g,a=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(n," "))};for(;t=a.exec(window.location.hash.substring(1));)e[i(t[1])]=i(t[2])}catch(e){console.log("Invalid parameter encoding! "+e)}return e}static#D(){if(window.location.hash.length>2){if("/"!=window.location.hash[1])return;if("/"==window.location.hash.substring(1,2)){const e=B.getPath();return B.#$(e),void o.ContentView.render(e)}console.warn("Unknown location hash format: "+window.location.hash)}else B.#$("")}static getPath=()=>Object.keys(B.#L())[0].substring(1);static#O=e=>document.getElementById("breadcrumb-nav").innerHTML=""===e?"":'<li class="breadcrumb-nav-list-item"><a href="/"><svg viewBox="0 0 24 24"><use xlink:href="#svg-home"></use></svg></a></li>'+e.split(/\//).reverse().map(((t,n,a)=>"-"===t?"":0==n?`<li class="breadcrumb-nav-list-item"><span>${decodeURIComponent(t)}</span></li>`:`<li class="breadcrumb-nav-list-item"><a href="#/${e.split(/\//).slice(0,a.length-n).join("/")}">${decodeURIComponent(t)}</a></li>`)).reverse().join(" ");static#$(e){this.#O(e),h.Sidebar.selectionChanged(e)}static async load(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/worker.js").then((e=>{console.log("ServiceWorker registration successful with scope: ",e.scope)})).catch((e=>{console.error("ServiceWorker registration failed: ",e)})),window.app={ChecksView:new m.ChecksView(document.getElementById("toolpanel")),CLI:new l("search-input"),Commands:r,ContentView:new o.ContentView(document.getElementById("main-content-wrap")),debug:{all:!0},FeedReader:D,Layout:new u,Sidebar:new h.Sidebar(document.getElementById("site-nav"))},await p.m.update(),window.addEventListener("hashchange",this.#D),this.#D(),c.init(),(0,v.qm)("body",(e=>112===e.keyCode),(()=>new w))}}B.load()},624:(e,t,n)=>{"use strict";n.d(t,{J:()=>l});var a=n(648),i=n(800),s=n(449);class r{static searches=[{type:"MS Tile",order:2,xpath:"/html/head/meta[@name='msapplication-TileImage']/@href"},{type:"Safari Mask",order:3,xpath:"/html/head/link[@rel='mask-icon']/@href"},{type:"large icon",order:0,xpath:"/html/head/link[@rel='icon' or @rel='shortcut icon'][@sizes='192x192' or @sizes='144x144' or @sizes='128x128']/@href"},{type:"small icon",order:5,xpath:"/html/head/link[@rel='icon' or @rel='shortcut icon'][@sizes]/@href"},{type:"favicon",order:8,xpath:"/html/head/link[@rel='icon' or @rel='shortcut icon' or @rel='SHORTCUT ICON'][not(@sizes)]/@href"},{type:"Apple touch",order:1,xpath:"/html/head/link[@rel='apple-touch-icon' or @rel='apple-touch-icon-precomposed'][@sizes='180x180' or @sizes='152x152' or @sizes='144x144' or @sizes='120x120']/@href"},{type:"Apple no size",order:6,xpath:"/html/head/link[@rel='apple-touch-icon' or @rel='apple-touch-icon-precomposed'][not(@sizes)]/@href"},{type:"Apple small",order:7,xpath:"/html/head/link[@rel='apple-touch-icon' or @rel='apple-touch-icon-precomposed'][@sizes]/@href"}].sort(((e,t)=>e.order-t.order));static async discover(e,t=!1){let n;console.log(`favicon discovery for ${e}`);try{let a=await window.fetch(e,{allowCorsProxy:t}).then((e=>e.text())).then((e=>(console.log("favicon discovery got HTML ",e),(new DOMParser).parseFromString(e,"text/html"))));if(a){console.log("favicon discovery HTML parse success");let e=a.firstChild;for(;e&&"HTML"!==e.nodeName.toUpperCase();)e=e.nextSibling;if(e){console.log("favicon discovery root element found");for(let t=0;t<r.searches.length&&(n=s.u.lookup(e,r.searches[t].xpath),!n);t++);}}}catch(e){console.log("favicon discovery HTML processing failed",e)}if(n||(n=await fetch(e+"/favicon.ico",{allowCorsProxy:t}).then((e=>e.text())).then((()=>e+"/favicon.ico"))),n)return console.log(`favicon discovery found '${n}'`),n.includes("://")?n:e+"/"+n;console.log("favicon discovery nothing found")}}class o{static async fetch(e,t=!1){console.log(`feedupdater updating ${e}`);let n=await fetch(e,{allowCorsProxy:t}).then((async e=>(console.log("feedupdater headers",e.headers),await e.text()))).then((async n=>{let a=(0,i.S)(n,e);if(!a)return console.log(`feedupdater No suitable parser found for ${e}`),new l({error:l.ERROR_DISCOVER});console.log("feedupdater using parser",a);let s=a.parse(n);if(!s)return console.log(`feedupdater Failed to parse feed from ${e}`),new l({error:l.ERROR_XML});if(s.source=e,s.last_updated=Date.now()/1e3,s.error=l.ERROR_NONE,s.etag=etag,!s.icon&&s.homepage)try{console.log("feedupdater no icon in feed, starting favicon autodiscovery"),s.icon=await r.discover(s.homepage,t)}catch(e){}return s})).catch((t=>(console.log(`feedupdater Failed to download feed from ${e}`,t),new l({error:l.ERROR_NET}))));return console.log("feedupdater result",n),n}}var d=n(890),c=n(470);class l{id;error;orig_source;last_updated=0;last_updated_favicon=0;allowCorsProxy=!1;newItems=[];unreadCount=0;title;source;description;icon;iconData;metadata={};static ERROR_NONE=0;static ERROR_AUTH=1;static ERROR_NET=2;static ERROR_DISCOVER=4;static ERROR_XML=8;constructor(e={}){Object.keys(e).forEach((t=>{this[t]=e[t]})),this.orig_source=this.source}serialize(){return{id:this.id,title:this.title,description:this.description,homepage:this.homepage,icon:this.icon,iconData:this.iconData,source:this.source,last_updated:this.last_updated,last_updated_favicon:this.last_updated_favicon,allowCorsProxy:this.allowCorsProxy,unreadCount:this.unreadCount,metadata:this.metadata}}async update(e=!1){if(e&&(console.info(`Forcing update of ${this.source}`),this.last_updated=0,this.last_updated_favicon=0),this.last_updated&&Date.now()/1e3-this.last_updated<3600)return void console.info(`Skipping update of ${this.source} (last updated ${Math.ceil(Date.now()/1e3-this.last_updated)}s ago)`);const t=await o.fetch(this.source,this.allowCorsProxy);if(l.ERROR_NONE==t.error){let e=0;this.title=t.title,this.source=t.source,this.homepage=t.homepage,this.description=t.description,this.metadata=t.metadata,this.icon=t.icon,this.iconData=t.iconData;const n=await this.getItems();if(this.unreadCount=n.filter((e=>!e.read)).length,t.newItems.forEach((t=>{n.find((e=>e.sourceId?e.sourceId===t.sourceId:e.source?e.source===t.source:e.title===t.title))||(e++,this.unreadCount++,t.nodeId=this.id,t.save())})),e>0&&c.JD("itemsAdded",this),Date.now()/1e3-this.last_updated_favicon>2592e3){window.app.debug&&console.log(`Updating favicon for ${this.source} (${this.icon})`);const e=await fetch(this.icon);if(e.ok){const t=await e.blob(),n=await new Promise(((e,n)=>{try{const n=new FileReader;n.onload=function(){e(this.result)},n.readAsDataURL(t)}catch(e){n(e)}}));n&&n.startsWith("data:image")?(this.iconData=n,window.app.debug&&console.log(`Update favicon for ${this.source} (${this.icon}) was successful`)):console.warn(`Favicon update for feed ${this.id} failed`),this.last_updated_favicon=Date.now()/1e3}else console.warn(`Favicon response for feed ${this.id} failed`)}else console.warn(`Favicon fetch for feed ${this.id} failed`)}this.last_updated=t.last_updated,this.error=t.error,c.JD("nodeUpdated",this)}getItems=async()=>(await a.DB.getByIndexOnly("aggregator","items","nodeId",this.id)).map((e=>new d.q({id:e.id,...e.value})));async getNextUnread(e){let t,n=0;if(!e)return;const a=await this.getItems();return a.find((t=>(n++,t.id===e))),t=a.slice(n).find((e=>!e.read)),console.log("feed getNextUnread find forward result:",t),t||(t=a.find((e=>!e.read)),console.log("feed getNextUnread find from start result:",t),t)}addItem(e){e.time||(e.time=Date.now()),this.newItems.push(e)}updateUnread(e){this.unreadCount+=e,this.unreadCount<0&&(this.unreadCount=0),c.JD("nodeUpdated",this)}async markAllRead(){(await this.getItems()).forEach((e=>e.setRead(!0))),this.updateUnread(-this.unreadCount)}}},753:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var a=n(648),i=n(624),s=n(470);class r{static root={children:[]};static#B={};static maxId=1;static getNodeById=e=>e?r.#B[parseInt(e)]:void 0;static getNextUnreadNode(e){let t,n=0;return e&&(this.root.children.find((t=>(n++,t.id===e))),t=this.root.children.slice(n).find((e=>e.unreadCount>0)),t)?t:this.root.children.find((e=>e.unreadCount>0))}static#T(){a.DB.set("aggregator","tree","tree",r.root.children.map((function e(t){const n=t.serialize();return t.children&&(n.children=t.children.map(e)),n})))}static allowCorsProxy(e,t){r.#B[e].allowCorsProxy=t,r.#T()}static async add(e,t=!0){this.root.children.push(e),e.id||(e.id=r.maxId+1),e.id>r.maxId&&(r.maxId=e.id),r.#B[e.id]=e,e.parent=r.root,t&&await e.update(),r.#T()}static remove(e){let t=r.getNodeById(e);t&&(t.parent.children=t.parent.children.filter((t=>t.id!==e)),delete r.#B[e],r.#T(),s.JD("nodeRemoved",e))}static markAllRead(e){let t=r.getNodeById(e);t.children&&t.children.forEach((e=>this.markAllRead(e.id))),t.markAllRead()}static async setup(){console.log("feedlist setup"),document.addEventListener("nodeUpdated",(()=>r.#T()));for(const e of await a.DB.get("aggregator","tree","tree",window.Config.groups.Feeds.defaultFeeds))await this.add(new i.J(e),!1);a.DB.removeOrphans("aggregator","items","nodeId",Object.keys(r.#B).map((e=>parseInt(e)))),console.log("feedlist setup done")}static updateNode(e,t=!1){e.children?e.children.forEach((e=>{this.updateNode(e,t)})):"Feed"===e.constructor.name&&e.update(t)}static update(){this.updateNode(this.root)}}},890:(e,t,n)=>{"use strict";n.d(t,{q:()=>s});var a=n(648),i=n(470);class s{id=void 0;nodeId=0;read=!1;starred=!1;title;description;time;source;sourceId;media=[];metadata={};constructor(e){Object.keys(e).forEach((t=>{this[t]=e[t]}))}addMedia(e,t,n=NaN){let a=NaN;try{a=parseInt(n,10)}catch{}e&&t&&-1===e.indexOf("www.gravatar.com")&&(this.description&&-1!==this.description.indexOf(e)||this.media.push({url:e,mime:t,length:a}))}setRead(e){this.read!==e&&(this.read=e,this.save(),i.JD("itemUpdated",this))}setStarred(e){this.starred!==e&&(this.starred=e,this.save(),i.JD("itemUpdated",this))}static getById=async e=>new s(await a.DB.getById("aggregator","items",e));async save(){this.nodeId||console.error("item.save(): nodeId is not set!",this);const e=await a.DB.set("aggregator","items",this.id,{nodeId:this.nodeId,read:this.read,starred:this.starred,title:this.title,description:this.description,time:this.time,source:this.source,sourceId:this.sourceId,media:this.media,metadata:this.metadata});this.id||(this.id=e)}}},800:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m,S:()=>h});var a=n(449),i=n(136);class s{static getRootNode(e){let t=e.firstChild;for(;1!=t.nodeType;)t=t.nextSibling;return t}static getNamespaces(e){const t=[];if(!e.attributes)return console.debug("No attributes!",e),t;for(let n=0;n<e.attributes.length;n++){const a=e.attributes[n];a.name.startsWith("xmlns:")&&t.push(a.name.substring(6))}return t}static parseItem(e,t,n){const s=[];for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t];n.name.startsWith("xmlns:")&&s.push(n.name.substring(6))}if(s.includes("dc")&&(n.description||(n.description=a.u.lookup(t,"dc:description")),n.time||(n.time=i.i.parse(a.u.lookup(t,"dc:date")))),s.includes("content")){const e=a.u.lookupNode(t,"content:encoded");if(e)try{const t=(new DOMParser).parseFromString(`<a>${e.innerHTML}</a>`,"text/xml");n.description=t.documentElement.textContent}catch(e){console.log(`Failed to parse <content:encoded> (${e})!`)}}s.includes("media")&&a.u.foreach(t,"//media:content",(e=>{n.addMedia(a.u.lookup(e,"@url"),a.u.lookup(e,"@type")||a.u.lookup(e,"@medium"),a.u.lookup(e,"@duration"))}))}}var r=n(624),o=n(890);class d{static id="atom";static autoDiscover=["/ns:feed/ns:entry"];static parseEntryLink(e,t){let n=a.u.lookup(e,"@href"),i=a.u.lookup(e,"@type"),s=a.u.lookup(e,"@rel");if(n){if("alternate_or_text/html"!==t.sourceType&&(s&&"alternate"===s||self&&"text/html"===i))return t.sourceType="alternate_or_text/html",void(t.source=n);t.source||(t.source=n)}}static parseEntry(e,t){let n=new o.q({title:a.u.lookup(e,"ns:title"),description:a.u.lookup(e,"ns:summary"),sourceId:a.u.lookup(e,"ns:id"),time:i.i.parse(a.u.lookup(e,"ns:updated"))});s.parseItem(t.root,e,n),a.u.foreach(e,"ns:link",d.parseEntryLink,n),t.feed.addItem(n)}static parse(e){const t=(new DOMParser).parseFromString(e,"application/xml"),n=s.getRootNode(t);let i=new r.J({error:a.u.lookup(n,"/parsererror"),title:a.u.lookup(n,"/ns:feed/ns:title"),icon:a.u.lookup(n,"/ns:feed/ns:icon"),description:a.u.lookup(n,"/ns:feed/ns:summary"),homepage:a.u.lookup(n,"/ns:feed/ns:link[@rel='alternate']/@href")||a.u.lookup(n,"/ns:feed/ns:link/@href")});return a.u.foreach(n,"/ns:feed/ns:entry",this.parseEntry,{root:n,feed:i}),i}}class c{static id="rss";static autoDiscover=["/rss/channel","/Channel/items"];static parseItem(e,t){let n=new o.q({title:a.u.lookup(e,"title"),description:a.u.lookup(e,"description"),source:a.u.lookup(e,"link"),sourceId:a.u.lookup(e,"guid"),time:i.i.parse(a.u.lookup(e,"pubDate"))});a.u.foreach(e,"enclosure",(e=>n.addMedia(a.u.lookup(e,"@url"),a.u.lookup(e,"@type")))),s.parseItem(t.root,e,n),t.feed.addItem(n)}static parse(e){const t=(new DOMParser).parseFromString(e,"application/xml"),n=s.getRootNode(t);let i=new r.J({error:a.u.lookup(n,"/parsererror")});return"Channel"===t.firstChild.nodeName&&(i.title=a.u.lookup(n,"/Channel/title"),i.description=a.u.lookup(n,"/Channel/description"),i.homepage=a.u.lookup(n,"/Channel/link"),a.u.foreach(n,"/Channel/items/item",this.parseItem,{root:n,feed:i})),"rss"===t.firstChild.nodeName&&(i.title=a.u.lookup(n,"/rss/channel/title"),i.description=a.u.lookup(n,"/rss/channel/description"),i.homepage=a.u.lookup(n,"/rss/channel/link"),a.u.foreach(n,"/rss/channel/item",this.parseItem,{root:n,feed:i})),i}}class l{static id="rdf";static autoDiscover=["/rdf:RDF/ns:channel"];static parseItem(e,t){let n=new o.q({title:a.u.lookup(e,"ns:title"),description:a.u.lookup(e,"ns:description"),source:a.u.lookup(e,"ns:link")});s.parseItem(t.root,e,n),t.feed.addItem(n)}static parse(e){const t=(new DOMParser).parseFromString(e,"application/xml"),n=s.getRootNode(t);let i=new r.J({error:a.u.lookup(n,"/parsererror")});return"rdf:RDF"===t.firstChild.nodeName&&(i.title=a.u.lookup(n,"/rdf:RDF/ns:channel/ns:title"),i.description=a.u.lookup(n,"/rdf:RDF/ns:channel/ns:description"),i.homepage=a.u.lookup(n,"/rdf:RDF/ns:channel/ns:link"),a.u.foreach(n,"/rdf:RDF/ns:item",this.parseItem,{root:n,feed:i})),i}}class u{static id="json";static parseItem(e){let t=new o.q({title:e.title,description:e.content_html||e.content_text||e.summary,time:i.i.parse(e.updated||e.date_published),sourceId:e.id,source:e.url||e.external_url});e.attachments&&Array.isArray(e.attachments)&&e.attachments.forEach((e=>t.addMedia(e.url,e.mime_type))),this.addItem(t)}static parse(e){const t=JSON.parse(e);let n=new r.J({type:this.id,title:t.title,icon:t.icon||t.favicon,description:t.description,homepage:t.home_page_url||t.feed_url});return t.items&&Array.isArray(t.items)&&t.items.forEach(this.parseItem,n),n}}function h(e,t=""){if(0==e.indexOf("{"))try{const t=JSON.parse(e);if(t.version&&t.version.startsWith("https://jsonfeed.org/version/"))return u}catch(e){}let n=[d,c,l];const i=(new DOMParser).parseFromString(e,"application/xml");console.log(`autodiscover ${t}`);for(let e=0;e<n.length;e++)for(let t=0;t<n[e].autoDiscover.length;t++)try{if(a.u.lookup(i.firstChild,n[e].autoDiscover[t]))return n[e]}catch(e){}}function m(e,t){let n;try{n=(new DOMParser).parseFromString(e,"text/html")}catch{console.info("autodiscover could not parse HTML!")}if(!n)return[];let a=[];if(n.head.querySelectorAll('link[rel="alternate"]').forEach((e=>{const t=e.getAttribute("type");t&&("application/atom+xml"!==t&&"application/rss+xml"!==t&&"application/rdf+xml"!==t&&"application/json"!==t&&"text/xml"!==t||a.push(e.getAttribute("href")))})),0===a.length){const t=/<link[^>]*>/g,n=/href="([^"]*)"/,i=/rel=["']alternate["']/,s=/type=["']([^"']+)["']/;let r;for(;null!==(r=t.exec(e));){const e=i.exec(r[0]),t=n.exec(r[0]),o=s.exec(r[0]),d=o?o[1]:null,c=t?t[1]:null;c&&d&&e&&("application/atom+xml"!==d&&"application/rss+xml"!==d&&"application/rdf+xml"!==d&&"application/json"!==d&&"text/xml"!==d||a.push(c))}}return a=a.map((e=>{if(e.includes("://"))return e;var n=new URL(t);return e.startsWith("/")?n.pathname=e:n.pathname+="/"+e,n.href})),a}},136:(e,t,n)=>{"use strict";n.d(t,{i:()=>a});class a{static parse(e){if(e)return new Date(e)?.getTime()/1e3}static getShortDateStr(e){if(!e)return"";const t=new Date(1e3*e),n=new Date,a=n.getTime()-t.getTime(),i=864e5,s=356*i;return a<i?`Today ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:a<2*i?`Yesterday ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:a<s&&t.getFullYear()===n.getFullYear()?t.toLocaleDateString([],{month:"short",day:"numeric"}):t.toLocaleDateString([],{year:"numeric",month:"short",day:"numeric"})}}},449:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});class a{static evaluate(e,t){Object.getOwnPropertyDescriptor(globalThis,"window")?.get?.toString().includes("[native code]")||(t=t.replaceAll("ns:",""));let n=function(t){let n=t.ownerDocument.createNSResolver(t),a=(new window.DOMParser).parseFromString(e.outerHTML,"text/xml").children[0].getAttribute("xmlns");return function(e){return n.lookupNamespaceURI(e)||a}}(e);return e.ownerDocument.evaluate(t,e,n,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null)}static lookupNode(e,t){return a.evaluate(e,t).iterateNext()}static lookup(e,t){const n=a.lookupNode(e,t);return n?n.textContent:void 0}static foreach(e,t,n,i=null){const s=a.evaluate(e,t);let r=s.iterateNext();for(;r;)n(r,i),r=s.iterateNext()}}},217:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});class a{static handlers={};static listener;static register(e,t){this.handlers[e]=t,this.listener||(this.listener=!0,document.addEventListener("click",(e=>{const t=e.target;t&&t.dataset.action&&(a.dispatch(t.dataset.action,t.dataset),e.preventDefault())})))}static hotkey(e,t,n="/",i=void 0){const s=e.split("-"),r=s.pop(),o=s.includes("A"),d=s.includes("C"),c=s.includes("S");document.addEventListener("keydown",(e=>{if(window.location.hash.startsWith(n)&&e.ctrlKey===d&&e.altKey===o&&e.shiftKey===c&&e.code===r){e.preventDefault();let n={};i&&(n=i()),a.dispatch(t,n)}}))}static dispatch(e,...t){if(this.handlers[e])return console.log("Action dispatched",{name:e,args:t}),this.handlers[e](...t);console.warn(`Action No handler for action "${e}"`)}}},182:(e,t,n)=>{"use strict";n.d(t,{S:()=>a});class a{#u;#N;#F;#M;#P;#U;constructor(e){this.#u=window.Handlebars.compile(e.template),this.#N=e.data||{},this.#F=e.mapper,this.#U=e.postRender,this.#M=document.createElement("div"),this.#M.className="event-container",e.root.appendChild(this.#M),this.setData(this.#N),e.events&&(this.#P=this.#j.bind(this),e.events.forEach((e=>{this.#M.addEventListener(e,(t=>{window?.app?.debug&&console.log(`View event ${e} received`,t.detail);for(const e in this.#N)if(t.detail[e]!==this.#N[e])return;this.#P(),this.#U&&this.#U(this.#N)}))})))}async#j(){const e=this.#F?await this.#F(this.#N):this.#N,t=this.#u(e,this.#N);this.#M.innerHTML!==t&&(this.#M.innerHTML=t)}setData(e){window?.app?.debug&&console.log("View new data received",e),this.#N={...this.#N,...e};for(const e in this.#N)this.#M.dataset[e]=this.#N[e];this.#j()}}},470:(e,t,n)=>{"use strict";function a(e,t,n,a=void 0){document.addEventListener(e,(function(e){if(a&&!a(e))return;let i=e.target.closest(t);i&&(n(i),e.preventDefault())}))}function i(e,t,n){document.querySelector(e).addEventListener("keydown",(e=>{if(t(e))return n(e),e.preventDefault(),!1}))}n.d(t,{JD:()=>s,Ng:()=>a,qm:()=>i});const s=(e,t)=>document.dispatchEvent(new CustomEvent(e,{detail:t}))},779:(e,t,n)=>{"use strict";function a(e){return window.Handlebars.compile(e)}function i(e,t){let n;try{n=window.Handlebars.compile(e)(t)}catch(e){n=`Rendering exception: ${e}`}return n}function s(e,t,n,a=!1){let i;if(e){try{i=t(n)}catch(e){i=`Rendering exception: ${e}`}a?e.innerHTML+=i:e.innerHTML=i}else console.warn(`renderElement() nothing found for selector: ${e}`)}function r(e,t,n,a=!1){s(document.querySelector(e),t,n,a)}n.d(t,{F0:()=>i,XX:()=>r,dN:()=>s,vs:()=>a}),window.Handlebars.registerHelper("eachSorted",(function(e,t){let n=window.Handlebars.createFrame(t,t.hash),a="";for(const i of Object.keys(e).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))))Object.prototype.hasOwnProperty.call(e,i)&&(n.key=i,a+=t.fn(e[i],{data:n}));return a})),window.Handlebars.registerHelper("notEmpty",(function(e,t){return e&&Object.keys(e).length>0?t.fn(this):t.inverse(this)})),window.Handlebars.registerHelper("reSub",(function(e,t,n){let a=n.fn(this);return"string"!=typeof a?a:a.replace(new RegExp(e,"g"),t)})),window.Handlebars.registerHelper("ifTrue",(function(e,t){return 1==e?t.fn(this):t.inverse(this)})),window.Handlebars.registerHelper("ifFalse",(function(e,t){return 1==e?t.fn(this):t.inverse(this)})),window.Handlebars.registerHelper("contains",(function(e,t,n){return e=window.Handlebars.escapeExpression(e),(t=window.Handlebars.escapeExpression(t)).indexOf(e)>-1?n.fn(this):n.inverse(this)})),window.Handlebars.registerHelper("compare",(function(e,t,n,a){var i={"==":e==n,"===":e===n,"!=":e!=n,"!==":e!==n,">":e>n,">=":e>=n,"<":e<n,"<=":e<=n,"||":!(!e&&!n),"&&":!(!e||!n)};return Object.prototype.hasOwnProperty.call(i,t)?i[t]?a.fn(this):a.inverse(this):console.error('Error: Expression "'+t+'" not found')}))},662:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});class a{static#_={};static async get(e){let t;if(this.#_[e])return this.#_[e];switch(e){case"md":{const e=new window.showdown.Converter({tables:!0,metadata:!0,ghCodeBlocks:!0});e.setFlavor("github"),e.setOption("simpleLineBreaks",!1),t=e;break}case"Split":{const{default:e}=await import("lib_split");t=e;break}case"DOMPurify":{const{default:e}=await import("lib_dompurify");t=e;break}case"adoc":{const{default:e}=await import("lib_asciidoctor");t=new e;break}case"Mermaid":{const{default:e}=await import("lib_mermaid");e.initialize({startOnLoad:!1,securityLevel:"antiscript",logLevel:"error"}),t=e;break}case"rst":await import("lib_rst2html"),t=window.rst2html;break;default:throw new Error(`Unknown converter: ${e}`)}return this.#_[e]=t,this.#_[e]}}},240:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});var a=n(551);class i{static#H={none:async()=>({model:"none",result:"ERROR: LLM chat bot is currently disabled in <a href='#/-/Settings'>Settings</a>. Please enable it to allow LLM prompts."}),huggingFace:async e=>{const t=await a.w.get("huggingFaceModel");return t?{model:"HuggingFace "+t,result:await this.#A({messages:[{role:"user",content:e}],model:t}).then((e=>{if(e.error)throw new Error(e.error.message);if(!e.choices||0===e.choices.length)throw new Error("No response from LLM model.");return e.choices[0].message.content})).catch((e=>"ERROR: "+e.message))}:{model:"HuggingFace ???",result:"ERROR: No model selected."}},ollama:async e=>{const t=await a.w.get("ollamaModel");return t?{model:"Ollama "+t,result:await fetch(`${await a.w.get("ollamaEndpoint")}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,model:t,stream:!1})}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()})).then((e=>{if(e.error)throw new Error(e.error);return e.response})).catch((e=>"ERROR: "+e.message))}:{model:"Ollama ???",result:"ERROR: No model selected."}}};static async updateOllamaModelList(){const e=await fetch(`${await a.w.get("ollamaEndpoint")}/api/tags`,{method:"GET"}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}));await a.w.set("ollamaModels",e.models.map((e=>e.name)),!0)}static async#A(e){let t={"Content-Type":"application/json"};const n=await a.w.get("huggingFaceToken");n&&n.length>0&&(t.Authorization=`Bearer ${n}`);const i=await fetch("https://router.huggingface.co/v1/chat/completions",{headers:t,method:"POST",body:JSON.stringify(e)});return await i.json()}static async submit(e){const t=await a.w.get("chatType","none");return t&&this.#H[t]?await this.#H[t](e):{model:"unknown",result:`ERROR: Unknown chat provider: ${t}`}}}},933:(e,t,n)=>{"use strict";n.d(t,{m:()=>u});var a=n(386);class i{static async fetch(e){var t,n=await fetch(`https://api.github.com/repos/${e.github}`).then((e=>e.json())).then((n=>(t=n,fetch(`https://api.github.com/repos/${e.github}/git/trees/${n.default_branch}?recursive=1`)))).then((e=>e.json())).catch((e=>{throw new Error(`Error on Github request: ${e}'`)}));if(n.response&&n.response.test(/Too many requests/))throw new Error("Github API rate limit exceeded!");if(!n.tree)throw new Error("No 'tree' data when fetching from Github!");return{paths:n.tree.map((a=>({path:a.path,download:`https://raw.githubusercontent.com/${e.github}/${n.sha}/${a.path}`,edit:`https://github.com/${e.github}/edit/${t.default_branch}/${a.path}`}))),section:{url:t.html_url,author:t.owner.login,homepage:t.homepage,license:t.license,default_branch:t.default_branch}}}}class s{static async fetch(e){var t;return{data:await fetch(`https://gitlab.com/api/v4/projects/${encodeURIComponent(e.gitlab)}`).then((e=>e.json())).then((n=>(t=n,fetch(`https://gitlab.com/api/v4/projects/${encodeURIComponent(e.gitlab)}/repository/tree?ref=${n.default_branch}&recursive=true`)))).then((e=>e.json())),section:{url:t.html_url,author:t.owner.login,homepage:t.homepage,license:t.license,default_branch:t.default_branch}}}}var r=n(3);class o{static#q(e,t,n,a,i){r.w.addDocument(e,t,n,{type:"link",baseName:a.replace(/.*\//,""),baseUrl:a.replace(/\/[^/]+$/,""),editUrl:i})}static async documentDownload(e,t,n,a,i){navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),await fetch(a).then((e=>e.text())).then((async s=>{r.w.addDocument(e,t,n,{data:s,baseName:a.replace(/.*\//,""),baseUrl:a.replace(/\/[^/]+$/,""),editUrl:i})}))}static#V(e,t=null,n){var a={match:e.match(n),target:null};return a.match&&(t?2==e.split(t).length?a.target=a.match[1].substring(t.length+1):a.match=null:a.target=a.match[1]),a}static async fetchNewSection(e,t,n,a){const o=n.filePattern?n.filePattern:"^(.+)\\.(md|markdown|rst|adoc|asciidoc)$",d=new RegExp(o);let c,l=[];if(n.github)console.log(`Fetching from ${n.github}...`),c=await i.fetch(n);else{if(!n.gitlab)throw new Error("Unsupported repo type!");console.log(`Fetching from ${n.gitlab}...`),c=await s.fetch(n)}let u=c.section;u.children=[],c.paths.forEach((i=>{var s=this.#V(i.path,n.folder,d);s.target&&(s.target=s.target.replace(/\//g,":::"),a?l.push(this.documentDownload(e,t,s.target,i.download,i.edit).then((()=>document.dispatchEvent(new CustomEvent("download-finished",{detail:i.path}))))):this.#q(e,t,s.target,i.download,i.edit),u.children.push(s.target))})),await r.w.addDocTree(e,t,u),await Promise.all(l)}}var d=n(648),c=n(84),l=n(551);class u{static getInstallable=async e=>window.Config.groups[e]?.catalog?await fetch(window.Config.groups[e].catalog.source).then((e=>e.json())).then((t=>{if(t)return t;throw new Error(`Error fetching ${e} catalog`)})):{};static async#z(e){try{for(const t of Object.keys(window.Config.groups[e].install)){const n=window.Config.groups[e].install[t];await this.install(e,t,n,void 0,!1)}}catch(t){console.error(`Error fetching index ${window.Config.indexUrls[e].index}: ${t}`)}}static async update(){const e=await r.w.getTree();if(await l.w.get("initialRun",!0)){console.log("Initial run. Initializing groups...");for(const t of Object.keys(window.Config.groups))window.Config.groups[t].install&&(e.nodes[t]||this.#z(t));await l.w.set("initialRun",!1),console.log("Initial run finished"),document.dispatchEvent(new CustomEvent("sections-updated"))}else{console.log("Checking for orphaned documents...");const t=await d.DB.getAllKeys("settings","settings");for(const n of t)if(0==n.indexOf("document:::")){const t=n.split(/:::/);e.nodes[t[1]]&&e.nodes[t[1]].nodes&&e.nodes[t[1]].nodes[t[2]]||(console.log(`Dropping orphaned doc: ${n}`),l.w.remove(n))}console.log("Checking for missing sections...");for(const t of Object.keys(window.Config.groups))e.nodes[t]||window.Config.groups[t].removable||"Feeds"===t||(console.log(`Installing missing section: ${t}`),this.#z(t))}}static removeGroup(e){r.w.removeGroup(e),a.q.pathChanged(""),c.d.update()}static remove(e,t){r.w.remove(e,t),c.d.update()}static async install(e,t,n,a=void 0,i=!0){let s=document.createElement("pre");s.class="note",s.innerText="Fetching content...\n",a&&a.parentNode.append(s),await o.fetchNewSection(e,t,n,i).catch((e=>{console.error(`Error fetching '${t}' from ${n.github}: ${e}`),s.innerText+=`Error fetching '${t}' from ${n.github}: ${e}\n`})),document.dispatchEvent(new CustomEvent("sections-updated")),c.d.update()}}},648:(e,t,n)=>{"use strict";n.d(t,{DB:()=>a});class a{static#J={aggregator:{version:1,stores:{tree:{keyPath:"id",autoIncrement:!0},items:{keyPath:"id",autoIncrement:!0},favicons:{keyPath:"id",autoIncrement:!0}},indexes:{items:[{name:"nodeId",field:"value.nodeId",params:{unique:!1}}]}},settings:{version:1,stores:{settings:{keyPath:"id",autoIncrement:!0}},indexes:{}}};static#W=[];static async#G(e){if(!this.#J[e])throw new Error(`DB '${e}' not configured`);return this.#W[e]||(await new Promise(((t,n)=>{let a=this,i=indexedDB.open(e,a.#J[e].version);i.onsuccess=function(){a.#W[e]=this.result,t()},i.onerror=function(e){a.#W=void 0,n(`Error opening IndexedDB: ${e.target.errorCode}`)},i.onupgradeneeded=t=>{const n=a.#W[e]=t.currentTarget.result;console.log("IndexedDB onupgradeneeded");const i=a.#J[e].stores;Object.keys(i).forEach((t=>{n.objectStoreNames.contains(t)||(console.log(`Creating store '${t}' in IndexedDB ${e}`),n.createObjectStore(t,i[t]))}));const s=a.#J[e].indexes;Object.keys(s).forEach((a=>{if(n.objectStoreNames.contains(a)){const n=t.target.transaction.objectStore(a);for(const t of s[a])n.indexNames.contains(t.name)||(console.log(`Creating index '${t.name}' in store '${a}' of IndexedDB ${e}`),n.createIndex(t.name,t.field,t.params))}}))}})),window.DB=this),this.#W[e]}static async getByIndexOnly(e,t,n,a){const i=await this.#G(e);return await new Promise(((s,r)=>{const o=i.transaction(t,"readonly").objectStore(t);if(!o.indexNames.contains(n))return void r(`Index '${n}' does not exist in store '${t}'`);const d=o.index(n),c=[],l=d.openCursor(IDBKeyRange.only(a));l.onsuccess=e=>{const t=e.target.result;t?(c.push({id:t.id,...t.value}),t.continue()):s(c)},l.onerror=i=>r(`Error getting '${a}' from DB '${e}' store '${t}' index '${n}': ${i.target.errorCode}`)}))}static async getAllKeys(e,t){const n=await this.#G(e);return await new Promise(((a,i)=>{const s=n.transaction(t,"readonly").objectStore(t).getAllKeys();s.onsuccess=function(e){a(e.target.result)},s.onerror=function(n){i(`Error getting all keys from DB '${e}' store '${t}': ${n.target.errorCode}`)}}))}static async get(e,t,n,a="null"){const i=await this.#G(e);return await new Promise(((s,r)=>{const o=i.transaction(t,"readonly").objectStore(t).get(n);o.onsuccess=function(e){let t;t=e.target.result&&void 0!==e.target.result.value&&null!==e.target.result.value?e.target.result.value:a,s(t)},o.onerror=function(a){r(`Error getting '${n}' from DB '${e}' store '${t}' ${a.target.errorCode}`)}}))}static getById=async(e,t,n)=>{const a=await this.get(e,t,n);return a?{id:n,...a}:null};static async set(e,t,n,a){const i=await this.#G(e);await new Promise(((s,r)=>{const o=i.transaction(t,"readwrite").objectStore(t);try{const i=o.put(n?{id:n,value:a}:{value:a});i.onsuccess=function(){s()},i.onerror=function(a){r(`Error saving '${n}' in DB '${e}' store '${t}': ${a.target.errorCode}`)}}catch(a){r(`Error saving '${n}' in DB '${e}' store '${t}': ${a}`)}}))}static async remove(e,t,n){const a=await this.#G(e);await new Promise(((i,s)=>{const r=a.transaction(t,"readwrite").objectStore(t);try{r.delete(n),i()}catch(a){s(`Error deleting '${n}' DB '${e}' from store '${t}': ${a}`)}}))}static async removeOrphans(e,t,n,a){const i=await this.#G(e);await new Promise(((s,r)=>{const o=i.transaction(t,"readwrite").objectStore(t);try{let i=0;const r=o.index(n),d=IDBKeyRange.lowerBound(0);r.openCursor(d).onsuccess=r=>{const o=r.target.result;o?(a.includes(o.value.value[n])||(o.delete(),i++),o.continue()):(console.info(`Removed ${i} orphaned items from DB '${e}' store '${t}'`),s())}}catch(n){r(`Error deleting orphaned items from DB '${e}' store '${t}': ${n}`)}}))}}},84:(e,t,n)=>{"use strict";n.d(t,{d:()=>s});var a=n(3),i=n(551);class s{static#K="SearchIndexCache";static async getCache(){return await i.w.get(s.#K,void 0)}static async setCache(e){await i.w.set(s.#K,e)}static async clearCache(){await i.w.delete(s.#K)}static async getDocs(){const e=await a.w.getTree();let t={};return e.nodes&&Object.values(e.nodes).forEach((e=>{t={...t,...s.#X(e)}})),t}static#X(e){let t={};return e.nodes&&Object.values(e.nodes).forEach((e=>{console.log(`Adding index for ${e.id}`);const n=`${e.id.replace(/:::/g,"/")}`;t[n]={doc:n,id:e.id,title:e.name,content:e.content,relUrl:"#/"+n},t={...t,...s.#X(e)}})),t}static async update(){console.log("SearchIndex: Updating index...");const e=await s.getDocs();let t={docs:e,index:window.lunr((function(){this.ref("id"),this.field("title",{boost:200}),this.field("content",{boost:2}),this.field("relUrl"),this.metadataWhitelist=["position"];for(let t in e)this.add({id:t,title:e[t].title,content:e[t].content,relUrl:e[t].relUrl})}))};s.setCache({index:JSON.stringify(t.index),docs:t.docs}),document.dispatchEvent(new CustomEvent("search-index-updated",{detail:t})),console.log("SearchIndex: Updating index done.")}}},3:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var a=n(551);class i{static#Y(e,t,n){let a={name:t,parent_id:e,id:e+":::"+t,runbook:n.runbook,url:n.url,author:n.author,license:n.license,homepage:n.homepage,nodes:{}};return n.children.forEach((i=>{console.log(`Adding ${i} to group ${e} section ${t}`);const s=i.split(/:::/);let r=a;for(let e=0;e<s.length-1;e++){const t=s[e];r.nodes[t]||(r.nodes[t]={name:t,id:r.id+":::"+t,parent_id:r.id,nodes:{}}),r=r.nodes[t]}r.nodes[s[s.length-1]]={name:s[s.length-1],id:r.id+":::"+s[s.length-1],parent_id:r.id,type:n.type}})),console.info(a),a}static async#o(e){await a.w.set("sections",e),document.dispatchEvent(new CustomEvent("sections-updated"))}static async remove(e,t){let n=await this.getTree(),i=n.nodes[e].nodes[t];if(i){for(const e of Object.keys(i.nodes))a.w.remove(`document:::${t}:::${e}`);await a.w.remove(`section:::${t}`),delete n.nodes[e].nodes[t],this.#o(n)}}static async removeGroup(e){let t=await this.getTree(),n=t.nodes[e];if(n){for(const t of Object.keys(n.nodes))await this.remove(e,t);delete t.nodes[e],this.#o(t)}}static async addDocTree(e,t,n){let a=await this.getTree();a.nodes[e]||(a.nodes[e]={nodes:{}}),a.nodes[e].nodes[t]=i.#Y(e,t,n),this.#o(a)}static async get(e){let t=await this.getTree();for(const n of e.split(/:::/)){if(!t.nodes[n])return;t=t.nodes[n]}return t}static getTree=async()=>await a.w.get("sections",{nodes:{}});static getDocument=async e=>await a.w.get(`document:::${e}`,{});static addDocument=async(e,t,n,i)=>await a.w.set(`document:::${e}:::${t}:::${n}`,i)}},551:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var a=n(648);class i{static get=async(e,t)=>await a.DB.get("settings","settings",e,t);static async set(e,t,n=!0){await a.DB.set("settings","settings",e,t,n),n&&document.dispatchEvent(new CustomEvent("settings-changed",{detail:{name:e,value:t}}))}static remove=async e=>await a.DB.remove("settings","settings",e)}},388:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ChatView:()=>d});var a=n(240),i=n(913),s=n(662),r=n(551),o=n(779);class d{static#Q;static addToolResult(e,t,n="text"){if(!e||!t)return;const a=i.ContentView.getViewElement("chat").querySelector(".content"),s=document.createElement("pre");if(s.classList.add("cli"),s.innerText+="$ "+e,"text"===n&&(s.innerText+="\n"+t),a.appendChild(s),"html"===n){const e=document.createElement("div");e.innerHTML=t,a.appendChild(e)}a.scrollIntoView({behavior:"smooth",block:"end"})}static async submitPrompt(e){if(0==e.length)return;const t=i.ContentView.getViewElement("chat"),n=t.querySelector(".content");let c,l;n.innerHTML+=o.F0('\n            <div class="question"><p>{{prompt}}</p></div>\n            <div class="loading"><i>Processing ...</i></div>\n        ',{prompt:e}),n.scrollIntoView({behavior:"smooth",block:"end"}),d.#Q||(d.#Q=await s.u.get("md")),r.w.get("AIPromptHistory",[]).then((t=>{t.push(e),t=t.slice(-15),r.w.set("AIPromptHistory",t)}));try{l=await a.r.submit(e)}catch(e){c=`<div class="answer">ERROR: Request failed (${encodeURI(e)})!</div>`}try{c=d.#Q.makeHtml(l.result)}catch(e){c=`ERROR: Markdown parsing error (${encodeURIComponent(e)})!`}[...t.querySelectorAll(".loading")].forEach((e=>e.remove())),n.innerHTML+=`<div class="answer"><div class="llm">${l.model}</div>${c||"ERROR: Request failed!"}</div>`,n.scrollIntoView({behavior:"smooth",block:"end"})}}},943:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ChecksView:()=>s});var a=n(551),i=n(779);class s{constructor(e){Object.values(window.Config.toolboxComponents).forEach((e=>n(755)(e.import))),s.render(e),document.addEventListener("settings-changed",(t=>{0==t.detail.name.indexOf("toolEnabled:::")&&s.render(e)}))}static async render(e){Promise.all(Object.keys(window.Config.toolboxComponents).map((async e=>({name:e,embed:window.Config.toolboxComponents[e].embed,settings:window.Config.toolboxComponents[e].settings,enabled:await a.w.get("toolEnabled:::"+e,window.Config.toolboxComponents[e].enabled)})))).then((t=>{i.dN(e,i.vs('\n                <div class="checks">\n                    {{#each tools}}\n                    {{#ifTrue enabled}}\n                        <h3>\n                            {{name}}\n                            {{#if settings}}\n                                <a href="#/-/Settings/Tools/{{name}}" class="settings">‚öô</a>\n                            {{/if}}\n                        </h3>\n                        <div class="check">\n                            {{{embed}}}\n                        </div>\n                    {{/ifTrue}}\n                    {{/each}}\n                </div>\n            '),{tools:t})}))}}},913:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ContentView:()=>d});var a=n(3),i=n(789),s=n(209),r=n(965),o=n(779);class d{static#Z={adoc:s.CheatSheetRenderer,rst:s.CheatSheetRenderer,asciidoc:s.CheatSheetRenderer,md:s.CheatSheetRenderer,htm:s.CheatSheetRenderer,html:s.CheatSheetRenderer,pdf:r.PdfRenderer};static#ee={Catalog:{switch:"content",view:"Catalog"},CLI:{switch:"chat",view:void 0},Discover:{switch:"content",view:"Discover"},Feeds:{switch:"content",view:"Feeds"},Feed:{switch:"feedreader",view:"FeedReader"},Folder:{switch:"content",view:"Folder"},Settings:{switch:"content",view:"Settings"},OPFS:{switch:"content",view:"OPFSFileBrowser"}};constructor(e){o.dN(e,o.vs('       \n            <nav class="breadcrumb-nav">\n                <ol class="breadcrumb-nav-list" id="breadcrumb-nav"></ol>\n            </nav>\n\n            <div id="main-content-content" class="main-content-view">\n            </div>\n\n            <div id="main-content-search" class="main-content-view">\n                <div id="search-results" class="search-results">\n                    Loading ...\n                </div>\n            </div>\n\n            <div id="main-content-chat" class="main-content-view">\n                <p class="loading">\n                This is the combined CLI/chat view. By prefixing prompts with <code>?</code> you can ask questions here and get answers from the configured LLM.\n                Enter <code>!help</code> to see available CLI commands. Not using a prefix will perform a content search.\n                </p>\n\n                <div id="aiChatView">\n                    <div class="container">\n                        <div class="content">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '),{}),new i.HomeView(d.#te("content")),Array.from(document.getElementsByClassName("main-content-view")).forEach((e=>{e.onclick=()=>e.focus()}))}static#ne=()=>document.getElementById("breadcrumb-nav").scrollIntoView({behavior:"instant",block:"center"});static#ae(e,t){if(!Object.keys(d.#ee).includes(e))return void(d.#te("content").innerHTML=`ERROR: No internal route for ${e}`);const a=d.#te(d.#ee[e].switch),i=d.#ee[e].view;i&&n(855)(`./${i}.js`).then((e=>{new e[`${i}View`](a,t)})).catch((e=>{d.#te("content").innerHTML=`ERROR: Loading view ${i} failed: ${e}`}))}static async render(e){if(d.#ne(),0==e.indexOf("-/"))return void d.#ae(e.split("/")[1],e);const t=e.replace(/\//g,":::");if((await a.w.get(t)).nodes)return void(-1==t.indexOf(":::")?d.#ae("Catalog",e):d.#ae("Folder",e));const n=await a.w.getDocument(t);if(!n)return s.innerHTML="<h1>ERROR: Document not found</h1>",void console.error(`No document found for ${e}`);const i=n.baseName.split(".").pop().toLowerCase(),s=d.#te("content");Object.keys(d.#Z).includes(i)?await d.#Z[i].load(s,n):s.innerHTML=`ERROR: No renderer for ${i} files`}static#te(e){let t;return document.title=window.Config.siteName,"feedreader"===e?(document.getElementById("main-content-wrap").style.display="none",t=document.getElementById("feedreader"),t.style.display="block",t):([...document.querySelectorAll(".main-content-view")].forEach((e=>e.style.display="none")),document.getElementById("main-content-wrap").style.display="block",t=document.getElementById(`main-content-${e}`),t.style.display="block","chat"!==e&&"search"!==e&&(t.innerHTML=""),t)}static getViewElement(e){return document.getElementById(`main-content-${e}`)}static showSearch(){d.#te("search")}static hideSearch(){window.location.hash.startsWith("#/-/CLI")?d.#te("chat"):d.#te("content")}}},789:(e,t,n)=>{"use strict";n.r(t),n.d(t,{HomeView:()=>r});var a=n(943),i=n(3),s=n(182);class r extends s.S{constructor(e){super({root:e,template:'\n                <div class="about">\n                    {{{ welcome }}}\n\n                    <div id=\'home-content\'>\n                        <h3>Content</h3>\n\n                        <div>\n                            {{#each sections.nodes as |groups groupId| }}\n                                <div>\n                                    <b>{{ @key }}</b>:\n                                    {{#each nodes}}\n                                        &nbsp;\n                                        <a href="#/{{ groupId }}/{{ @key }}">{{ @key }}</a>\n                                    {{/each}}\n                                </div>\n                            {{/each}}\n                        </div>\n                    </div>\n                </div>\n\n                <div id="toolpanelHome"></div>\n            ',mapper:async()=>({welcome:window.Config.welcome,sections:await i.w.getTree()})}),new a.ChecksView(document.getElementById("toolpanelHome"))}}},216:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Sidebar:()=>o});var a=n(753),i=n(3),s=n(217),r=n(779);class o{#k;static#u=r.vs('\n        {{#* inline "sidebarChildNode"}}\n            <li class="nav-list-item" data-path="{{ id }}">\n                {{#notEmpty nodes}}\n                    <a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a>\n                {{/notEmpty}}\n                <a data-path="{{ id }}" class="nav-list-link" href="#/{{#reSub ":::" "/"}}{{id}}{{/reSub}}">{{ name }}</a>\n                <ul data-path="{{ id }}" class="nav-list">\n                    {{#each nodes }}\n                        {{> sidebarChildNode }}\n                    {{/each}}\n                </ul>\n            </li>\n        {{/inline}}\n\n        {{#each tree.nodes }}\n            <ul class="nav-list">\n                    <li class="nav-list-item" data-path="{{ @key }}">\n                            <a class="nav-list-link pwa-title" data-path="{{ @key }}" href="#/{{ @key }}">\n                                    {{ @key }}\n                            </a>\n                    </li>\n            </ul>\n            <ul class="nav-list">\n                {{#each nodes }}\n                    {{> sidebarChildNode }}\n                {{/each}}\n            </ul>\n        {{/each}}\n\n        {{#* inline "sidebarChildFeed"}}\n            {{#if error}}\n                ‚õî&nbsp;\n            {{else}}\n                {{#if iconData}}\n                    <img class=\'icon\' src=\'{{iconData}}\'/>\n                {{else}}\n                    <img class=\'icon\' src=\'default.svg\'/>\n                {{/if}}\n            {{/if}}\n            <span class=\'title\'>\n                {{{title}}}\n            </span>\n            <span class=\'count\' data-count=\'{{unreadCount}}\'>{{unreadCount}}</span>\n        {{/inline}}\n   \n        \x3c!-- FeedReader section --\x3e\n        <ul class="nav-list">\n                <li class="nav-list-item context-node" data-type=\'folder\' data-path="feeds">\n                        <a class="nav-list-link pwa-title" data-path="feeds" href="#/-/Feeds">\n                                Feeds\n                        </a>\n                </li>\n        </ul>\n        <div id="feedlist">\n            <ul class="nav-list" id=\'feedlistViewContent\'>\n                {{#each feedlist.children }}\n                    <li class=\'nav-list-item context-node\' data-type=\'feed\' data-id=\'{{id}}\'>\n                        <a data-path="-:::Feed:::{{id}}" class="nav-list-link" href="#/-/Feed/{{id}}">\n                            <div class="feed">\n                                {{> sidebarChildFeed }}\n                            </div>\n                        </a>\n                    </li>\n                {{/each}}\n            </ul>\n        </div>\n    ');constructor(e){this.#k=e,this.#j(),e.addEventListener("dragover",this.#ie.bind(this)),e.addEventListener("dragleave",this.#se.bind(this)),e.addEventListener("dragend",this.#se.bind(this)),e.addEventListener("drop",this.#re.bind(this)),document.addEventListener("nodeRemoved",this.#j()),document.addEventListener("nodeUpdated",(t=>{const n=t.detail.id,a=e.querySelector(`#feedlist .nav-list-item[data-id="${n}"]`);if(a){const e=a.querySelector(".title"),n=a.querySelector(".count"),i=a.querySelector(".icon");e.textContent!=t.detail.title&&(e.textContent=t.detail.title),n.textContent!=""+t.detail.unreadCount&&(n.textContent=t.detail.unreadCount),n.dataset.count=t.detail.unreadCount,i&&t.detail.iconData&&(i.src=t.detail.iconData)}else this.#j()})),document.addEventListener("sections-updated",this.#j),e.addEventListener("click",(e=>{var t=e.target;for(this.#k.focus();t&&(!t.classList||!t.classList.contains("nav-list-expander"));)t=t.parentNode;t&&(e.preventDefault(),t.parentNode.classList.toggle("active"))})),e.addEventListener("auxclick",(e=>{var t=e.target;if(1===e.button){for(;t&&!t.classList.contains("nav-list-item");)t=t.parentNode;t&&t.classList.contains("nav-list-item")&&(e.preventDefault(),s.r.dispatch(`sidebar:${t.dataset.type}:middleClick`,t.dataset))}}))}#re(e){let t;e.preventDefault(),t=e.dataTransfer.getData("text/plain"),t||(t=e.dataTransfer.getData("text/x-moz-url")),t||(t=e.dataTransfer.getData("text/url-list")[0]),alert("Dropped URL: "+t),this.#k.classList.remove("drag-over")}#ie(e){e.preventDefault(),this.#k.classList.add("drag-over")}#se=()=>this.#k.classList.remove("drag-over");#j=async()=>r.dN(this.#k,o.#u,{tree:await i.w.getTree(),feedlist:a.f.root});static selectionChanged(e){const t=e.replace(/\/$/,"").replaceAll(/\//g,":::").replace(/:::Item:::[^:]*$/,"");try{const n=document.getElementById("sidebar");if(Array.from(n.getElementsByClassName("active")).forEach((e=>e.classList.remove("active"))),Array.from(n.getElementsByClassName("selected")).forEach((e=>e.classList.remove("selected"))),""===e)return;let a=t;for(;-1!==a.indexOf(":::");)Array.from(n.querySelectorAll(`li[data-path="${a}"]`)).forEach((e=>e.classList.add("active"))),a=a.replace(/:::[^:]*$/,"");const i=n.querySelector(`a[data-path="${t}"]`);i?.classList.add("active"),i?.classList.add("selected"),i?.scrollIntoView({block:"nearest"})}catch(e){console.error(`select "${t}" caused: ${e}`)}}}},209:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CheatSheetRenderer:()=>s});var a=n(779),i=n(662);class s{static#oe=a.vs("\n        <div class='video'>\n            <a href='{{ href }}'>\n                <img src='https://i.ytimg.com/vi/{{ ytid }}/hqdefault.jpg'/>\n            </a>\n            <div class='title'>{{ title }}</div>\n            <div class='caption'>{{ caption }}</div>\n        </div>\n    ");static#de(e){const t=new RegExp("^https://www\\.youtube\\.com/watch\\?v=");e.querySelectorAll('a[href*="https://www.youtube.com/watch?v="]').forEach((e=>{const n=e.innerText.split(/---/);e.innerHTML=this.#oe({href:e.href,ytid:e.href.replace(t,""),title:n[0],caption:n[1]})}))}static async renderDocument(e,t){let n=encodeURI(t.baseUrl);if("link"===t.type&&(e.innerHTML=`Fetching content from <a href="${t.baseUrl}">${t.baseUrl}</a>...`,t.data=await fetch(n+"/"+t.baseName).then((e=>e.text()))),!t.data)return;let a="",s={};try{t.baseName?.match(/\.rst$/)?a=(await i.u.get("rst"))(t.data):t.baseName?.match(/\.(adoc|asciidoc)$/)?a=(await i.u.get("adoc")).convert(t.data):(t.data=t.data.replace(/(\[[^\]]+\])\(\//g,"$1("+n+"/"),a=(await i.u.get("md")).makeHtml(t.data),s=(await i.u.get("md")).getMetadata()),a=(await i.u.get("DOMPurify")).sanitize(a)}catch(e){console.error(e),a="ERROR: Content rendering error!"}return a=a.replace(/<img /g,'<img loading="lazy" '),e.innerHTML=a.replace(/(<img[^>]src=["'])\//g,"$1"+n+"/").replace(/(<img[^>]+src=["'])([^h:][^t][^t][^p])/g,"$1"+n+"/$2").replace(/(<a[^>]+href=["'])([^#h:][^t][^t][^p])/g,"$1"+n+"/$2"),"true"===s?.videoEmbed&&this.#de(e),await(await i.u.get("Mermaid")).run({querySelector:".main-content-view .mermaid"}),t}static async load(e,t){await this.renderDocument(e,t),-1==e.innerHTML.indexOf("<h1")&&e.insertAdjacentHTML("afterbegin",`<h1>${t.baseName.replace(/\.[^.]*$/,"")}</h1>`);var n=document.getElementsByTagName("h1")[0];n&&t&&(t?.editUrl&&(n.innerHTML+=`<button id='editBtn' title='Edit in Github' data-edit-url="${t.editUrl}" class="btn">Edit</button>`),t?.editUrl&&(document.getElementById("editBtn").onclick=e=>{window.open(e.target.dataset.editUrl,"_blank")}))}}},965:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PdfRenderer:()=>a});class a{static async load(e,t){const n=await import("./vendor/pdf.mjs"),a=await import("./vendor/pdf_viewer/pdf_viewer.mjs");e.innerHTML='\n\t\t\t<div id="viewerContainer">\n\t\t\t\t<div id="viewer" class="pdfViewer"></div>\n\t\t\t</div>\n\t\t';const i=e.querySelector("#viewerContainer");i.style="position: absolute; width: 100%; height: 100%; overflow: auto;",n.GlobalWorkerOptions.workerSrc="vendor/pdf.worker.mjs";const s=t.baseUrl+"/"+t.baseName,r=new URL("vendor/pdf.sandbox.mjs",window.location),o=new a.EventBus,d=new a.PDFLinkService({eventBus:o}),c=new a.PDFFindController({eventBus:o,linkService:d}),l=new a.PDFScriptingManager({eventBus:o,sandboxBundleSrc:r}),u=new a.PDFViewer({container:i,eventBus:o,linkService:d,findController:c,scriptingManager:l});d.setViewer(u),l.setViewer(u),o.on("pagesinit",(function(){u.currentScaleValue="page-width"}));const h=n.getDocument({url:s,enableXfa:!0}),m=await h.promise;u.setDocument(m),d.setDocument(m,null)}}}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var s=a[e]={exports:{}};return n[e](s,s.exports,i),s.exports}i.m=n,i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>"bundle-"+e+".js",i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="lzone.de:",i.l=(n,a,s,r)=>{if(e[n])e[n].push(a);else{var o,d;if(void 0!==s)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(d=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",t+s),o.src=n),e[n]=[a];var h=(t,a)=>{o.onerror=o.onload=null,clearTimeout(m);var i=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(a))),t)return t(a)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),d&&document.head.appendChild(o)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/js/bundle/",(()=>{var e={792:0};i.f.j=(t,n)=>{var a=i.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var s=new Promise(((n,i)=>a=e[t]=[n,i]));n.push(a[2]=s);var r=i.p+i.u(t),o=new Error;i.l(r,(n=>{if(i.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,a[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var a,s,[r,o,d]=n,c=0;if(r.some((t=>0!==e[t]))){for(a in o)i.o(o,a)&&(i.m[a]=o[a]);d&&d(i)}for(t&&t(n);c<r.length;c++)s=r[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunklzone_de=self.webpackChunklzone_de||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i(386)})();