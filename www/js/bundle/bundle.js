(()=>{var e,t,n={855:(e,t,n)=>{var s={"./Catalog.js":[99,99],"./Chat.js":[388],"./Checks.js":[943],"./Content.js":[913],"./FeedReader.js":[845,845],"./Feeds.js":[849,849],"./FileBrowser.js":[734,734],"./Folder.js":[546,546],"./Home.js":[789],"./Settings.js":[491,491],"./Sidebar.js":[216],"./renderers/CheatSheet.js":[209],"./renderers/Pdf.js":[965]};function a(e){if(!n.o(s,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(a)))}a.keys=()=>Object.keys(s),a.id=855,e.exports=a},808:(e,t,n)=>{"use strict";n.d(t,{ZI:()=>f,Sn:()=>p,JK:()=>w});var s=n(554);class a{static maxItems=1e3;static linkAutoDiscover=f;static parserAutoDiscover=p}var i=n(429);function o(e,t,n,s=NaN){let a=NaN;try{a=parseInt(s,10)}catch{}t&&n&&-1===t.indexOf("www.gravatar.com")&&(e.description&&-1!==e.description.indexOf(t)||(e.media||(e.media=[]),e.media.push({url:t,mime:n,length:a})))}class r{static getRootNode(e){let t=e.firstChild;for(;1!=t.nodeType;)t=t.nextSibling;return t}static getNamespaces(e,t=void 0){const n=[];if(!e.attributes)return console.debug("No attributes!",e),n;for(let s=0;s<e.attributes.length;s++){const a=e.attributes[s];if(a.name.startsWith("xmlns:")){const e=a.name.substring(6);if(t&&!t.includes(e+":"))continue;n.push(e)}}return n}static parseFeed(e,t,n){const a=s.u.lookupNode(e,t);if(!a)return;const i=[];for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t];n.name.startsWith("xmlns:")&&i.push(n.name.substring(6))}i.includes("webfeeds")&&(n.icon||(n.icon=w(s.u.lookup(a,"webfeeds:icon"))))}static parseItem(e,t,n){const a=this.getNamespaces(e);if(a.includes("dc")&&(n.description||(n.description=s.u.lookup(t,"dc:description")),n.time||(n.time=i.i.parse(s.u.lookup(t,"dc:date")))),a.includes("content")){const e=s.u.lookupNode(t,"content:encoded");if(e)try{const t=(new DOMParser).parseFromString(`<a>${e.innerHTML}</a>`,"text/xml");n.description=t.documentElement.textContent}catch(e){console.log(`Failed to parse <content:encoded> (${e})!`)}}a.includes("media")&&s.u.foreach(t,"media:content",(e=>{o(n,w(s.u.lookup(e,"@url")),s.u.lookup(e,"@type")||s.u.lookup(e,"@medium"),s.u.lookup(e,"@duration"))}))}}class d{static id="atom";static autoDiscover=["/ns:feed/ns:entry"];static parseEntryLink(e,t){let n=s.u.lookup(e,"@href"),a=s.u.lookup(e,"@type"),i=s.u.lookup(e,"@rel");if(n){if("alternate_or_text/html"!==t.sourceType&&(i&&"alternate"===i||i&&"self"===i&&"text/html"===a))return t.sourceType="alternate_or_text/html",void(t.source=w(n));t.source||(t.source=w(n))}}static parseEntryContent(e,t){let n,a=s.u.lookup(e,"@type")||"text";n="html"===a||"text/html"===a?e.textContent.replace(/&lt;/g,"<").replace(/&gt;/g,">"):"xhtml"===a?e.firstElementChild?.innerHTML||e.innerHTML:e.textContent.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),n&&n.length>t.description?.length&&(t.description=n)}static parseEntry(e,t){if(t.feed.newItems.length>=a.maxItems)return;let n={title:s.u.lookup(e,"ns:title"),description:s.u.lookup(e,"ns:summary"),sourceId:s.u.lookup(e,"ns:id"),time:i.i.parse(s.u.lookup(e,"ns:updated"))};r.parseItem(t.root,e,n),s.u.foreach(e,"ns:content",d.parseEntryContent,n),s.u.foreach(e,"ns:link",d.parseEntryLink,n),t.feed.newItems.push(n)}static parse(e){const t=(new DOMParser).parseFromString(e,"application/xml"),n=r.getRootNode(t);let a={type:this.id,ns:r.getNamespaces(n,e),error:s.u.lookup(n,"/parsererror"),title:s.u.lookup(n,"/ns:feed/ns:title"),icon:s.u.lookup(n,"/ns:feed/ns:icon"),description:s.u.lookup(n,"/ns:feed/ns:summary"),homepage:w(s.u.lookup(n,"/ns:feed/ns:link[@rel='alternate']/@href")||s.u.lookup(n,"/ns:feed/ns:link/@href")),newItems:[]};return r.parseFeed(n,"/ns:feed",a),s.u.foreach(n,"/ns:feed/ns:entry",this.parseEntry,{root:n,feed:a}),a}}class c{static id="rss";static autoDiscover=["/rss/channel","/Channel/items"];static parseItem(e,t){if(t.feed.newItems.length>=a.maxItems)return;let n={title:s.u.lookup(e,"title"),description:s.u.lookup(e,"description"),source:w(s.u.lookup(e,"link")),sourceId:s.u.lookup(e,"guid"),time:i.i.parse(s.u.lookup(e,"pubDate"))};s.u.foreach(e,"enclosure",(e=>o(n,w(s.u.lookup(e,"@url")),s.u.lookup(e,"@type")))),r.parseItem(t.root,e,n),t.feed.newItems.push(n)}static parse(e){const t=(new DOMParser).parseFromString(e,"application/xml"),n=r.getRootNode(t);let a={error:s.u.lookup(n,"/parsererror"),ns:r.getNamespaces(n,e),newItems:[]};return"Channel"===n.nodeName&&(a.type="rss1.1",a.title=s.u.lookup(n,"/Channel/title"),a.description=s.u.lookup(n,"/Channel/description"),a.homepage=w(s.u.lookup(n,"/Channel/link")),r.parseFeed(n,"/Channel",a),s.u.foreach(n,"/Channel/items/item",this.parseItem,{root:n,feed:a})),"rss"===n.nodeName&&(a.type="rss2.0",a.title=s.u.lookup(n,"/rss/channel/title"),a.description=s.u.lookup(n,"/rss/channel/description"),a.homepage=w(s.u.lookup(n,"/rss/channel/link")),r.parseFeed(n,"/rss/channel",a),s.u.foreach(n,"/rss/channel/item",this.parseItem,{root:n,feed:a})),a}}class l{static id="rss1.0";static autoDiscover=["/rdf:RDF/ns:channel"];static parseItem(e,t){if(t.feed.newItems.length>=a.maxItems)return;let n={title:s.u.lookup(e,"ns:title"),description:s.u.lookup(e,"ns:description"),source:w(s.u.lookup(e,"ns:link"))};r.parseItem(t.root,e,n),t.feed.newItems.push(n)}static parse(e){const t=(new DOMParser).parseFromString(e,"application/xml"),n=r.getRootNode(t);let a={error:s.u.lookup(n,"/parsererror"),newItems:[]};return"rdf:RDF"===n.nodeName&&(a.type=this.id,a.ns=r.getNamespaces(n,e),a.title=s.u.lookup(n,"/rdf:RDF/ns:channel/ns:title"),a.description=s.u.lookup(n,"/rdf:RDF/ns:channel/ns:description"),a.homepage=w(s.u.lookup(n,"/rdf:RDF/ns:channel/ns:link")),r.parseFeed(n,"/rdf:RDF/ns:channel",a),s.u.foreach(n,"/rdf:RDF/ns:item",this.parseItem,{root:n,feed:a})),a}}class h{static id="json";static parseItem(e,t){if(t.feed.newItems.length>=a.maxItems)return;let n={title:e.title,description:e.content_html||e.content_text||e.summary,time:i.i.parse(e.updated||e.date_published),sourceId:e.id,source:w(e.url||e.external_url)};e.attachments&&Array.isArray(e.attachments)&&e.attachments.forEach((e=>o(n,w(e.url),e.mime_type))),t.feed.newItems.push(n)}static parse(e){const t=JSON.parse(e);let n={type:this.id,title:t.title,icon:t.icon||t.favicon,description:t.description,homepage:w(t.home_page_url||t.feed_url),newItems:[]};return t.items&&Array.isArray(t.items)&&t.items.forEach(this.parseItem,{feed:n}),n}}const u=100;function p(e){if(!e||"string"!=typeof e)return;if(e.startsWith("{"))try{const t=JSON.parse(e);if(t.version&&t.version.startsWith("https://jsonfeed.org/version/"))return h}catch(e){console.log("autodiscover Failed to parse JSON feed:",e)}let t=[d,c,l];const n=(new DOMParser).parseFromString(e,"application/xml");let a=r.getRootNode(n);for(let e=0;e<t.length;e++)for(let n=0;n<t[e].autoDiscover.length;n++)try{if(s.u.lookup(a,t[e].autoDiscover[n]))return t[e]}catch(e){}}const m=["application/atom+xml","application/rss+xml","application/rdf+xml","application/json","text/xml"];function g(e){return m.includes(e)}function f(e,t){let n;try{n=(new DOMParser).parseFromString(e,"text/html")}catch{console.info("autodiscover could not parse HTML for links!")}if(!n)return[];let s=[];if(n.head.querySelectorAll('link[rel="alternate"]').forEach((e=>{const t=e.getAttribute("type");t&&g(t)&&s.push(e.getAttribute("href"))})),0===s.length){const t=/<link[^>]*>/g,n=/href="([^"]*)"/,a=/rel=["']alternate["']/,i=/type=["']([^"']+)["']/;let o,r=u;for(;r&&null!==(o=t.exec(e));){const e=a.exec(o[0]),t=n.exec(o[0]),d=i.exec(o[0]),c=d?d[1]:null,l=t?t[1]:null;l&&c&&e&&g(c)&&s.push(l),r--}}return s=[...new Set(s.map((e=>w(e,t))).filter(Boolean))],s}function w(e,t){if(e)try{const n=new URL(e,t);if("http:"!==n.protocol&&"https:"!==n.protocol)return;return n.href}catch{return}}},429:(e,t,n)=>{"use strict";n.d(t,{i:()=>s});class s{static parse(e){if(e)return new Date(e)?.getTime()/1e3}static getShortDateStr(e){if(!e)return"";const t=new Date(1e3*e),n=new Date,s=n.getTime()-t.getTime(),a=864e5,i=356*a;return s<a?`Today ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:s<2*a?`Yesterday ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:s<i&&t.getFullYear()===n.getFullYear()?t.toLocaleDateString([],{month:"short",day:"numeric"}):t.toLocaleDateString([],{year:"numeric",month:"short",day:"numeric"})}}},554:(e,t,n)=>{"use strict";n.d(t,{u:()=>s});class s{static evaluate(e,t){Object.getOwnPropertyDescriptor(globalThis,"window")?.get?.toString().includes("[native code]")||(t=t.replaceAll("ns:",""));let n=function(t){let n=t.ownerDocument.createNSResolver(t),s=(new window.DOMParser).parseFromString(e.outerHTML,"text/xml").children[0].getAttribute("xmlns");return function(e){return n.lookupNamespaceURI(e)||s}}(e);return e.ownerDocument.evaluate(t,e,n,window.XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null)}static lookupNode(e,t){return s.evaluate(e,t).iterateNext()}static lookup(e,t){let n;try{n=s.lookupNode(e,t)}catch(e){console.error(`Error looking up XPath expression "${t}"`,e)}return n?n.textContent:void 0}static foreach(e,t,n,a=null){const i=s.evaluate(e,t);let o=i.iterateNext();for(;o;)n(o,a),o=i.iterateNext()}}},234:(e,t,n)=>{"use strict";n.d(t,{q:()=>A});var s=n(388),a=n(662),i=n(551);class o{static commands={help:{syntax:"help",summary:"Show this help again",func:()=>["text",this.help()]},base64:{syntax:"base64 [-d] <string>",summary:"string <-> base64",func:e=>"-d"!==e[1]?["text",btoa(e[2])]:["text",atob(e[1])]},cw:{syntax:"cw",summary:"Print calendar weeks",func:()=>{const e=new Date,t=e=>{const t=new Date(e);return t.setDate(t.getDate()+3),Math.ceil(Math.ceil((t.getTime()-new Date(t.getFullYear(),0,1).getTime())/864e5)/7)};return["text",`Current week is ${t(e)}\n\nFollowing weeks are:\n`+Array.from({length:10},((e,t)=>t+1)).map((n=>{const s=new Date(e);return s.setDate(s.getDate()+(1-s.getDay())),s.setDate(s.getDate()+7*n),`week ${t(s)} --- Monday ${s.toLocaleDateString()}`})).join("\n")]}},cat:{syntax:"cat <filename>",summary:"Read file from OPFS",func:async e=>{const t=e[1],n=await navigator.storage.getDirectory();try{const e=await n.getFileHandle(t),s=await e.getFile();return["text",await s.text()]}catch(e){return["text",`ERROR: File ${t} not found.`]}}},curl:{syntax:"curl <URL> [>filename.ext]",summary:"Fetch URL using CORS proxy and optionally save to OPFS",func:async e=>{const t=e[1],n=await fetch(t);if(!n.ok)return["text",`ERROR: ${n.status} ${n.statusText}`];const s=await n.text();if(e[2]&&e[2].startsWith(">")){const t=e[2].substring(1).trim(),n=await navigator.storage.getDirectory(),a=await n.getFileHandle(t,{create:!0}),i=await a.createWritable();return await i.write(s),await i.close(),["text",`Saved to ${t}`]}return["text",s]}},date:{syntax:"date <epoch>",summary:"epoch -> date",func:(e,t)=>["text",new Date(parseInt(t))]},epoch:{syntax:"epoch <date>",summary:"date -> epoch",func:(e,t)=>{const n=new Date(t).getTime();return["text",`Epoch [ms] : ${n}\nUnix epoch : ${n/1e3}`]}},ip:{syntax:"ip",summary:"Print IP (https://ifconfig.me)",func:async()=>{const e=await fetch("https://ifconfig.me/all.json"),t=await e.json();return console.log(t),["text",t.ip_addr]}},ipcalc:{syntax:"ipcalc <CIDR>",summary:"Calculate address range",func:e=>{const t=this.#e(e[1]);return["text",`Base      : ${t[0]}\nBroadcast : ${t[1]}`]}},ls:{syntax:"ls",summary:"List all files/directories in the OPFS root",func:async()=>{const e=await navigator.storage.getDirectory(),t=[];for await(const[n,s]of e.entries())t.push(`${"directory"===s.kind?"üìÅ":"üìÑ"} ${n}`);return 0===t.length?["text","No entries in OPFS found."]:["text",t.sort().join("\n")]}},mkdir:{syntax:"mkdir <dirname>",summary:"Create directory in OPFS root",func:async e=>{const t=e[1],n=await navigator.storage.getDirectory();try{return await n.getDirectoryHandle(t,{create:!0}),["text",`Created directory ${t}`]}catch(e){return["text",`ERROR: Could not create directory ${t}.`]}}},mkpasswd:{syntax:"mkpasswd [<len>] [<chars>]",summary:"Random password",func:e=>["text",this.#t(e[1]?parseInt(e[1]):void 0,e[2])]},qr:{syntax:"qr <URL>",summary:"Create QR code",func:(e,t)=>["html",`<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURI(t)}"/>`]},rm:{syntax:"rm <filename>",summary:"Remove file from OPFS",func:async e=>{const t=e[1],n=await navigator.storage.getDirectory();try{return await n.removeEntry(t),["text",`Removed ${t}`]}catch(e){return["text",`ERROR: File ${t} not found.`]}}},si:{syntax:"si <value MB>",summary:"Print power 2 values",func:e=>{const t=parseInt(e[1]);return["text",`${1024*t} KiB\n${t/1024} GiB\n${t/1024/1024} TiB`]}},setting:{syntax:"setting <name>",summary:"Get a setting value",func:async e=>["text",JSON.stringify(await i.w.get(e[1],""))]},weather:{syntax:"weather",summary:"Embed weather map",func:()=>(document.getElementById("CommandsViewEmbed")?.remove(),s.ChatView.addToolResult("weather",'<div id="CommandsViewEmbed">Loading weather widget...</div>',"html"),navigator.geolocation.getCurrentPosition((e=>{const t=e.coords;console.log("Your current position is:"),console.log(`Latitude : ${t.latitude}`),console.log(`Longitude: ${t.longitude}`),console.log(`More or less ${t.accuracy} meters.`);const n=e.coords.latitude,s=e.coords.longitude;document.getElementById("CommandsViewEmbed").innerHTML=`<iframe frameborder="0" src="https://imweather.com/widget/map?lat=${n}&lng=${s}&z=6.20&model=nowcast&element=radar_obs&values=true" style="height:400px;width:100%;max-width:640px;"></iframe>`}),(e=>{document.getElementById("CommandsViewEmbed").innerHTML=`Fetching Geo position failed (Error ${e.code}: ${e.message})!`}),{enableHighAccuracy:!1,timeout:2e4,maximumAge:100}),[void 0,void 0])},webamp:{syntax:"webamp",summary:"Embed music player",func:()=>{if(document.getElementById("webampApp"))window.webamp.reopen();else{const e=document.createElement("div");e.id="webampApp",document.body.appendChild(e),a.u.get("lib_webamp").then((()=>{const e=document.getElementById("webampApp");window.webamp=new Webamp,window.webamp.renderWhenReady(e)}))}return["text","Opening webamp."]}}};static register(e){o.commands={...o.commands,...e}}static isValid=e=>Object.hasOwn(o.commands,e.split(/\s+/)[0]);static help=()=>"Syntax:\n\n    <query>             # Search all cheat sheets\n    ?<query>            # Perform a chat bot query\n    !<command>          # Run a command\n\nCommands:\n\n"+Object.entries(o.commands).sort(((e,t)=>e[0].localeCompare(t[0]))).map((e=>"    "+e[1].syntax+" ".repeat(30-e[1].syntax.length)+" # "+e[1].summary)).join("\n");static#t(e,t){if(void 0===e)e=32;else if(!Number.isInteger(e)||e<=0)throw new Error("len must be a positive integer");if(void 0===t)t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789√§√º√∂√Ñ√ú√ñ_-+=/¬∞^`'\"|#@!.";else{if("string"!=typeof t)throw new Error("chars must be a string");if(t.length>256)throw new Error("chars must be <= 256")}const n=256-256%t.length;let s,a="";for(let i=0;i<e;i++){do{s=window.crypto.getRandomValues(new Uint8Array(1))[0]}while(s>=n);a+=t[s%t.length]}return a}static#e(e){var t=e.split("/"),n=t[0].split("."),s=["0","0","0","0"],a=(s=/\d+\.\d+\.\d+\.\d+/.test(t[1])?t[1].split(".").map((function(e){return parseInt(e,10)})):(s=("1".repeat(parseInt(t[1],10))+"0".repeat(32-parseInt(t[1],10))).match(/.{1,8}/g)).map((function(e){return parseInt(e,2)}))).map((function(e){return 255^e})),i=n.map((function(e,t){return e&s[t]})),o=i.map((function(e,t){return e|a[t]}));return[i.join("."),o.join(".")]}static async run(e){try{const t=e.split(/\s/),n=e.substring(t[0].length);return void 0===o.commands[t[0]]?["text","Unknown command"]:await o.commands[t[0]].func(t,n)}catch(e){return["text",`ERROR: Exception (${e})`]}}}var r=n(913),d=n(84);class c{static addEvent(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)}static removeEvent(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n)}static jtdSearchLoaded=function(e,t){var n,s=document.getElementById("search-input"),a=document.getElementById("search-results"),i=0;function o(){document.documentElement.classList.remove("search-active")}function r(){i++;var r=s.value;if(""===r?o():(document.documentElement.classList.add("search-active"),window.scroll(0,-1),setTimeout((function(){window.scroll(0,0)}),0)),r!==n&&(n=r,a.innerHTML="",""!==r)){var d=e.query((function(e){var t=window.lunr.tokenizer(r);e.term(t,{boost:10}),e.term(t,{wildcard:window.lunr.Query.wildcard.TRAILING})}));if(0==d.length&&r.length>2){var c=window.lunr.tokenizer(r).filter((function(e){return e.str.length<20}));c.length>0&&(d=e.query((function(e){e.term(c,{editDistance:Math.round(Math.sqrt(r.length/2-1))})})))}if(0==d.length){var l=document.createElement("div");l.classList.add("search-no-result"),l.innerText="No results found",a.appendChild(l)}else{var h=document.createElement("ul");h.classList.add("search-results-list"),a.appendChild(h),function e(t,n,s,a,o,r){if(r==i){for(var d=s;d<s+a;d++){if(d==n.length)return;u(t,n[d])}setTimeout((function(){e(t,n,s+a,a,o,r)}),o)}}(h,d,0,10,100,i)}}function u(e,n){var s=t[n.ref],a=document.createElement("li");a.classList.add("search-results-list-item"),e.appendChild(a);var i=document.createElement("a");i.classList.add("search-result"),i.setAttribute("href",s.relUrl),a.appendChild(i);var o=document.createElement("div");o.classList.add("search-result-title"),i.appendChild(o);var r=document.createElement("div");r.classList.add("search-result-doc"),r.innerHTML='<svg viewBox="0 0 24 24" class="search-result-icon"><use xlink:href="#svg-doc"></use></svg>',o.appendChild(r);var d=document.createElement("div");d.classList.add("search-result-doc-title"),d.innerHTML=s.doc,r.appendChild(d);var c=d;if(s.doc!=s.title){r.classList.add("search-result-doc-parent");var l=document.createElement("div");l.classList.add("search-result-section"),l.innerHTML=s.title,o.appendChild(l),c=l}var h=n.matchData.metadata,u=[],m=[];for(var g in h){var f=h[g];if(f.title){let e=f.title.position;for(let t in e)u.push(e[t])}if(f.content){let e=f.content.position;for(let t in e){var w=e[t],v=w[0],y=w[0]+w[1],b=!0,x=!0;for(let e=0;e<5;e++){let e=s.content.lastIndexOf(" ",v-2),t=s.content.lastIndexOf(". ",v-2);if(t>=0&&t>e){v=t+1,b=!1;break}if(e<0){v=0,b=!1;break}v=e+1}for(let e=0;e<10;e++){let e=s.content.indexOf(" ",y+1),t=s.content.indexOf(". ",y+1);if(t>=0&&t<e){y=t,x=!1;break}if(e<0){y=s.content.length,x=!1;break}y=e}m.push({highlight:w,previewStart:v,previewEnd:y,ellipsesBefore:b,ellipsesAfter:x})}}}if(u.length>0&&(u.sort((function(e,t){return e[0]-t[0]})),c.innerHTML="",p(c,s.title,0,s.title.length,u)),m.length>0){m.sort((function(e,t){return e.highlight[0]-t.highlight[0]}));var k=m[0],E={highlight:[k.highlight],previewStart:k.previewStart,previewEnd:k.previewEnd,ellipsesBefore:k.ellipsesBefore,ellipsesAfter:k.ellipsesAfter},C=[E];for(let e=1;e<m.length;e++)k=m[e],E.previewEnd<k.previewStart?(E={highlight:[k.highlight],previewStart:k.previewStart,previewEnd:k.previewEnd,ellipsesBefore:k.ellipsesBefore,ellipsesAfter:k.ellipsesAfter},C.push(E)):(E.highlight.push(k.highlight),E.previewEnd=k.previewEnd,E.ellipsesAfter=k.ellipsesAfter);var I=document.createElement("div");I.classList.add("search-result-previews"),i.appendChild(I);var S=s.content;for(let e=0;e<Math.min(C.length,3);e++){let t=C[e];var R=document.createElement("div");R.classList.add("search-result-preview"),I.appendChild(R),t.ellipsesBefore&&R.appendChild(document.createTextNode("... ")),p(R,S,t.previewStart,t.previewEnd,t.highlight),t.ellipsesAfter&&R.appendChild(document.createTextNode(" ..."))}}var D=document.createElement("span");D.classList.add("search-result-rel-url"),D.innerText=s.relUrl,o.appendChild(D)}function p(e,t,n,s,a){var i=n;for(var o in a){let n=a[o],s=document.createElement("span");s.innerHTML=t.substring(i,n[0]),e.appendChild(s),i=n[0]+n[1];var r=document.createElement("span");r.classList.add("search-result-highlight"),r.innerHTML=t.substring(n[0],i),e.appendChild(r)}var d=document.createElement("span");d.innerHTML=t.substring(i,s),e.appendChild(d)}}c.addEvent(s,"focus",(function(){setTimeout(r,0)})),c.addEvent(s,"keyup",(function(e){switch(e.keyCode){case 27:s.value="";break;case 38:case 40:case 13:return void e.preventDefault()}r()})),c.addEvent(s,"keydown",(function(e){let t;switch(e.keyCode){case 38:if(e.preventDefault(),t=document.querySelector(".search-result.active"),t&&(t.classList.remove("active"),t.parentElement.previousSibling)){var n=t.parentElement.previousSibling.querySelector(".search-result");n.classList.add("active"),n.scrollIntoView({behavior:"smooth",block:"nearest"})}return;case 40:if(e.preventDefault(),t=document.querySelector(".search-result.active"),t){if(t.parentElement.nextSibling){var s=t.parentElement.nextSibling.querySelector(".search-result");t.classList.remove("active"),s.classList.add("active"),s.scrollIntoView({behavior:"smooth",block:"nearest"})}}else{let e=document.querySelector(".search-result");e&&e.classList.add("active")}return}})),c.addEvent(document,"click",(function(e){e.target!=s&&o()}))};static selectResult(){let e=document.querySelector(".search-result.active");if(e)e.click();else{var t=document.querySelector(".search-result");t&&t.click()}}static async init(){window.lunr.tokenizer.separator=/[\s\-/]+/,document.addEventListener("search-index-updated",(e=>{console.log("Search.init: reloading search index..."),c.jtdSearchLoaded(e.detail.index,e.detail.docs)}));try{const e=await d.d.getCache();if(e&&e.index&&e.docs){console.log("Load search index from cache...");let t=window.lunr.Index.load(JSON.parse(e.index));return void c.jtdSearchLoaded(t,e.docs)}}catch(e){console.error(`ERROR: Failed to load index from cache (${e})!`)}d.d.update()}}class l{#n;#s;setMode(e){this.#s.textContent=e,this.#s.dataset.mode=e,this.#n.placeholder=""}getMode(){return this.#s.dataset.mode}constructor(e){this.#s=document.querySelector(".search-input-wrap .mode"),this.#n=document.getElementById(e),this.#n.focus(),this.#n.addEventListener("input",(async()=>"!"==this.#n.value[0]?(this.setMode("Cmd"),void(this.#n.value=this.#n.value.slice(1))):"?"==this.#n.value[0]?(this.setMode("Chat"),void(this.#n.value=this.#n.value.slice(1))):void 0)),this.#n.addEventListener("keydown",(async e=>"Enter"===e.key||13===e.keyCode?(window.location.hash="/-/CLI","Cmd"===this.getMode()?l.#a(this.#n.value):"Chat"===this.getMode()?s.ChatView.submitPrompt(this.#n.value):c.selectResult(),this.#n.value="",void e.preventDefault()):"Escape"===e.key||27===e.keyCode?(this.#n.value.length>0?r.ContentView.hideSearch():this.setMode("Search"),void e.preventDefault()):void(this.#n.value.length>1&&"Search"===this.getMode()&&r.ContentView.showSearch()))),document.addEventListener("keydown",(function(e){e.ctrlKey&&75===e.keyCode&&(l.#i(),e.preventDefault())})),this.setMode("Search")}static#i=()=>document.getElementById("search-input").focus();static#a=async e=>{const[t,n]=await o.run(e);s.ChatView.addToolResult(e,n,t)}}class h{static siteName="LZone";static head=`\n    <link rel='alternate' title='LZone Blog' href='https://lzone.de/feed/devops.xml' type='application/atom+xml' />\n    <link rel='alternate' title='Liferea Blog' href='https://lzone.de/liferea/blog/feed.xml' type='application/atom+xml' />\n    <link rel='favicon' href='favicon.ico' type='image/x-icon' />\n    <link rel='blogroll' href='https://lzone.de/blog/blogroll.opml' />\n\n    <title>${h.siteName}</title>\n\n    <meta name="description" content="LZone - Cheat Sheets for Sysadmin / DevOps / System Architecture" />\n    <meta name="author" content="Lars Windolf" />\n    <meta name="viewport" content="width=device-width, initial-scale=1" />\n    <meta name="theme-color" content="#2c84fa" />\n    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://lwindolf.github.io/ web+feed:; frame-src 'self' https://imweather.com/; connect-src * data:; style-src 'unsafe-inline' 'self'; script-src 'unsafe-inline' 'unsafe-eval' 'self' https://lwindolf.github.io/; img-src * data: blob:; media-src *; object-src 'none'" />\n    `;static welcome='\n        <p>\n            LZone is a progressive web app by <a href="https://lzone.de/consulting/en">Lars Windolf</a> that supports\n            installing a ton of Sysadmin / DevOps / System Architecture related content\n            so that you can search and read all of it in one place.\n        </p>';static rssFinderUrl="https://lwindolf.github.io/rss-finder/js/widget.js";static groups={"Lars Windolf":{removable:!0,install:{About:{github:"lwindolf/blogs",filePattern:"^About/(.*)\\.md$"}}},"Cheat Sheets":{removable:!1,install:{"LZone Cheat Sheets":{github:"lwindolf/lzone-cheat-sheets",filePattern:"^Cheat Sheets/(.*)\\.md$"},"Video Tutorials":{github:"lwindolf/lzone-cheat-sheets",filePattern:"^Video Tutorials/(.*)\\.md$"}},catalog:{source:"https://raw.githubusercontent.com/lwindolf/lzone-cheat-sheets/master/extra-cheat-sheets.json",editUrl:"https://github.com/lwindolf/lzone-cheat-sheets/blob/master/extra-cheat-sheets.json"}},Feeds:{removable:!1,defaultFeeds:[{title:"LZone Blog",source:"https://lzone.de/feed/devops.xml",id:1},{title:"Liferea Blog",source:"https://lzone.de/feed/liferea.xml",id:2}]}};static apps={Development:{Regex101:{url:"https://regex101.com/",description:"Test regex, get regex explanations"},"REPL JS":{url:"https://repljs.com/",favicon:"https://repljs.com/android-icon-192x192.png",description:"Javascript console"},"HoppScotch.io":{url:"https://hoppscotch.io/",description:"API request tester"},ezgif:{url:"https://ezgif.com/",description:"GIF, PNG, JPG image editor"},keyjs:{url:"https://keyjs.dev/",description:"Get Javascript key codes",favicon:"https://keyjs.dev/logo/keyjs-t-32.png"}},"DevOps - Playgrounds":{"awk, sed, grep":{url:"https://sandbox.bio/playgrounds/",favicon:"https://sandbox.bio/favicon.ico",description:"Sandbox for awk, grep, sed"},jq:{url:"https://play.jqlang.org/",favicon:"https://play.jqlang.org/favicon.svg",description:"Official jq playground"},Helm:{url:"https://helm-playground.org/",favicon:"https://helm-playground.org/icons/favicon.ico",description:"Play with Helm charts"},"go.dev":{url:"https://go.dev/play/",favicon:"https://go.dev/favicon.ico",description:"Go programming language playground"},"OPA Rego":{url:"https://play.openpolicyagent.org/",favicon:"https://play.openpolicyagent.org/images/favicon.ico",description:"Play with OPA Rego policies"},"Killercoda k8s":{url:"https://killercoda.com/playgrounds/kubernetes",favicon:"https://killercoda.com/favicon.ico",description:"Play with Kubernetes in your browser"},"Openshift Sandbox":{url:"https://console.redhat.com/openshift/sandbox",favicon:"https://access.redhat.com/webassets/avalon/g/favicon.ico",description:"Ad-hoc Openshift instances"},iximiuz:{url:"https://labs.iximiuz.com/playgrounds",favicon:"https://iximiuz.com/favicon.ico",description:"VM, Docker, Podman, containerd, Ubuntu, k8s instances"},WurmTerm:{url:"https://wurmterm.lzone.de/",favicon:"https://wurmterm.lzone.de/favicon.ico",description:"Follows along SSH sessions / k8s contexts and detects problems"}},Networking:{"ipinfo.io":{url:"https://ipinfo.io/what-is-my-ip",favicon:"https://ipinfo.io/favicon.ico",description:"Get your public IP address"},"Qualys SSL Labs":{url:"https://www.ssllabs.com/ssltest/",favicon:"https://www.ssllabs.com/favicon.ico",description:"Test SSL/TLS configuration of a server"},"crt.sh":{url:"https://crt.sh/",favicon:"https://crt.sh/favicon.ico",description:"Certificate Transparency log search"},mxtoolbox:{url:"https://mxtoolbox.com/",description:"Domain info lookup"},Lookingglass:{url:"https://lookinglass.org/",description:"BGP AS looking class index"},traceroute:{url:"https://www.uptrends.com/tools/traceroute",favicon:"https://www.uptrends.com/favicon.svg",description:"uptrends.com traceroute from 30+ locations"},speedtest:{url:"https://www.speedtest.net/",favicon:"https://b.cdnst.net/images/favicons/favicon-180.png",description:"Test your internet connection speed"},Cloudping:{url:"https://www.cloudping.cloud/",favicon:"https://cf.feitsui.com/icon/192x192.png",description:"HTTP Ping CDNs and AWS regions"},"Azure Speed Test":{url:"https://azurespeed.com/",favicon:"https://azurespeed.com/favicon.ico",description:"Test Azure region latency"},"GCP Ping":{url:"https://gcping.com/",favicon:"https://gcping.com/icon.662224a4.png",description:"Test GCP region latency"},PeeringDB:{url:"https://www.peeringdb.com/",favicon:"https://www.peeringdb.com/s/2.68.0//favicon.ico",description:"PeeringDB is a database of networks, exchanges, and data centers"},"Snap Drop":{url:"https://snapdrop.net/",favicon:"https://www.snap-drop.net/images/favicon-96x96.png",description:"Share files with other devices in your network"}},"Diagram Tools":{"ASCII Flow":{url:"https://asciiflow.com",favicon:"https://asciiflow.com/public/favicon.png",description:"Draw ASCII boxes+arrows"},Mermaid:{url:"https://mermaid.live",favicon:"https://mermaid.live/favicon.svg",description:"Draw Flowcharts, Sequence, ER, UML, Gantt, Mindmaps"},"draw.io":{url:"https://draw.io",favicon:"https://app.diagrams.net/favicon.ico",description:"Good old SVG drawing tool by Sun Microsystems"},"Wardley Maps":{url:"https://onlinewardleymaps.com/",favicon:"https://onlinewardleymaps.com/favicon.ico",description:"Value chain strategy maps"},ArchiText:{url:"https://architext.dev/playground.html",favicon:"https://architext.dev/favicon.ico",description:"Draw ArchiMate style diagrams"},nomnoml:{url:"https://nomnoml.com/",favicon:"https://nomnoml.com/favicon.png",description:"Draw UML diagrams"},"Casual Loops":{url:"https://nocomplexity.com/causalloopdiagram",favicon:"https://nocomplexity.com/causalloopdiagram/favicon.ico",description:"Visualize non-linear causal relationships"},Excalidraw:{url:"https://excalidraw.com/",favicon:"https://excalidraw.com/apple-touch-icon.png",description:"Collaborative drawing whiteboard"},SankeyMATIC:{url:"https://sankeymatic.com/build/",favicon:"https://sankeymatic.com/favicon.ico",description:"Create Sankey diagrams"}},Chat:{Cinny:{url:"https://app.cinny.in/",favicon:"https://app.cinny.in/assets/favicon-5KspoOBy.ico",description:"Matrix client"},KiwiIRC:{url:"https://kiwiirc.com/nextclient/",favicon:"https://kiwiirc.com/favicon.ico",description:"IRC client"}}};static chatBotModels=["openai/gpt-oss-120b","google/gemma-2-2b-it","Qwen/Qwen3-Coder-480B-A35B-Instruct","zai-org/GLM-4.5","Qwen/Qwen3-4B-Thinking-2507","Qwen/Qwen2.5-7B-Instruct-1M","Qwen/Qwen2.5-Coder-32B-Instruct","deepseek-ai/DeepSeek-R1"];static toolboxComponents={"SaaS Multi Status":{import:"/multi-status/js/MultiStatusCloud.js",embed:'<x-multistatus-cloud data-path="/multi-status/" data-reduced="1">ERROR when embedding SaaS MultiStatus</x-multistatus-cloud>',settings:'<x-multistatus-settings data-path="/multi-status/">ERROR when embedding SaaS MultiStatus Settings</x-multistatus-settings>',enabled:!0},"DNS Change Detector":{import:"/js/components/dns-checker/js/DnsChecker.js",embed:'<x-dns-checker data-path="/js/components/dns-checker/">ERROR when embedding DNS Change Detector!</x-dns-checker>',settings:'<x-dns-checker-settings data-path="/js/components/dns-checker/">ERROR when embedding DNS Change Detector!</x-dns-checker-settings>',enabled:!1},"Pinned Apps":{import:"/js/components/pinned-apps/js/PinnedApps.js",embed:"<x-pinned-apps>ERROR when embedding Pinned Apps</x-pinned-apps>",settings:"<x-pinned-apps-settings>ERROR when embedding Pinned Apps Settings</x-pinned-apps-settings>",enabled:!0},"Badge Checker":{import:"/js/components/badge-checker/js/BadgeChecker.js",embed:'<x-badge-checker data-path="/js/components/badge-checker/">ERROR when embedding Badge Checker</x-badge-checker>',settings:'<x-badge-checker-settings data-path="/js/components/badge-checker/">ERROR when embedding Badge Checker Settings</x-badge-checker-settings>',enabled:!1}};static debug={all:!0,feedreader:!1,feedlist:!1,feedupdater:!1,itemlist:!1,events:!1,View:!1}}try{window.Config=h}catch(e){}class u{#o;constructor(){a.u.get("Split").then((e=>{this.#o=e(["#sidebar","#main","#toolpanel"],{sizes:[0,70,30],minSize:[300,300,0],maxSize:[300,1/0,1/0],gutterSize:1,expandToMin:!0,direction:"horizontal"}),window.addEventListener("resize",(()=>this.#r())),this.#r()}))}#r(){window.innerWidth>1200?(this.#o.setSizes([5,70,25]),document.getElementById("toolpanel").style.display="block",document.getElementById("sidebar").style.display="block"):window.innerWidth>640?(this.#o.setSizes([5,95,0]),this.#o.collapse(2),document.getElementById("toolpanel").style.display="none",document.getElementById("sidebar").style.display="block"):(this.#o.setSizes([0,100,0]),this.#o.collapse(1),this.#o.collapse(2),document.getElementById("toolpanel").style.display="none",document.getElementById("sidebar").style.display="none")}}var p=n(216),m=n(943),g=n(933),f=n(779);class w{#d;constructor(e,t,n){this.#d=t;const s=document.getElementById("modal"),a=(0,f.vs)(e);s.innerHTML=a(this.#d),s.showModal(),s.querySelectorAll("button").forEach((e=>{e.addEventListener("click",(e=>{this.#d={},[...s.querySelectorAll("input, select, textarea")].forEach((e=>this.#d[e.name]=e.value)),n(this.#d,e.target).then((e=>{e&&s.close(),s.innerHTML=a(this.#d)})),e.preventDefault()}))})),s.addEventListener("keydown",(e=>{"Escape"===e.code&&(s.close(),e.preventDefault())}))}setData(e){this.#d=e}}class v extends w{constructor(){super("\n            <h2>Help</h2>\n\n            <h3>Keyboard</h3>\n\n            <table>\n                <tr>\n                    <td>F1</td>\n                    <td>Help</td>\n                </tr>\n                <tr>\n                    <td>Ctrl - right arrow</td>\n                    <td>Next Unread</td>\n                </tr>\n                <tr>\n                    <td>Ctrl - Shift - M</td>\n                    <td>Mark All Read</td>\n                </tr>\n                <tr>\n                    <td>Ctrl - Shift - U</td>\n                    <td>Update All</td>\n                </tr>\n            </table>\n\n            <h3>Mouse</h3>\n\n            <table>\n                <tr>\n                    <td>Left Click</td>\n                    <td>Select feed or item / Open a link</td>\n                </tr>\n                <tr>\n                    <td>Middle Click</td>\n                    <td>Toggle Unread / Mark All Read</td>\n                </tr>\n                <tr>\n                    <td>Double Click</td>\n                    <td>Open item in browser</td>\n                </tr>\n            </table>\n        ",{},(async()=>!0))}}var y=n(470),b=n(882),x=n(890),k=n(218),E=n(182);class C extends E.S{constructor(e){super({root:e,template:"\n            {{#compare feed.type '==' 'feed'}}\n                <h1 id='itemViewContentTitle'>\n                    <a target='_system' href='{{feed.homepage}}'>{{feed.title}}</a>\n                </h1>\n\n                    <p>\n                        Source: <a target='_system' href='{{feed.source}}'>{{feed.source}}</a><br>\n                    </p>\n\n                    <div class='feedInfoError'>\n                    {{#if feed.error}}\n                        <div class='feedInfoErrorBox'>\n                            <span>There was a problem when fetching this subscription!</span>\n                            <ul>\n                                <li>\n                                    {{#compare feed.error '==' 1}}‚õî{{/compare}}\n                                    {{#compare feed.error '>'  1}}‚úÖ{{/compare}}\n                                    <span>1. Authentication</span>\n                                </li>\n                                <li>\n                                    {{#compare feed.error '==' 2}}‚õî{{/compare}}\n                                    {{#compare feed.error '>'  2}}‚úÖ{{/compare}}\n                                    {{#compare feed.error '<'  2}}‚¨ú{{/compare}}\n                                    <span>2. CORS</span>\n                                </li>                                \n                                <li>\n                                    {{#compare feed.error '==' 4}}‚õî{{/compare}}\n                                    {{#compare feed.error '>'  4}}‚úÖ{{/compare}}\n                                    {{#compare feed.error '<'  4}}‚¨ú{{/compare}}\n                                    <span>3. Download</span>\n                                </li>\n                                <li>\n                                    {{#compare feed.error '==' 8}}‚õî{{/compare}}\n                                    {{#compare feed.error '>'  8}}‚úÖ{{/compare}}\n                                    {{#compare feed.error '<'  8}}‚¨ú{{/compare}}\n                                    <span>4. Feed Discovery</span>\n                                </li>\n                                <li>\n                                    {{#compare feed.error '==' 16}}‚õî{{/compare}}\n                                    {{#compare feed.error '<'  16}}‚¨ú{{/compare}}\n                                    <span>5. Parsing</span>\n                                </li>\n                            </ul>    \n\n                            {{#compare feed.error '==' 2}}\n                                <p>Downloads often do not work due to <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CORS\">CORS restrictions</a>.\n                                To workaround this install lzone.de as a web app with a separate browser profile and an browser extension like CORS everywhere.</p>\n                            {{/compare}}\n                        {{/if}}\n                    </div>\n                </div>\n\n                <p>{{{feed.description}}}</p>\n\n                {{#if feed.feedStatusMsg}}\n                    <div class='feedInfoStatus'>\n                        <span>{{feed.feedStatusMsg}}</span>\n                    </div>\n                {{/if}}\n                Last updated: <span class='feedLastUpdated'>{{lastUpdated}}</span><br>\n                <button class='btn' data-action='feedreader:updateNode' data-id='{{feed.id}}'>Update Now</button>\n                {{/compare}}\n            ",updateEvents:["nodeUpdated","feedUpdating"],dataEvents:["feedSelected"],mapper:async e=>{const t=k.f.getNodeById(e.id);return t?{feed:t,lastUpdated:t.last_updated?new Date(1e3*t.last_updated).toLocaleString():"never"}:{}},postRender:()=>{T.getSelectedItemId()||(e.ownerDocument.getElementById("itemViewContent").style.display="none",e.ownerDocument.getElementById("feedViewContent").style.display="block")}})}}var I=n(429),S=n(217);class R extends E.S{static#c=(0,f.vs)("\n        <span class='date'>{{time}}</span>\n        <span class='title' data-read='{{read}}'>\n            {{#if starred}}<span class='star'>‚≠ê</span>{{/if}}\n            {{title}}\n        </span>\n    ");#l;constructor(e){super({root:e,template:"\n                <div class='newItems hidden'>Click to show new items</div>\n                <div>\n                {{#each items}}\n                        <div class='item context-node' data-id='{{id}}' data-feed='{{nodeId}}'></div>\n                {{/each}}\n                </div>\n            ",dataEvents:["feedSelected"],mapper:async e=>{const t=k.f.getNodeById(e.id);return t&&"feed"===t.type?(this.#l=await t.getItems(),console.log(`ItemList Loading items for node ${t.title}`,this.#l),{node:t,items:this.#l.sort(((e,t)=>t.time-e.time))}):{}},postRender:async()=>{this.#l?.forEach((e=>this.#h(e))),e.ownerDocument.getElementById("itemlistViewContent").scrollTop=0}}),document.addEventListener("itemUpdated",(e=>this.#h(e.detail))),document.addEventListener("itemSelected",(e=>this.#u(e.detail.id,e.detail.feedId))),document.addEventListener("itemsAdded",(e=>{e.detail.feedId==this.getData().id&&document.querySelector("#itemlistViewContent .newItems").classList.remove("hidden")})),y.Ng("click",".item",(e=>T.select(parseInt(e.dataset.feed),parseInt(e.dataset.id)))),y.Ng("auxclick",".item",(e=>S.r.dispatch("feedreader:toggleItemRead",{id:parseInt(e.dataset.id)},(e=>1==e.button)))),y.Ng("dblclick",".item",(e=>this.openItemLink(parseInt(e.dataset.id)))),y.Ng("click",".newItems",(()=>{document.querySelector(".newItems").classList.add("hidden"),T.select(this.displayedFeedId,void 0)})),document.addEventListener("keydown",(e=>{if("itemlist"!==document.activeElement.id)return;if("itemlist"===!e.target.id)return;const t=document.querySelector(".item.selected");"ArrowDown"===e.key&&(t?t.nextElementSibling?.click():document.querySelector(".item")?.click(),e.preventDefault()),"ArrowUp"===e.key&&(t?t.previousElementSibling?.click():document.querySelector(".item")?.click(),e.preventDefault()),"Enter"===e.key&&t&&(this.openItemLink(parseInt(t.dataset.id)),e.preventDefault())}))}openItemLink=async e=>window.open((await x.q.getById(e)).source,"_system","location=yes");async#u(e){const t=await x.q.getById(e);[...document.querySelectorAll(".item.selected")].forEach((e=>e.classList.remove("selected")));let n=document.querySelector(`.item[data-id="${e}"]`);n.classList.add("selected"),n.scrollIntoView({block:"nearest"}),document.getElementById("itemlist").focus(),console.log("ItemList Item selected:",t),this.selected=t,t.read||S.r.dispatch("feedreader:toggleItemRead",{id:e})}#h(e){let t=e.title;if(!t||0===t.trim().length)if(e.description&&e.description.length>0){const n=(new DOMParser).parseFromString(e.description,"text/html");n.body.querySelectorAll("br").forEach((e=>e.replaceWith(" "))),["p","div","li"].forEach((e=>{n.body.querySelectorAll(e).forEach((e=>{e.insertAdjacentText("afterend"," ")}))}));const s=n.body.textContent||"";t=s.substring(0,100)+(s.length>250?"...":"")}else t="No title";(0,f.XX)(`.item[data-id="${e.id}"]`,R.#c,{time:I.i.getShortDateStr(e.time),read:e.read,starred:e.starred,title:t})}}class D extends E.S{constructor(e){super({root:e,template:"\n                <h1 id='itemViewContentTitle'>\n                    {{#if item.title}}\n                        <a target='_system' href='{{item.source}}'>{{item.title}}</a>\n                    {{else}}\n                        <a target='_system' class='missingTitle' href='{{item.source}}'>Link to post</a>\n                    {{/if}}\n                </h1>\n\n                <span class='date'>{{time}}</span>\n                <div class='date'></div>\n\n                {{#each item.media}}\n                    {{#contains 'audio' mime }}\n                        <audio controls preload='none' src='{{ url }}'></audio>\n                    {{/contains}}\n                    {{#contains 'video' mime }}\n                        <video controls preload='none' src='{{ url }}'></video>\n                    {{/contains}}\n                {{/each}}\n\n                <p>{{{item.description}}}</p>\n            ",dataEvents:["itemSelected"],mapper:async e=>{const t=await x.q.getById(e.id);return{item:t,time:I.i.getShortDateStr(t.time)}},postRender:async t=>{const n=await x.q.getById(t.id);n.title&&n.media&&n.media.length>0&&(console.log("itemview media detected setting window.document.title"),window.document.title=window.Config.siteName+" | "+n.title),e.ownerDocument.getElementById("itemViewContent").scrollIntoView({block:"start"}),T.getSelectedItemId()&&(e.ownerDocument.getElementById("itemViewContent").style.display="block",e.ownerDocument.getElementById("feedViewContent").style.display="none")}})}}class L extends w{constructor(e){import(window.Config.rssFinderUrl),super(`\n            {{#unless discover}}\n                <h2>Subscribe to Feed</h2>\n\n                <p>\n                    <div>\n                        <input type='hidden' name='parentId' value='{{parentId}}'/>\n                        <input type='text' name='url' width='100%' placeholder='URL'/>\n                        <button>Subscribe</button>\n                    </div>\n                    {{#if error}}\n                        <div>Error: {{error}}</div>\n                    {{/if}}\n                </p>\n\n                <p>Or discover feeds from various sources...</p>\n\n                <button class="btn">Discover Feeds</button>\n            {{else}}\n                <h2>Discover Feeds</h2>\n\n                <x-rss-finder show-title="false" subscribe-method="event" base-path="${window.Config.rssFinderUrl.replace("js/widget.js","")}" use-cors-proxy="true" target="_self"></x-rss-finder>\n            {{/unless}}\n            `,{parentId:e},(async(e,t)=>"Discover Feeds"===t.innerText?(this.setData({parentId:e.parentId,discover:!0}),!1):(S.r.dispatch("feedreader:addFeed",{parentId:e.parentId,source:e.url,title:"New Subscription"}),!0)))}}class ${fresh=!1;static#p;static#m=new Map;constructor(e,t){$.#m.set(e,t),$.#p||($.#p=document.addEventListener("contextmenu",(e=>{let t=e.target;for(;t&&(!t.id||!$.#m.has(t.id));)t=t.parentElement;t&&t.id&&$.#m.has(t.id)&&(e.preventDefault(),this.createMenu(t,e,$.#m.get(t.id)))}))),document.addEventListener("click",(()=>this.checkRemove())),document.addEventListener("auxclick",(()=>this.checkRemove()))}checkRemove(){this.fresh?this.fresh=!1:document.querySelectorAll(".context-menu").forEach((e=>e.remove()))}createMenu(e,t,n){this.checkRemove(e);const s=t.target.closest(".context-node");s&&(this.fresh=!0,this.menu=document.createElement("div"),this.menu.className="context-menu",n.forEach((e=>{if(e.type&&s.dataset.type!==e.type)return;const t=document.createElement("div");t.className="context-menu-item",t.textContent=e.label,t.addEventListener("click",(()=>S.r.dispatch(e.action,s.dataset))),this.menu.appendChild(t)})),this.menu.style.setProperty("--mouse-x",t.pageX+"px"),this.menu.style.setProperty("--mouse-y",t.pageY+"px"),this.menu.style.display="block",e.appendChild(this.menu))}hide(){this.menu.style.display="none"}}class T{static#g="#/-/Feed/";static#f;static#w;static#v;static feedinfo;static itemview;static itemlist;static async setup(e){this.#f=e,this.#f.innerHTML='\n            <div id="itemlist" tabindex="1">\n                <div id="itemlistViewContent"></div>\n            </div>\n            <div id="itemview" tabindex="2">\n                <div id="itemViewContent" style="display: none"></div>\n                <div id="feedViewContent"></div>\n            </div>',a.u.get("Split").then((e=>{e(["#itemlist","#itemview"],{sizes:[30,70],minSize:[100,100],gutterSize:3,expandToMin:!0,direction:"vertical"})})),this.feedinfo=new C(this.#f.ownerDocument.getElementById("feedViewContent")),this.itemview=new D(this.#f.ownerDocument.getElementById("itemViewContent")),this.itemlist=new R(this.#f.ownerDocument.getElementById("itemlistViewContent")),this.feedinfo.setData({id:this.#w}),this.itemview.setData({id:this.#v}),this.itemlist.setData({id:this.#w})}static async initialize(){await k.f.setup(),i.w.addSchema({"feedreader:::refreshInterval":{default:24,description:"The default refresh interval for the feed reader"},"feedreader:::refreshIntervalUnit":{default:"hours",description:"The default refresh interval unit for the feed reader"},"feedreader:::maxItems":{default:100,description:"The maximum number of items to display in the feed reader"},allowCorsProxy:{default:!1,description:"Allow using a CORS proxy for feed + content requests"}}),new $("sidebar",[{label:"Update",action:"feedreader:updateNode",type:"feed"},{label:"Mark Read",action:"feedreader:markRead",type:"feed"},{label:"Remove",action:"feedreader:removeNode",type:"feed"},{label:"Update All",action:"feedreader:updateNode",type:"folder"},{label:"Add Feed",action:"aggregator:addFeed",type:"folder"},{label:"Add Folder",action:"aggregator:addFolder",type:"folder"},{label:"Mark All Read",action:"feedreader:markRead",type:"folder"},{label:"Remove",action:"feedreader:removeNode",type:"folder"}]),new $("itemlist",[{label:"Open Link",action:"feedreader:openItemLink"},{label:"Toggle Read",action:"feedreader:toggleItemRead"},{label:"Toggle Star",action:"feedreader:toggleItemStar"}]),S.r.register("aggregator:addFolder",(()=>k.f.addNewFolder({parentId:T.getSelectedNodeId()}))),S.r.register("aggregator:addFeed",(e=>new L(e.id?e.id:this.getSelectedNodeId()))),S.r.register("feedreader:addFeed",(e=>k.f.add(new b.J({source:e.source,title:e.title,parent:k.f.getNodeById(parseInt(e.parentId))})))),S.r.register("feedreader:markRead",(e=>k.f.markAllRead(parseInt(e.id)))),S.r.register("feedreader:updateNode",(e=>k.f.updateNode(k.f.getNodeById(e.id),!0))),S.r.register("feedreader:removeNode",(e=>k.f.remove(parseInt(e.id)))),S.r.register("feedreader:allowCorsProxy",(e=>{const t=k.f.getNodeById(e.id);"true"===e.global?i.w.set("allowCorsProxy",!0):k.f.allowCorsProxy(t.id,!0),t.update()})),S.r.register("sidebar:feed:middleClick",(e=>k.f.markAllRead(parseInt(e.id)))),S.r.register("feedreader:nextUnread",(()=>this.nextUnread(this.#w,this.#v))),S.r.register("feedreader:select",(e=>this.select(e.itemId,e.nodeId))),S.r.register("feedreader:toggleItemRead",(async e=>{const t=await x.q.getById(parseInt(e.id)),n=k.f.getNodeById(t.nodeId);t.setRead(!t.read),n.updateUnread(t.read?-1:1)})),S.r.register("feedreader:toggleItemStar",(async e=>{const t=await x.q.getById(parseInt(e.id));t.setStarred(!t.starred)})),S.r.register("feedreader:openItemLink",(e=>this.itemlist.openItemLink(parseInt(e.id)))),S.r.hotkey("C-A-KeyR","feedreader:markRead",this.#g,(()=>({id:this.#w}))),S.r.hotkey("C-A-KeyU","feedreader:updateNode",this.#g,(()=>({id:this.#w}))),S.r.hotkey("C-ArrowRight","feedreader:nextUnread",this.#g),window.addEventListener("hashchange",(()=>this.#y())),this.#y()}static#y(){const e=this.#w,t=this.#v;if(!window.location.hash.startsWith(this.#g))return;console.log("feedreader onLocationChange",window.location.hash);const n=window.location.hash.match(/Feed\/(?<feedId>\d+)(\/Item\/(?<itemId>\d+))?/);n?.groups&&(this.#w=n.groups.feedId?parseInt(n.groups.feedId):null,this.#v=n.groups.itemId?parseInt(n.groups.itemId):null,e==this.#w&&t==this.#v||(console.log("feedreader selection needs to be changed: item",this.#v,"feed",this.#w),this.#v?y.JD("itemSelected",{feedId:this.#w,id:this.#v}):y.JD("feedSelected",{id:this.#w})))}static select(e,t=void 0){window.location.hash=`${this.#g}${e}${t?`/Item/${t}`:""}`}static selectItem(e){window.location.hash=`${this.#g}${this.#w}/Item/${e}`}static getSelectedItemId=()=>this.#v;static getSelectedNodeId=()=>this.#w;static async nextUnread(){let e,t,n;this.#w?(t=k.f.getNodeById(this.#w),n=this.#v):(t=k.f.getNextUnreadNode(0),n=0),console.log("itemlist nextUnread: starting at node id",t.id,"item id",n),t&&(e=await t.getNextUnread(n),e||(t=k.f.getNextUnreadNode(t.id),e=await t.getNextUnread(n)),console.log("itemlist nextUnread: result",e),e&&T.select(t.id,e.id))}}T.initialize();const N=window.fetch.bind(window);if(window.fetch=async function(e,t={}){const n=new AbortController,s=setTimeout((()=>n.abort()),3e4);t.signal=n.signal;try{let n,s=t.allowCorsProxy;try{n=await N(e,t)}catch(a){if(s||(s=await i.w.get("allowCorsProxy",!1)),!s)return null;n=await N(window.Config.corsProxy+encodeURI(e),t)}return n}catch(e){console.error("Fetch error:",e)}finally{clearTimeout(s)}},!window.originalConsoleLog){const e=(e,...t)=>{if("string"!=typeof e)return void window.originalConsoleLog(e,...t);const n=e.split(" ")[0];(window?.app?.debug[n]||window?.app?.debug.all)&&window.originalConsoleLog(e,...t)};window.originalConsoleLog=window.console.log,window.console.log=e,window.console.info=e,window.console.warn=e,window.console.debug=e}class A{static#b(){let e={};try{let t,n=/\+/g,s=/([^&=]+)=?([^&]*)/g,a=function(e){return decodeURIComponent(e.replace(n," "))};for(;t=s.exec(window.location.hash.substring(1));)e[a(t[1])]=a(t[2])}catch(e){console.log("Invalid parameter encoding! "+e)}return e}static#x(){if(window.location.hash.length>2){if("/"!=window.location.hash[1])return;if("/"==window.location.hash.substring(1,2)){const e=A.getPath();return A.#k(e),void r.ContentView.render(e)}console.warn("Unknown location hash format: "+window.location.hash)}else A.#k("")}static getPath=()=>Object.keys(A.#b())[0].substring(1);static#E=e=>document.getElementById("breadcrumb-nav").innerHTML=""===e?"":'<li class="breadcrumb-nav-list-item"><a href="/"><svg viewBox="0 0 24 24"><use xlink:href="#svg-home"></use></svg></a></li>'+e.split(/\//).reverse().map(((t,n,s)=>"-"===t?"":0==n?`<li class="breadcrumb-nav-list-item"><span>${decodeURIComponent(t)}</span></li>`:`<li class="breadcrumb-nav-list-item"><a href="#/${e.split(/\//).slice(0,s.length-n).join("/")}">${decodeURIComponent(t)}</a></li>`)).reverse().join(" ");static#k(e){this.#E(e),p.Sidebar.selectionChanged(e)}static async load(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/worker.js").then((e=>{console.log("ServiceWorker registration successful with scope: ",e.scope)})).catch((e=>{console.error("ServiceWorker registration failed: ",e)})),window.app={ChecksView:new m.ChecksView(document.getElementById("toolpanel")),CLI:new l("search-input"),Commands:o,ContentView:new r.ContentView(document.getElementById("main-content-wrap")),debug:h.debug,FeedReader:T,Layout:new u,Sidebar:new p.Sidebar(document.getElementById("site-nav"))},await g.m.update(),window.addEventListener("hashchange",this.#x),this.#x(),c.init(),(0,y.qm)("body",(e=>112===e.keyCode),(()=>new v))}}A.load()},837:(e,t,n)=>{"use strict";var s=n(551),a=n(779);class i extends HTMLElement{#C=60;#I;#S;#R;#D;#L;constructor(){super(),this.attachShadow({mode:"open"}),this.#R=this.shadowRoot.host.dataset.path,this.#L=document.createElement("div"),this.#D=document.createElement("span"),this.#D.classList.add("date");const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",(this.#R?this.#R:"")+"css/style.css");const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href","css/main.css"),this.shadowRoot.append(this.#L),this.shadowRoot.append(this.#D),this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(t),this.#r(),s.w.get("refreshInterval",this.#C).then((e=>{this.#C=e,setInterval((async()=>{await this.#r()}),60*e*1e3)})),document.addEventListener("BadgeCheckerRefresh",(e=>{this.#r(),e.stopPropagation()}))}#$(e){this.#D.innerHTML=e}async#r(){this.#L.innerHTML="",this.#S=await s.w.get("badgesLastUpdated",0),this.#I=await s.w.get("badges",{}),Object.entries(this.#I).forEach((([e,t])=>{this.#L.innerHTML+=`\n                <div class="badge">\n                        <span class="badge_name">${e}</span>\n                        <img src="${t}" alt="Badge for ${e}">\n                </div>\n                `})),this.#S=Date.now(),this.#$(`Last updated: ${new Date(this.#S).toLocaleString()}`)}}class o extends HTMLElement{#T;constructor(){super(),this.attachShadow({mode:"open"}),this.#T=document.createElement("div");const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href","css/main.css"),this.shadowRoot.appendChild(e),this.shadowRoot.append(this.#T),this.render()}async render(){const e=await s.w.get("badges",{});console.log(e),this.#T.innerHTML=a.F0('\n\t\t    <p>\n\t\t    \tThe badge widget can be used to have an overview over all build pipelines\n                you care about. Simply add the badge name and image URL below.\n\t\t    </p>\n\n\t\t\t<h3>Configured Badges</h3>\n\n            {{#each badges}}\n\t\t\t\t<div data-id="{{@key}}">\n\t\t\t\t\t<button data-id="{{@key}}">Remove</button>\n\t\t\t\t\t<span class="badge">{{@key}}</span>\n                    <img src="{{.}}" alt="Badge for {{@key}}">\n\t\t\t\t</div>\n            {{/each}}\n\n\t\t\t<h3>Add Badge</h3>\n\n\t\t\t<div>\n\t\t\t\t<input type="text" name="id" placeholder="Name of the badge">\n                <input type="text" name="url" placeholder="Image URL of the badge">\n\t\t\t\t<button id="add">Add</button>\n\t\t\t</div>\n\t\t',{badges:e}),this.#T.querySelectorAll("button[data-badge]").forEach((t=>{t.addEventListener("click",(async t=>{const n=t.target.dataset.id;n&&(delete e[n],await s.w.set("badges",e))}))})),this.#T.querySelector("#add").addEventListener("click",(async()=>{const t=this.#T.querySelector('input[name="id"]').value.trim(),n=this.#T.querySelector('input[name="url"]').value.trim();t&&n&&(e[t]=n,await s.w.set("badges",e)),this.render()}))}}customElements.define("x-badge-checker",i),customElements.define("x-badge-checker-settings",o)},290:(e,t,n)=>{"use strict";var s=n(169);class a extends HTMLElement{#C=120;#N="ok";#A="new";#O="gone";#B="changed";#F;#S;#M;#R;#D;#L;static initialize(){window.app.Commands.register({dig:{syntax:"dig [<type>] <domain>",summary:"Simple Cloudflare DoH lookup",func:async e=>{let t=e[2]?e[1]:"A",n=e[2]?e[2]:e[1];const s=await fetch(`https://cloudflare-dns.com/dns-query?name=${n}&type=${t}`,{headers:{Accept:"application/dns-json"}}).then((e=>e.json()));return["text",JSON.stringify(s,null,2)]}},crtsh:{syntax:"crtsh <domain>",summary:"Simple certificate lookup via crt.sh",func:async e=>["text",JSON.stringify(await a.#j(e[1]),null,2)]},dns:{syntax:"dns <domain>",summary:"Simple lookup for standard DNS records via Cloudflare",func:async e=>["text",Object.values(await a.#P(e[1])).join("\n")]}})}constructor(){super(),this.attachShadow({mode:"open"}),this.#R=this.shadowRoot.host.dataset.path,this.#L=document.createElement("div"),this.#D=document.createElement("span"),this.#D.classList.add("date");const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",(this.#R?this.#R:"")+"css/style.css");const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href","css/main.css"),this.shadowRoot.append(this.#L),this.shadowRoot.append(this.#D),this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(t),this.#M=!1,this.#r(),(0,s.C)("refreshInterval",this.#C).then((e=>{this.#C=e,setInterval((async()=>{await this.#r()}),60*e*1e3)})),document.addEventListener("DnsCheckerRefresh",(e=>{this.#r(),e.stopPropagation()})),this.#L.addEventListener("click",(e=>{const t=e.target.closest(".domain");t&&this.#U(t)}))}#U(e){const t=this.#L.querySelector(".domain.details_on");t&&t.classList.remove("details_on"),e!==t&&e.classList.toggle("details_on")}#$(e){this.#D.innerHTML=e}#_(e){if(!e)return"Not enumerated yet.";const t=Object.keys(e).map((t=>e[t].records?Object.values(e[t].records).filter((e=>e.value)).map((e=>e.value)).join("<br/>"):"Not resolved yet!")).join("<br/>");return this.dispatchEvent(new CustomEvent("check-result-event",{bubbles:!0,composed:!0,detail:{warnings:0,name:"DNS"}})),t}#H(e){const t=e.dataset.domain;(0,s.C)(`domain:::${t}`,{updated:0,subdomains:{}}).then((n=>{e.innerHTML=`\n\t\t\t\t<div class='probe probe_normal'>${t}</div>\n\t\t\t\t<div class='domain_details'>\n\t\t\t\t\t<pre>${this.#_(n.subdomains)}</pre>\n\t\t\t\t</div>\n\t\t\t`,this.#$(`Last updated: ${new Date(this.#S).toLocaleString()}`)}))}static#q(e,t){return t.sort().map((t=>`${t.name} ${e} ${t.data}`)).join("\n")}static async#P(e){const t={};for(const n of["A","AAAA","NS","SOA","TXT","CNAME","PTR","SRV","MX","CAA"])await fetch(`https://cloudflare-dns.com/dns-query?name=${e}&type=${n}`,{headers:{Accept:"application/dns-json"}}).then((e=>e.json())).then((e=>{e.Answer&&(t[n]=a.#q(n,e.Answer||[]))}));return t}async#z(e,t){const n=await(0,s.C)(`domain:::${t}`,{updated:0,subdomains:{}});Object.keys(n.subdomains).forEach((async i=>{this.#$(`<i>Resolving '${i}'...</i>`);const o=n.subdomains[i];o.records||(o.records={});for(const e of["A","AAAA","NS","SOA","TXT","CNAME","PTR","SRV","MX","CAA"]){const t=await fetch(`https://cloudflare-dns.com/dns-query?name=${i}&type=${e}`,{headers:{Accept:"application/dns-json"}}).then((e=>e.json()));o.records[e]||(o.records[e]={});const n=o.records[e];n.value&&(n.oldValue=n.value,n.value=void 0),"Answer"in t&&(n.value=a.#q(e,t.Answer))}n.updated=(new Date).getTime(),this.#S=(new Date).getTime(),await(0,s.o)(`domain:::${t}`,n),await(0,s.o)("domainsLastUpdated",this.#S),this.#H(e)}))}static async#j(e){const t=await fetch(`https://crt.sh/json?q=${e}`);return await t.json()}async#V(e,t){const n=await(0,s.C)(`domain:::${t}`,{updated:0,subdomains:{}});if(!(n.updated<(new Date).getTime()-60*this.#C*1e3))return;console.log(`Checking domain ${t}`),this.#$(`<i>Enumerating '${t}'...</i>`);const i=await a.#j(t);let o={};Object.keys(n.subdomains).forEach((e=>n.subdomains[e].status=this.#O));for(const e of i)for(const t of e.name_value.split(/\n/)){let e=t.replace(/^\*\./,"");const s=n.subdomains[e];s?s.status=this.#N:o[e]={status:this.#A,alert:!0}}Object.entries(n.subdomains).filter(((e,t)=>t.status==this.#O)).forEach(((e,t)=>t.alert=!0)),n.subdomains={...n.subdomains,...o},await(0,s.o)(`domain:::${t}`,n),this.#H(e),this.#z(e,t)}async#r(){this.#M?console.log("DNS update already in progess."):(this.#M=!0,this.#$("<i>Checking...</i>"),this.#L.innerHTML="",this.#S=await(0,s.C)("domainsLastUpdated",0),this.#F=await(0,s.C)("domainList",["lzone.de"]),this.#F.forEach((e=>{var t=document.createElement("span");t.className="domain",t.setAttribute("data-domain",e),t.onclick=this.toggleDetails,this.#L.append(t),this.#H(t),this.#V(t,e)})),this.#M=!1)}}class i extends HTMLElement{#T;constructor(){super(),this.attachShadow({mode:"open"}),this.#T=document.createElement("div");const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href","css/main.css"),this.shadowRoot.appendChild(e),this.shadowRoot.append(this.#T),this.render()}async render(){const e=await(0,s.C)("domainList",["lzone.de"]);this.#T.innerHTML=`\n\t\t    <p>\n\t\t    \tFIXME: you currently have to refresh the page to see the changes take effect\n\t\t    \tin the DNS Checker widget.\n\t\t    </p>\n\n\t\t\t<p>\n\t\t\t\t<b>Important: Checks will be performed with the help of external services</b>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><a href="https://crt.sh">crt.sh</a> for subdomain enumeration</li>\n\t\t\t\t\t<li><a href="https://cloudflare-dns.com">cloudflare-dns.com</a> for DNS queries</li>\n\t\t\t\t</ul>\n\t\t\t\twhich may both log your domain queries. Do use with care!\n\t\t\t</p>\n\n\t\t\t<h3>Currently Checked Domains</h3>\n\n\t\t\t${e.map((e=>`\n\t\t\t\t<div data-domain="${e}">\n\t\t\t\t\t<button data-domain="${e}">Remove</button>\n\t\t\t\t\t<span class="domain">${e}</span>\n\t\t\t\t</div>\n\t\t\t`)).join("")}\n\n\t\t\t<h3>Add Domain</h3>\n\n\t\t\t<div>\n\t\t\t\t<input type="text" id="domain" placeholder="Domain to check">\n\t\t\t\t<button id="addDomain">Add</button>\n\t\t\t</div>\n\t\t`,this.#T.querySelectorAll("button[data-domain]").forEach((t=>{t.addEventListener("click",(async t=>{const n=t.target.dataset.domain;n&&(await(0,s.o)("domainList",e.filter((e=>e!==n))),this.#T.querySelector(`div[data-domain="${n}"]`).remove())}))})),this.#T.querySelector("#addDomain").addEventListener("click",(async()=>{const t=this.#T.querySelector("#domain").value.trim();t&&await(0,s.o)("domainList",[...e,t]),this.render()}))}}customElements.define("x-dns-checker",a),customElements.define("x-dns-checker-settings",i),a.initialize()},169:(e,t,n)=>{"use strict";n.d(t,{C:()=>o,o:()=>r});const s="dns-checker";var a;function i(){return new Promise(((e,t)=>{a&&e();let n=indexedDB.open(s,1);n.onsuccess=function(){a=this.result,e()},n.onerror=function(e){t(`Error opening IndexedDB: ${e.target.errorCode}`)},n.onupgradeneeded=function(e){a=e.currentTarget.result,console.log("IndexedDB onupgradeneeded"),a.createObjectStore("settings",{keyPath:"id",autoIncrement:!0})}}))}function o(e,t=null){return i().then((()=>new Promise(((n,s)=>{let i=a.transaction("settings","readonly").objectStore("settings").get(e);i.onsuccess=function(e){let s=e.target.result;n(s?s.value:t)},i.onerror=function(e){s(`Error getting setting ${e.target.errorCode}`)}}))))}function r(e,t){return i().then((()=>new Promise(((n,s)=>{let i=a.transaction("settings","readwrite").objectStore("settings");try{i.put({id:e,value:t}),n()}catch(t){s(`Error saving setting ${e}: ${t}`)}}))))}},638:(e,t,n)=>{"use strict";var s=n(779),a=n(551);class i extends HTMLElement{#L;constructor(){super(),this.attachShadow({mode:"open"}),this.#L=document.createElement("div");const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href","css/main.css"),this.shadowRoot.appendChild(e),this.shadowRoot.append(this.#L),this.#r(),document.addEventListener("settings-changed",(e=>{"pinnedApps"===e.detail.name&&this.#r()}))}async#r(){s.dN(this.#L,s.vs('\n            <div class="apps-pinned">\n            {{#each pinnedApps}}\n                <div class="app">\n                    <a class="favicon" href="{{url}}" target="_blank" rel="noopener noreferrer" title="{{@key}} ({{description}})">\n                    {{#if favicon}}\n                            <img class="favicon" src="{{favicon}}" alt="{{@key}}" onerror="this.classList.add(\'error\')">\n                    {{else}}\n                            <img class="favicon" src="{{url}}/favicon.ico" alt="{{@key}}" onerror="this.classList.add(\'error\')">\n                    {{/if}}\n                    </a>\n                </div>\n            {{/each}}\n            <a href="#/-/Settings/Tools/Pinned Apps" class="add">+</a>\n            </div>\n        '),{pinnedApps:await a.w.get("pinnedApps",{})})}}class o extends HTMLElement{#G;constructor(){super(),this.attachShadow({mode:"open"}),this.#G=document.createElement("div");const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href","css/main.css"),this.shadowRoot.appendChild(e),this.shadowRoot.append(this.#G),this.render()}async render(){s.dN(this.#G,s.vs('\n            {{#* inline "app" }}\n                <div class="app">\n                    <a class="favicon" href="{{url}}" target="_blank">\n                    {{#if favicon}}\n                            <img class="favicon" alt="{{@key}}" src="{{favicon}}" onerror="this.classList.add(\'error\')">\n                    {{else}}\n                            <img class="favicon" alt="{{@key}}" src="{{url}}/favicon.ico" onerror="this.classList.add(\'error\')">\n                    {{/if}}\n                    </a>\n                    <div class="title">\n                        <a class="title" href="{{url}}">{{@key}}</a>\n                        <button data-name="{{@key}}">\n                            {{#if pinned }}\n                                Unpin\n                            {{else}}\n                                Pin\n                            {{/if}}\n                        </button>\n                    </div>\n                    <div class="description">{{description}}</div>\n                </div>\n            {{/inline}}\n\n            <p>\n                This is a catalog of useful web apps that you can pin for quick access. Depending\n                on the layout the apps will be shown in the sidebar or on the home page.\n            </p>\n\n            <div class="app-catalog">\n                <h2>Pinned</h2>\n                {{#each pinnedApps}}\n                    {{> app pinned=true }}\n                {{/each}}\n\n                {{#each apps}}\n                    <h2>{{@key}}</h2>\n                    <div class="group" data-group="{{@key}}">\n                    {{#each .}}\n                        {{#unless (lookup ../../pinnedApps @key) }}\n                            {{> app }}\n                        {{/unless}}\n                    {{/each}}\n                    </div>\n                {{/each}}\n            </div>\n        '),{apps:window.Config.apps,pinnedApps:await a.w.get("pinnedApps",{})}),this.#G.querySelectorAll(".app-catalog .app button").forEach((e=>{e.addEventListener("click",(async e=>{const t=e.target,n=t.getAttribute("data-name");if(n){let e=await a.w.get("pinnedApps",{});if(n in e)delete e[n];else{const s=t.closest(".group").getAttribute("data-group");e[n]=window.Config.apps[s][n]}await a.w.set("pinnedApps",e),this.render()}}))}))}}customElements.define("x-pinned-apps",i),customElements.define("x-pinned-apps-settings",o)},882:(e,t,n)=>{"use strict";n.d(t,{J:()=>h});var s=n(648),a=n(808),i=n(554);class o{static searches=[{type:"MS Tile",order:2,xpath:"/html/head/meta[@name='msapplication-TileImage']/@href"},{type:"Safari Mask",order:3,xpath:"/html/head/link[@rel='mask-icon']/@href"},{type:"large icon",order:0,xpath:"/html/head/link[@rel='icon' or @rel='shortcut icon'][@sizes='192x192' or @sizes='144x144' or @sizes='128x128']/@href"},{type:"small icon",order:5,xpath:"/html/head/link[@rel='icon' or @rel='shortcut icon'][@sizes]/@href"},{type:"favicon",order:8,xpath:"/html/head/link[@rel='icon' or @rel='shortcut icon' or @rel='SHORTCUT ICON'][not(@sizes)]/@href"},{type:"Apple touch",order:1,xpath:"/html/head/link[@rel='apple-touch-icon' or @rel='apple-touch-icon-precomposed'][@sizes='180x180' or @sizes='152x152' or @sizes='144x144' or @sizes='120x120']/@href"},{type:"Apple no size",order:6,xpath:"/html/head/link[@rel='apple-touch-icon' or @rel='apple-touch-icon-precomposed'][not(@sizes)]/@href"},{type:"Apple small",order:7,xpath:"/html/head/link[@rel='apple-touch-icon' or @rel='apple-touch-icon-precomposed'][@sizes]/@href"}].sort(((e,t)=>e.order-t.order));static fuzzyExtraction=[{type:"MS Tile",order:2,matchRegex:/<meta\s+name=.msapplication-TileImage.\s+[^>]+>/},{type:"Safari Mask",order:3,matchRegex:/<link\s+rel=.mask-icon.\s+[^>]+>/},{type:"large icon",order:0,matchRegex:/<link\s+rel=.icon.\s+[^>]+sizes=['"](192x192|144x144|128x128)['"]\s+[^>]+>/},{type:"small icon",order:5,matchRegex:/<link\s+rel=.icon.\s+[^>]+sizes=[^>]+>/},{type:"favicon",order:8,matchRegex:/<link\s+rel=.icon.\s+[^>]+>/},{type:"Apple touch",order:1,matchRegex:/<link\s+rel=.apple-touch-icon.\s+[^>]+sizes=['"](180x180|152x152|144x144|120x120)['"]>/},{type:"Apple no size",order:6,matchRegex:/<link\s+rel=.apple-touch-icon.\s+[^>]+>/},{type:"Apple small",order:7,matchRegex:/<link\s+rel=.apple-touch-icon.\s+[^>]+sizes=[^>]+>/}].sort(((e,t)=>e.order-t.order));static hrefExtractRegex=new RegExp("href=['\"]([^'\"]+)['\"]");static async discover(e,t){let n;console.log(`favicon discovery for ${e}`);try{let s=await fetch(e,t).then((e=>e.text())).then((e=>(new DOMParser).parseFromString(e,"text/html")));if(s){console.log("favicon discovery HTML parse success");let e=s.firstChild;for(;e&&"HTML"!==e.nodeName.toUpperCase();)e=e.nextSibling;if(e){console.log("favicon discovery root element found");for(let t=0;t<o.searches.length&&(n=i.u.lookup(e,o.searches[t].xpath),!n);t++);}}}catch(e){console.log("favicon discovery via XPath failed",e)}if(n||(n=await fetch(e+"/favicon.ico",t).then((e=>e.text())).then((()=>e+"/favicon.ico"))),n)return(0,a.JK)(n,e)}}class r{static async fetch(e,t=!1){let n=!1;console.log(`feedupdater updating ${e}`);try{null==await fetch(e,{method:"HEAD",mode:"cors"})&&(n=!0)}catch(e){n=!0}if(n){if(!t)return console.log(`feedupdater CORS blocked for ${e}, not fetching`),new h({error:h.ERROR_NET_CORS});console.log(`feedupdater will retry with CORS proxy for ${e}`)}let s=await fetch(e,{allowCorsProxy:t}).then((async e=>(console.log("feedupdater headers",e.headers),await e.text()))).then((async n=>{let s=(0,a.Sn)(n,e);if(!s)return console.log(`feedupdater No suitable parser found for ${e}`),new h({error:h.ERROR_DISCOVER});console.log("feedupdater using parser",s);let i=s.parse(n);if(!i)return console.log(`feedupdater Failed to parse feed from ${e}`),new h({error:h.ERROR_XML});if(i.source=e,i.last_updated=Date.now()/1e3,i.error=h.ERROR_NONE,!i.icon&&i.homepage)try{console.log("feedupdater no icon in feed, starting favicon autodiscovery"),i.icon=await o.discover(i.homepage,{allowCorsProxy:t})}catch(e){}return i})).catch((t=>(console.log(`feedupdater Failed to download feed from ${e}`,t),new h({error:h.ERROR_NET}))));return console.log("feedupdater result",s),s}}var d=n(890),c=n(470),l=n(551);class h{id;error;orig_source;last_updated=0;last_updated_favicon=0;allowCorsProxy=!1;newItems=[];unreadCount=0;title;source;description;icon;iconData;metadata={};type="feed";feedStatusMsg;static ERROR_NONE=0;static ERROR_AUTH=1;static ERROR_NET_CORS=2;static ERROR_NET=4;static ERROR_DISCOVER=8;static ERROR_XML=16;constructor(e={}){Object.keys(e).forEach((t=>{this[t]=e[t]})),this.source&&!this.source.includes("://")&&(this.source="https://"+this.source),this.orig_source||(this.orig_source=this.source)}serialize(){return{id:this.id,title:this.title,description:this.description,homepage:this.homepage,icon:this.icon,source:this.source,orig_source:this.orig_source,last_updated:this.last_updated,last_updated_favicon:this.last_updated_favicon,allowCorsProxy:this.allowCorsProxy,unreadCount:this.unreadCount,metadata:this.metadata,type:this.type}}#J(e){console.log(`Feed status update(${this.source}): ${e}`),this.feedStatusMsg=e,c.JD("feedUpdating",{id:this.id})}async update(e=!1){let t=await l.w.get("feedreader:::refreshInterval");const n=await l.w.get("feedreader:::refreshIntervalUnit");if(console.log(`Feed update(${this.source}, force=${e}) with interval ${t} ${n}`),"hours"===n)t*=3600;else{if("days"!==n)return void console.error(`Unknown update interval unit: ${n}`);t*=86400}if(e&&(this.#J(`Forcing update of ${this.source}`),this.last_updated=0,this.last_updated_favicon=0),this.last_updated&&Date.now()/1e3-this.last_updated<t)return void console.log(`Feed Skipping update of ${this.source} (last updated ${Math.ceil(Date.now()/1e3-this.last_updated)}s ago)`);let s=await r.fetch(this.source,this.allowCorsProxy);if(h.ERROR_DISCOVER==s.error){console.log(`Feed trying autodiscovery for original source ${this.orig_source}`);const e=await fetch(this.orig_source).then((e=>e.text())),t=(0,a.ZI)(e,this.orig_source);if(!(t.length>0))return void this.#J("Feed update failed: Source is not a feed");console.log(`Feed changing source to ${t[0]}`),this.source=t[0],s=await r.fetch(this.source,this.allowCorsProxy)}if(h.ERROR_NONE==s.error){let e=0;this.title=s.title,this.source=s.source,this.homepage=s.homepage,this.description=s.description,this.metadata=s.metadata,this.icon=s.icon,this.iconData=s.iconData;let n=await this.getItems();for(const t of s.newItems){if(n.some((e=>e.sourceId===t.sourceId||e.source===t.source||e.title===t.title)))return;e++;const s=new d.q(t);s.read=!1,s.nodeId=this.id,await s.save()}if(n=await this.getItems(),this.updateUnread(n.filter((e=>!e.read)).length-this.unreadCount),e>0&&c.JD("itemsAdded",this),Date.now()/1e3-this.last_updated_favicon>30*t){this.#J(`Updating favicon for ${this.source} (${this.icon})`);const e=await fetch(this.icon);if(e.ok){const t=await e.blob(),n=await new Promise(((e,n)=>{try{const n=new FileReader;n.onload=function(){e(this.result)},n.readAsDataURL(t)}catch(e){n(e)}}));n&&n.startsWith("data:image")?(this.setIcon(n),console.log(`Favicon update for ${this.source} (${this.icon}) was successful`)):console.warn(`Favicon update for feed ${this.id} failed`),this.last_updated_favicon=Date.now()/1e3}else console.warn(`Favicon response for feed ${this.id} failed`)}else console.info(`Favicon ${this.id} does need no update`);this.#J(void 0)}else this.#J(`Feed update failed: ${s.error}`);this.last_updated=s.last_updated,this.error=s.error,c.JD("nodeUpdated",this)}getItems=async()=>(await s.DB.getByIndexOnly("aggregator","items","nodeId",this.id)).map((e=>new d.q({id:e.id,...e.value})));async getNextUnread(e){let t,n=0;if(!e)return;const s=await this.getItems();return s.find((t=>(n++,t.id===e))),t=s.slice(n).find((e=>!e.read)),console.log("feed getNextUnread find forward result:",t),t||(t=s.find((e=>!e.read)),console.log("feed getNextUnread find from start result:",t),t)}addItem(e){e.time||(e.time=Date.now()),this.newItems.push(e)}updateUnread(e){this.unreadCount+=e,this.unreadCount<0&&(this.unreadCount=0),this.parent.updateUnread&&this.parent.updateUnread(e),c.JD("nodeUpdated",this)}async markAllRead(){(await this.getItems()).forEach((e=>e.setRead(!0))),this.updateUnread(-this.unreadCount)}setIcon(e){this.iconData=e,s.DB.set("aggregator","favicons",`feed_${this.id}`,e)}async loadIcon(){this.iconData||(this.iconData=await s.DB.get("aggregator","favicons",`feed_${this.id}`,void 0),console.log(this))}}},218:(e,t,n)=>{"use strict";n.d(t,{f:()=>d});var s=n(882),a=n(470);class i{id;title;type="folder";unreadCount=0;constructor(e={}){Object.keys(e).forEach((t=>{this[t]=e[t]}))}serialize(){return{id:this.id,title:this.title,type:this.type}}updateUnread(e){this.unreadCount+=e,this.unreadCount<0&&(this.unreadCount=0),console.log("folder updateUnread",this),this.parent.updateUnreadCount&&this.parent.updateUnreadCount(e),a.JD("nodeUpdated",this)}}var o=n(648),r=n(551);class d{static root={children:[],unreadCount:0};static#W={};static maxId=1;static getNodeById=e=>e?d.#W[parseInt(e)]:void 0;static getNextUnreadNode(e){let t,n=0;return e&&(this.root.children.find((t=>(n++,t.id===e))),t=this.root.children.slice(n).find((e=>e.unreadCount>0)),t)?t:this.root.children.find((e=>e.unreadCount>0))}static#K(){console.log("feedlist save"),o.DB.set("aggregator","tree","tree",d.root.children.map((function e(t){const n=t.serialize();return t.children&&(n.children=t.children.map(e)),n})))}static allowCorsProxy(e,t){d.#W[e].allowCorsProxy=t,d.#K()}static addNewFolder(e){const t=prompt("New folder title:");if(t){let n=d.getNodeById(e);n&&n.children||(n=d.root);const s=new i({id:++d.maxId,title:t,children:[]});n.children.push(s),d.#W[s.id]=s,d.#K(),a.JD("nodeUpdated",s),console.log(`feedlist Added new folder: ${t}`,n,d.root)}}static async add(e,t=!0){console.log("feedlist add",e),e.id||(e.id=d.maxId+1),e.id>d.maxId&&(d.maxId=e.id),d.#W[e.id]=e,e.parent||(e.parent=d.root),e.parent.children.push(e),t&&await e.update(),d.#K()}static remove(e){console.log("feedlist remove("+e+")");let t=d.getNodeById(e);t&&(t.parent.children=t.parent.children.filter((t=>t.id!==e)),delete d.#W[e],d.#K(),a.JD("nodeRemoved",e))}static markAllRead(e){let t=d.getNodeById(e);t.children&&t.children.forEach((e=>this.markAllRead(e.id))),t.markAllRead()}static async#X(e,t){for(const n of e)try{const e=parseInt(n.id);if(!e)return;if(d.maxId<e&&(d.maxId=e),"folder"===n.type){const s=new i(n);s.parent=t,s.children=[],d.#W[e]=s,t.children.push(s),console.log("feedlist loadNodes() Add folder",n),await this.#X(n.children,s)}if("feed"===n.type||!n.type){const a=new s.J(n);a.parent=t,d.#W[e]=a,t.children.push(a);const i=await a.getItems();a.unreadCount=0,await a.loadIcon(),a.updateUnread(i.filter((e=>!e.read)).length),console.log("feedlist loadNodes() Add feed",n)}}catch(e){console.error("feedlist loadNodes() Error",e)}}static async setup(){console.log("feedlist setup");const e=await o.DB.get("aggregator","tree","tree",window.Config.groups.Feeds.defaultFeeds);await this.#X(e,d.root),document.dispatchEvent(new CustomEvent("sections-updated")),document.addEventListener("nodeUpdated",(()=>d.#K())),d.root.children.length>0&&d.#K(),r.w.get("feedreader:::updateAllOnStartup")&&d.update(),d.#W.length>0&&o.DB.removeOrphans("aggregator","items","nodeId",Object.keys(d.#W).map((e=>parseInt(e)))),console.log("feedlist setup done")}static updateNode(e,t=!1){console.log("feedlist updateNode",e,t),e.children?e.children.forEach((e=>{this.updateNode(e,t)})):e instanceof s.J&&e.update(t)}static update(){this.updateNode(this.root)}}},890:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});var s=n(648),a=n(470);class i{id=void 0;nodeId=0;read=!1;starred=!1;title;description;time;source;sourceId;media=[];metadata={};constructor(e){Object.keys(e).forEach((t=>{this[t]=e[t]}))}addMedia(e,t,n=NaN){let s=NaN;try{s=parseInt(n,10)}catch{}e&&t&&-1===e.indexOf("www.gravatar.com")&&(this.description&&-1!==this.description.indexOf(e)||this.media.push({url:e,mime:t,length:s}))}async setRead(e){this.read!==e&&(this.read=e,await this.save(),a.JD("itemUpdated",this))}async setStarred(e){this.starred!==e&&(this.starred=e,await this.save(),a.JD("itemUpdated",this))}static async getById(e){const t=await s.DB.getById("aggregator","items",e);if(!t)throw new Error(`item with id ${e} not found`);return new i(t)}async save(){this.nodeId||console.error("item save(): nodeId is not set!",this);try{const e=await s.DB.set("aggregator","items",this.id,{nodeId:this.nodeId,read:this.read,starred:this.starred,title:this.title,description:this.description,time:this.time,source:this.source,sourceId:this.sourceId,media:this.media,metadata:this.metadata});this.id||(this.id=e)}catch(e){console.error("item save(): error saving item",e)}}}},217:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});class s{static handlers={};static listener;static register(e,t){this.handlers[e]=t,this.listener||(this.listener=!0,document.addEventListener("click",(e=>{const t=e.target;t&&t.dataset.action&&(s.dispatch(t.dataset.action,t.dataset),e.preventDefault())})))}static hotkey(e,t,n="/",a=void 0){const i=e.split("-"),o=i.pop(),r=i.includes("A"),d=i.includes("C"),c=i.includes("S");document.addEventListener("keydown",(e=>{if(window.location.hash.startsWith(n)&&e.ctrlKey===d&&e.altKey===r&&e.shiftKey===c&&e.code===o){e.preventDefault();let n={};a&&(n=a()),s.dispatch(t,n)}}))}static dispatch(e,...t){if(this.handlers[e])return console.log("Action dispatched",{name:e,args:t}),this.handlers[e](...t);console.warn(`Action No handler for action "${e}"`)}}},182:(e,t,n)=>{"use strict";n.d(t,{S:()=>s});class s{#Q;#d;#Z;#Y;#ee;constructor(e){this.#Q=window.Handlebars.compile(e.template),this.#d=e.data||{},this.#Z=e.mapper,this.#ee=e.postRender,this.#Y=document.createElement("div"),this.#Y.className="event-container",e.root.appendChild(this.#Y),this.setData(this.#d),e.updateEvents?.forEach((e=>{console.log(`View binding to update event ${e}`),this.#Y.ownerDocument.addEventListener(e,(t=>{for(const e in this.#d)if(t.detail[e]+""!=this.#d[e]+"")return;console.log(`View update event ${e} received`,t.detail),this.#te()}))})),e.dataEvents?.forEach((e=>{console.log(`View binding to data event ${e}`),this.#Y.ownerDocument.addEventListener(e,(e=>{this.setData(e.detail)}))}))}async#te(){const e=this.#Z?await this.#Z(this.#d):this.#d,t=this.#Q(e,this.#d);this.#Y.innerHTML!==t&&(this.#Y.innerHTML=t),this.#ee&&this.#ee(this.#d)}setData(e){this.#d={...this.#d,...e},console.log("View new data received",this.#d);for(const e in this.#d)this.#Y.dataset[e]=this.#d[e];this.#te()}getData=()=>this.#d}},470:(e,t,n)=>{"use strict";function s(e,t,n,s=void 0){document.addEventListener(e,(function(e){if(s&&!s(e))return;let a=e.target.closest(t);a&&(n(a),e.preventDefault())}))}function a(e,t,n){document.querySelector(e).addEventListener("keydown",(e=>{if(t(e))return n(e),e.preventDefault(),!1}))}function i(e,t){console.log("events dispatch",e,t),document.dispatchEvent(new CustomEvent(e,{detail:t}))}n.d(t,{JD:()=>i,Ng:()=>s,qm:()=>a})},779:(e,t,n)=>{"use strict";function s(e){return window.Handlebars.compile(e)}function a(e,t){let n;try{n=window.Handlebars.compile(e)(t)}catch(e){n=`Rendering exception: ${e}`}return n}function i(e,t,n,s=!1){let a;if(e){try{a=t(n)}catch(e){a=`Rendering exception: ${e}`}s?e.innerHTML+=a:e.innerHTML=a}else console.warn(`renderElement() nothing found for selector: ${e}`)}function o(e,t,n,s=!1){i(document.querySelector(e),t,n,s)}n.d(t,{F0:()=>a,XX:()=>o,dN:()=>i,vs:()=>s}),window.Handlebars.registerHelper("eachSorted",(function(e,t){let n=window.Handlebars.createFrame(t,t.hash),s="";for(const a of Object.keys(e).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))))Object.prototype.hasOwnProperty.call(e,a)&&(n.key=a,s+=t.fn(e[a],{data:n}));return s})),window.Handlebars.registerHelper("notEmpty",(function(e,t){return e&&Object.keys(e).length>0?t.fn(this):t.inverse(this)})),window.Handlebars.registerHelper("reSub",(function(e,t,n){let s=n.fn(this);return"string"!=typeof s?s:s.replace(new RegExp(e,"g"),t)})),window.Handlebars.registerHelper("ifTrue",(function(e,t){return 1==e?t.fn(this):t.inverse(this)})),window.Handlebars.registerHelper("ifFalse",(function(e,t){return 1==e?t.fn(this):t.inverse(this)})),window.Handlebars.registerHelper("contains",(function(e,t,n){return e=window.Handlebars.escapeExpression(e),(t=window.Handlebars.escapeExpression(t)).indexOf(e)>-1?n.fn(this):n.inverse(this)})),window.Handlebars.registerHelper("compare",(function(e,t,n,s){var a={"==":e==n,"===":e===n,"!=":e!=n,"!==":e!==n,">":e>n,">=":e>=n,"<":e<n,"<=":e<=n,"||":!(!e&&!n),"&&":!(!e||!n)};return Object.prototype.hasOwnProperty.call(a,t)?a[t]?s.fn(this):s.inverse(this):console.error('Error: Expression "'+t+'" not found')}))},662:(e,t,n)=>{"use strict";n.d(t,{u:()=>s});class s{static#ne={};static async get(e){let t;if(this.#ne[e])return this.#ne[e];switch(e){case"md":{const e=new window.showdown.Converter({tables:!0,metadata:!0,ghCodeBlocks:!0});e.setFlavor("github"),e.setOption("simpleLineBreaks",!1),t=e;break}case"Split":{const{default:e}=await import("lib_split");t=e;break}case"DOMPurify":{const{default:e}=await import("lib_dompurify");t=e;break}case"adoc":{const{default:e}=await import("lib_asciidoctor");t=new e;break}case"Mermaid":{const{default:e}=await import("lib_mermaid");e.initialize({startOnLoad:!1,securityLevel:"antiscript",logLevel:"error"}),t=e;break}case"rst":await import("lib_rst2html"),t=window.rst2html;break;default:throw new Error(`Unknown converter: ${e}`)}return this.#ne[e]=t,this.#ne[e]}}},240:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var s=n(551);class a{static#se={none:async()=>({model:"none",result:"ERROR: LLM chat bot is currently disabled in <a href='#/-/Settings'>Settings</a>. Please enable it to allow LLM prompts."}),huggingFace:async e=>{const t=await s.w.get("huggingFaceModel");return t?{model:"HuggingFace "+t,result:await this.#ae({messages:[{role:"user",content:e}],model:t}).then((e=>{if(e.error)throw new Error(e.error.message);if(!e.choices||0===e.choices.length)throw new Error("No response from LLM model.");return e.choices[0].message.content})).catch((e=>"ERROR: "+e.message))}:{model:"HuggingFace ???",result:"ERROR: No model selected."}},ollama:async e=>{const t=await s.w.get("ollamaModel");return t?{model:"Ollama "+t,result:await fetch(`${await s.w.get("ollamaEndpoint")}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,model:t,stream:!1})}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()})).then((e=>{if(e.error)throw new Error(e.error);return e.response})).catch((e=>"ERROR: "+e.message))}:{model:"Ollama ???",result:"ERROR: No model selected."}}};static async updateOllamaModelList(){const e=await fetch(`${await s.w.get("ollamaEndpoint")}/api/tags`,{method:"GET"}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}));await s.w.set("ollamaModels",e.models.map((e=>e.name)),!0)}static async#ae(e){let t={"Content-Type":"application/json"};const n=await s.w.get("huggingFaceToken");n&&n.length>0&&(t.Authorization=`Bearer ${n}`);const a=await fetch("https://router.huggingface.co/v1/chat/completions",{headers:t,method:"POST",body:JSON.stringify(e)});return await a.json()}static async submit(e){const t=await s.w.get("chatType","none");return t&&this.#se[t]?await this.#se[t](e):{model:"unknown",result:`ERROR: Unknown chat provider: ${t}`}}}},933:(e,t,n)=>{"use strict";n.d(t,{m:()=>h});var s=n(234);class a{static async fetch(e){var t,n=await fetch(`https://api.github.com/repos/${e.github}`).then((e=>e.json())).then((n=>(t=n,fetch(`https://api.github.com/repos/${e.github}/git/trees/${n.default_branch}?recursive=1`)))).then((e=>e.json())).catch((e=>{throw new Error(`Error on Github request: ${e}'`)}));if(n.response&&n.response.test(/Too many requests/))throw new Error("Github API rate limit exceeded!");if(!n.tree)throw new Error("No 'tree' data when fetching from Github!");return{paths:n.tree.map((s=>({path:s.path,download:`https://raw.githubusercontent.com/${e.github}/${n.sha}/${s.path}`,edit:`https://github.com/${e.github}/edit/${t.default_branch}/${s.path}`}))),section:{url:t.html_url,author:t.owner.login,homepage:t.homepage,license:t.license,default_branch:t.default_branch}}}}class i{static async fetch(e){var t;return{data:await fetch(`https://gitlab.com/api/v4/projects/${encodeURIComponent(e.gitlab)}`).then((e=>e.json())).then((n=>(t=n,fetch(`https://gitlab.com/api/v4/projects/${encodeURIComponent(e.gitlab)}/repository/tree?ref=${n.default_branch}&recursive=true`)))).then((e=>e.json())),section:{url:t.html_url,author:t.owner.login,homepage:t.homepage,license:t.license,default_branch:t.default_branch}}}}var o=n(3);class r{static#ie(e,t,n,s,a){o.w.addDocument(e,t,n,{type:"link",baseName:s.replace(/.*\//,""),baseUrl:s.replace(/\/[^/]+$/,""),editUrl:a})}static async documentDownload(e,t,n,s,a){navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),await fetch(s).then((e=>e.text())).then((async i=>{o.w.addDocument(e,t,n,{data:i,baseName:s.replace(/.*\//,""),baseUrl:s.replace(/\/[^/]+$/,""),editUrl:a})}))}static#oe(e,t=null,n){var s={match:e.match(n),target:null};return s.match&&(t?2==e.split(t).length?s.target=s.match[1].substring(t.length+1):s.match=null:s.target=s.match[1]),s}static async fetchNewSection(e,t,n,s){const r=n.filePattern?n.filePattern:"^(.+)\\.(md|markdown|rst|adoc|asciidoc)$",d=new RegExp(r);let c,l=[];if(n.github)console.log(`Fetching from ${n.github}...`),c=await a.fetch(n);else{if(!n.gitlab)throw new Error("Unsupported repo type!");console.log(`Fetching from ${n.gitlab}...`),c=await i.fetch(n)}let h=c.section;h.children=[],c.paths.forEach((a=>{var i=this.#oe(a.path,n.folder,d);i.target&&(i.target=i.target.replace(/\//g,":::"),s?l.push(this.documentDownload(e,t,i.target,a.download,a.edit).then((()=>document.dispatchEvent(new CustomEvent("download-finished",{detail:a.path}))))):this.#ie(e,t,i.target,a.download,a.edit),h.children.push(i.target))})),await o.w.addDocTree(e,t,h),await Promise.all(l)}}var d=n(648),c=n(84),l=n(551);class h{static getInstallable=async e=>window.Config.groups[e]?.catalog?await fetch(window.Config.groups[e].catalog.source).then((e=>e.json())).then((t=>{if(t)return t;throw new Error(`Error fetching ${e} catalog`)})):{};static async#re(e){try{for(const t of Object.keys(window.Config.groups[e].install)){const n=window.Config.groups[e].install[t];await this.install(e,t,n,void 0,!1)}}catch(t){console.error(`Error fetching index ${window.Config.indexUrls[e].index}: ${t}`)}}static async update(){const e=await o.w.getTree();if(await l.w.get("initialRun",!0)){console.log("Initial run. Initializing groups...");for(const t of Object.keys(window.Config.groups))window.Config.groups[t].install&&(e.nodes[t]||this.#re(t));await l.w.set("initialRun",!1),console.log("Initial run finished"),document.dispatchEvent(new CustomEvent("sections-updated"))}else{console.log("Checking for orphaned documents...");const t=await d.DB.getAllKeys("settings","settings");for(const n of t)if("string"==typeof n&&0==n.indexOf("document:::")){const t=n.split(/:::/);e.nodes[t[1]]&&e.nodes[t[1]].nodes&&e.nodes[t[1]].nodes[t[2]]||(console.log(`Dropping orphaned doc: ${n}`),l.w.remove(n))}console.log("Checking for missing sections...");for(const t of Object.keys(window.Config.groups))e.nodes[t]||window.Config.groups[t].removable||"Feeds"===t||(console.log(`Installing missing section: ${t}`),this.#re(t))}}static removeGroup(e){o.w.removeGroup(e),s.q.pathChanged(""),c.d.update()}static remove(e,t){o.w.remove(e,t),c.d.update()}static async install(e,t,n,s=void 0,a=!0){let i=document.createElement("pre");i.class="note",i.innerText="Fetching content...\n",s&&s.parentNode.append(i),await r.fetchNewSection(e,t,n,a).catch((e=>{console.error(`Error fetching '${t}' from ${n.github}: ${e}`),i.innerText+=`Error fetching '${t}' from ${n.github}: ${e}\n`})),document.dispatchEvent(new CustomEvent("sections-updated")),c.d.update()}}},648:(e,t,n)=>{"use strict";n.d(t,{DB:()=>s});class s{static#de={aggregator:{version:1,stores:{tree:{keyPath:"id",autoIncrement:!0},items:{keyPath:"id",autoIncrement:!0},favicons:{keyPath:"id",autoIncrement:!0}},indexes:{items:[{name:"nodeId",field:"value.nodeId",params:{unique:!1}}]}},settings:{version:1,stores:{settings:{keyPath:"id",autoIncrement:!0}},indexes:{}}};static#ce=[];static async#le(e){if(!this.#de[e])throw new Error(`DB '${e}' not configured`);return this.#ce[e]||(console.log("DB setting up "+e),await new Promise(((t,n)=>{let s=this,a=indexedDB.open(e,s.#de[e].version);a.onsuccess=function(){s.#ce[e]=this.result,t()},a.onerror=function(e){s.#ce=void 0,n(`Error opening IndexedDB: ${e.target.errorCode}`)},a.onupgradeneeded=t=>{const n=s.#ce[e]=t.currentTarget.result;console.log("IndexedDB onupgradeneeded");const a=s.#de[e].stores;Object.keys(a).forEach((t=>{n.objectStoreNames.contains(t)||(console.log(`Creating store '${t}' in IndexedDB ${e}`),n.createObjectStore(t,a[t]))}));const i=s.#de[e].indexes;Object.keys(i).forEach((s=>{if(n.objectStoreNames.contains(s)){const n=t.target.transaction.objectStore(s);for(const t of i[s])n.indexNames.contains(t.name)||(console.log(`Creating index '${t.name}' in store '${s}' of IndexedDB ${e}`),n.createIndex(t.name,t.field,t.params))}}))}})),window.DB=this),this.#ce[e]}static async getByIndexOnly(e,t,n,s){const a=await this.#le(e);return await new Promise(((i,o)=>{const r=a.transaction(t,"readonly").objectStore(t);if(!r.indexNames.contains(n))return void o(`Index '${n}' does not exist in store '${t}'`);const d=r.index(n),c=[],l=d.openCursor(IDBKeyRange.only(s));l.onsuccess=e=>{const t=e.target.result;t?(c.push({id:t.id,...t.value}),t.continue()):i(c)},l.onerror=a=>o(`Error getting '${s}' from DB '${e}' store '${t}' index '${n}': ${a.target.errorCode}`)}))}static async getAllKeys(e,t){const n=await this.#le(e);return await new Promise(((s,a)=>{const i=n.transaction(t,"readonly").objectStore(t).getAllKeys();i.onsuccess=function(e){s(e.target.result)},i.onerror=function(n){a(`Error getting all keys from DB '${e}' store '${t}': ${n.target.errorCode}`)}}))}static async get(e,t,n,s=null){const a=await this.#le(e);return await new Promise(((i,o)=>{const r=a.transaction(t,"readonly").objectStore(t).get(n);r.onsuccess=function(e){let t;t=e.target.result&&void 0!==e.target.result.value&&null!==e.target.result.value?e.target.result.value:s,i(t)},r.onerror=function(s){o(`Error getting '${n}' from DB '${e}' store '${t}' ${s.target.errorCode}`)}}))}static getById=async(e,t,n)=>{const s=await this.get(e,t,n);return s?{id:n,...s}:null};static async set(e,t,n,s){const a=await this.#le(e);await new Promise(((i,o)=>{const r=a.transaction(t,"readwrite").objectStore(t);try{const a=r.put(n?{id:n,value:s}:{value:s});a.onsuccess=function(){i()},a.onerror=function(s){o(`Error saving '${n}' in DB '${e}' store '${t}': ${s.target.errorCode}`)}}catch(s){o(`Error saving '${n}' in DB '${e}' store '${t}': ${s}`)}}))}static async remove(e,t,n){const s=await this.#le(e);await new Promise(((a,i)=>{const o=s.transaction(t,"readwrite").objectStore(t);try{o.delete(n),a()}catch(s){i(`Error deleting '${n}' DB '${e}' from store '${t}': ${s}`)}}))}static async removeOrphans(e,t,n,s){const a=await this.#le(e);await new Promise(((i,o)=>{const r=a.transaction(t,"readwrite").objectStore(t);try{let a=0;const o=r.index(n),d=IDBKeyRange.lowerBound(0);o.openCursor(d).onsuccess=o=>{const r=o.target.result;r?(s.includes(r.value.value[n])||(r.delete(),a++),r.continue()):(console.info(`Removed ${a} orphaned items from DB '${e}' store '${t}'`),i())}}catch(n){o(`Error deleting orphaned items from DB '${e}' store '${t}': ${n}`)}}))}}},84:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var s=n(3),a=n(551);class i{static#he="SearchIndexCache";static async getCache(){return await a.w.get(i.#he,void 0)}static async setCache(e){await a.w.set(i.#he,e)}static async clearCache(){await a.w.delete(i.#he)}static async getDocs(){const e=await s.w.getTree();let t={};return e.nodes&&Object.values(e.nodes).forEach((e=>{t={...t,...i.#ue(e)}})),t}static#ue(e){let t={};return e.nodes&&Object.values(e.nodes).forEach((e=>{console.log(`Adding index for ${e.id}`);const n=`${e.id.replace(/:::/g,"/")}`;t[n]={doc:n,id:e.id,title:e.name,content:e.content,relUrl:"#/"+n},t={...t,...i.#ue(e)}})),t}static async update(){console.log("SearchIndex: Updating index...");const e=await i.getDocs();let t={docs:e,index:window.lunr((function(){this.ref("id"),this.field("title",{boost:200}),this.field("content",{boost:2}),this.field("relUrl"),this.metadataWhitelist=["position"];for(let t in e)this.add({id:t,title:e[t].title,content:e[t].content,relUrl:e[t].relUrl})}))};i.setCache({index:JSON.stringify(t.index),docs:t.docs}),document.dispatchEvent(new CustomEvent("search-index-updated",{detail:t})),console.log("SearchIndex: Updating index done.")}}},3:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var s=n(551);class a{static#pe(e,t,n){let s={name:t,parent_id:e,id:e+":::"+t,runbook:n.runbook,url:n.url,author:n.author,license:n.license,homepage:n.homepage,nodes:{}};return n.children.forEach((a=>{console.log(`Adding ${a} to group ${e} section ${t}`);const i=a.split(/:::/);let o=s;for(let e=0;e<i.length-1;e++){const t=i[e];o.nodes[t]||(o.nodes[t]={name:t,id:o.id+":::"+t,parent_id:o.id,nodes:{}}),o=o.nodes[t]}o.nodes[i[i.length-1]]={name:i[i.length-1],id:o.id+":::"+i[i.length-1],parent_id:o.id,type:n.type}})),console.info(s),s}static async#r(e){await s.w.set("sections",e),document.dispatchEvent(new CustomEvent("sections-updated"))}static async remove(e,t){let n=await this.getTree(),a=n.nodes[e].nodes[t];if(a){for(const e of Object.keys(a.nodes))s.w.remove(`document:::${t}:::${e}`);await s.w.remove(`section:::${t}`),delete n.nodes[e].nodes[t],this.#r(n)}}static async removeGroup(e){let t=await this.getTree(),n=t.nodes[e];if(n){for(const t of Object.keys(n.nodes))await this.remove(e,t);delete t.nodes[e],this.#r(t)}}static async addDocTree(e,t,n){let s=await this.getTree();s.nodes[e]||(s.nodes[e]={nodes:{}}),s.nodes[e].nodes[t]=a.#pe(e,t,n),this.#r(s)}static async get(e){let t=await this.getTree();for(const n of e.split(/:::/)){if(!t.nodes[n])return;t=t.nodes[n]}return t}static getTree=async()=>await s.w.get("sections",{nodes:{}});static getDocument=async e=>await s.w.get(`document:::${e}`,{});static addDocument=async(e,t,n,a)=>await s.w.set(`document:::${e}:::${t}:::${n}`,a)}},551:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var s=n(648);class a{static#de={};static async initialize(){this.#de=await s.DB.get("settings","settings","schema",{}),console.log("Settings schema:",this.#de)}static async addSchema(e){this.#de={...this.#de,...e},await s.DB.set("settings","settings","schema",this.#de,!1)}static get=async(e,t)=>await s.DB.get("settings","settings",e,t||this.#de[e]?.default);static async set(e,t,n=!0){await s.DB.set("settings","settings",e,t,n),n&&document.dispatchEvent(new CustomEvent("settings-changed",{detail:{name:e,value:t}}))}static remove=async e=>await s.DB.remove("settings","settings",e)}a.initialize()},388:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ChatView:()=>d});var s=n(240),a=n(913),i=n(662),o=n(551),r=n(779);class d{static#me;static addToolResult(e,t,n="text"){if(!e||!t)return;const s=a.ContentView.getViewElement("chat").querySelector(".content"),i=document.createElement("pre");if(i.classList.add("cli"),i.innerText+="$ "+e,"text"===n&&(i.innerText+="\n"+t),s.appendChild(i),"html"===n){const e=document.createElement("div");e.innerHTML=t,s.appendChild(e)}s.scrollIntoView({behavior:"smooth",block:"end"})}static async submitPrompt(e){if(0==e.length)return;const t=a.ContentView.getViewElement("chat"),n=t.querySelector(".content");let c,l;n.innerHTML+=r.F0('\n            <div class="question"><p>{{prompt}}</p></div>\n            <div class="loading"><i>Processing ...</i></div>\n        ',{prompt:e}),n.scrollIntoView({behavior:"smooth",block:"end"}),d.#me||(d.#me=await i.u.get("md")),o.w.get("AIPromptHistory",[]).then((t=>{t.push(e),t=t.slice(-15),o.w.set("AIPromptHistory",t)}));try{l=await s.r.submit(e)}catch(e){c=`<div class="answer">ERROR: Request failed (${encodeURI(e)})!</div>`}try{c=d.#me.makeHtml(l.result)}catch(e){c=`ERROR: Markdown parsing error (${encodeURIComponent(e)})!`}[...t.querySelectorAll(".loading")].forEach((e=>e.remove())),n.innerHTML+=`<div class="answer"><div class="llm">${l.model}</div>${c||"ERROR: Request failed!"}</div>`,n.scrollIntoView({behavior:"smooth",block:"end"})}}},943:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ChecksView:()=>i});var s=n(551),a=n(779);class i{constructor(e){i.render(e),document.addEventListener("settings-changed",(t=>{0==t.detail.name.indexOf("toolEnabled:::")&&i.render(e)}))}static async render(e){Promise.all(Object.keys(window.Config.toolboxComponents).map((async e=>({name:e,embed:window.Config.toolboxComponents[e].embed,settings:window.Config.toolboxComponents[e].settings,enabled:await s.w.get("toolEnabled:::"+e,window.Config.toolboxComponents[e].enabled)})))).then((t=>{a.dN(e,a.vs('\n                <div class="checks">\n                    {{#each tools}}\n                    {{#ifTrue enabled}}\n                        <h3>\n                            {{name}}\n                            {{#if settings}}\n                                <a href="#/-/Settings/Tools/{{name}}" class="settings">‚öô</a>\n                            {{/if}}\n                        </h3>\n                        <div class="check">\n                            {{{embed}}}\n                        </div>\n                    {{/ifTrue}}\n                    {{/each}}\n                </div>\n            '),{tools:t})}))}}},913:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ContentView:()=>d});var s=n(3),a=n(789),i=n(209),o=n(965),r=n(779);class d{static#ge={adoc:i.CheatSheetRenderer,rst:i.CheatSheetRenderer,asciidoc:i.CheatSheetRenderer,md:i.CheatSheetRenderer,htm:i.CheatSheetRenderer,html:i.CheatSheetRenderer,pdf:o.PdfRenderer};static#fe={Catalog:{switch:"content",view:"Catalog"},CLI:{switch:"chat",view:void 0},Discover:{switch:"content",view:"Discover"},Feeds:{switch:"content",view:"Feeds"},Feed:{switch:"feedreader",view:"FeedReader"},Folder:{switch:"content",view:"Folder"},Settings:{switch:"content",view:"Settings"},OPFS:{switch:"content",view:"OPFSFileBrowser"}};constructor(e){r.dN(e,r.vs('       \n            <nav class="breadcrumb-nav">\n                <ol class="breadcrumb-nav-list" id="breadcrumb-nav"></ol>\n            </nav>\n\n            <div id="main-content-content" class="main-content-view">\n            </div>\n\n            <div id="main-content-search" class="main-content-view">\n                <div id="search-results" class="search-results">\n                    Loading ...\n                </div>\n            </div>\n\n            <div id="main-content-chat" class="main-content-view">\n                <p class="loading">\n                This is the combined CLI/chat view. By prefixing prompts with <code>?</code> you can ask questions here and get answers from the configured LLM.\n                Enter <code>!help</code> to see available CLI commands. Not using a prefix will perform a content search.\n                </p>\n\n                <div id="aiChatView">\n                    <div class="container">\n                        <div class="content">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '),{}),new a.HomeView(d.#we("content")),Array.from(document.getElementsByClassName("main-content-view")).forEach((e=>{e.onclick=()=>e.focus()}))}static#ve=()=>document.getElementById("breadcrumb-nav").scrollIntoView({behavior:"instant",block:"center"});static#ye(e,t){if(!Object.keys(d.#fe).includes(e))return void(d.#we("content").innerHTML=`ERROR: No internal route for ${e}`);const s=d.#we(d.#fe[e].switch),a=d.#fe[e].view;a&&n(855)(`./${a}.js`).then((e=>{new e[`${a}View`](s,t)})).catch((e=>{d.#we("content").innerHTML=`ERROR: Loading view ${a} failed: ${e}`}))}static async render(e){if(d.#ve(),0==e.indexOf("-/"))return void d.#ye(e.split("/")[1],e);const t=e.replace(/\//g,":::");if((await s.w.get(t)).nodes)return void(-1==t.indexOf(":::")?d.#ye("Catalog",e):d.#ye("Folder",e));const n=await s.w.getDocument(t);if(!n)return i.innerHTML="<h1>ERROR: Document not found</h1>",void console.error(`No document found for ${e}`);const a=n.baseName.split(".").pop().toLowerCase(),i=d.#we("content");Object.keys(d.#ge).includes(a)?await d.#ge[a].load(i,n):i.innerHTML=`ERROR: No renderer for ${a} files`}static#we(e){let t;return document.title=window.Config.siteName,"feedreader"===e?(document.getElementById("main-content-wrap").style.display="none",t=document.getElementById("feedreader"),t.style.display="block",t):([...document.querySelectorAll(".main-content-view")].forEach((e=>e.style.display="none")),document.getElementById("main-content-wrap").style.display="block",t=document.getElementById(`main-content-${e}`),t.style.display="block","chat"!==e&&"search"!==e&&(t.innerHTML=""),t)}static getViewElement(e){return document.getElementById(`main-content-${e}`)}static showSearch(){d.#we("search")}static hideSearch(){window.location.hash.startsWith("#/-/CLI")?d.#we("chat"):d.#we("content")}}},789:(e,t,n)=>{"use strict";n.r(t),n.d(t,{HomeView:()=>o});var s=n(943),a=n(3),i=n(182);class o extends i.S{constructor(e){super({root:e,template:'\n                <div class="about">\n                    {{{ welcome }}}\n\n                    <div id=\'home-content\'>\n                        <h3>Content</h3>\n\n                        <div>\n                            {{#each sections.nodes as |groups groupId| }}\n                                <div>\n                                    <b>{{ @key }}</b>:\n                                    {{#each nodes}}\n                                        &nbsp;\n                                        <a href="#/{{ groupId }}/{{ @key }}">{{ @key }}</a>\n                                    {{/each}}\n                                </div>\n                            {{/each}}\n                        </div>\n                    </div>\n                </div>\n\n                <div id="toolpanelHome"></div>\n            ',mapper:async()=>({welcome:window.Config.welcome,sections:await a.w.getTree()})}),new s.ChecksView(document.getElementById("toolpanelHome"))}}},216:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Sidebar:()=>r});var s=n(218),a=n(3),i=n(217),o=n(779);class r{#f;static#Q=o.vs('\n        {{#* inline "sidebarChildNode"}}\n            <li class="nav-list-item" data-path="{{ id }}">\n                <a data-path="{{ id }}" class="nav-list-link" href="#/{{#reSub ":::" "/"}}{{id}}{{/reSub}}">\n                    {{#notEmpty nodes}}\n                        <span class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></span>\n                    {{/notEmpty}}\n                    {{ name }}\n                </a>\n                <ul data-path="{{ id }}" class="nav-list">\n                    {{#each nodes }}\n                        {{> sidebarChildNode }}\n                    {{/each}}\n                </ul>\n            </li>\n        {{/inline}}\n\n        {{#each tree.nodes }}\n            <ul class="nav-list">\n                    <li class="nav-list-item" data-path="{{ @key }}">\n                            <a class="nav-list-link pwa-title" data-path="{{ @key }}" href="#/{{ @key }}">\n                                    {{ @key }}\n                            </a>\n                    </li>\n            </ul>\n            <ul class="nav-list">\n                {{#each nodes }}\n                    {{> sidebarChildNode }}\n                {{/each}}\n            </ul>\n        {{/each}}\n\n        {{#* inline "sidebarChildFeed"}}\n            {{#compare type \'==\' \'feed\'}}\n            <li class=\'nav-list-item context-node\' data-type=\'{{type}}\' data-id=\'{{id}}\'>\n                <a data-path="-:::Feed:::{{id}}" class="nav-list-link" href="#/-/Feed/{{id}}">\n                    {{#if error}}\n                        ‚õî&nbsp;\n                    {{else}}\n                        {{#if iconData}}\n                            <img class=\'icon\' src=\'{{iconData}}\'/>\n                        {{else}}\n                            <img class=\'icon\' src=\'default.svg\'/>\n                        {{/if}}\n                    {{/if}}\n                    <span class=\'title\'>\n                        {{{title}}}\n                    </span>\n                    <span class=\'count\' data-count=\'{{unreadCount}}\'>{{unreadCount}}</span>\n                </a>\n            </li>\n            {{/compare}}\n            {{#compare type \'==\' \'folder\'}}\n            <li class=\'nav-list-item context-node\' data-type=\'{{type}}\' data-id=\'{{id}}\'>\n                <a data-path="-:::Folder:::{{id}}" class="nav-list-link" href="#/-/Folder/{{id}}">\n                    {{#notEmpty children}}\n                        <span class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></span>\n                    {{/notEmpty}}\n                    <span class=\'title\'>\n                        {{{title}}}\n                    </span>\n                    <span class=\'count\' data-count=\'{{unreadCount}}\'>{{unreadCount}}</span>\n                </a>\n                <ul class=\'nav-list feeds\'>\n                    {{#each children }}\n                        {{> sidebarChildFeed }}\n                    {{/each}}\n                </ul>\n            </li>\n            {{/compare}}\n        {{/inline}}\n   \n        \x3c!-- FeedReader section --\x3e\n        <ul class="nav-list">\n                <li class="nav-list-item context-node" data-type=\'folder\' data-path="feeds" data-id=\'0\'>\n                        <a class="nav-list-link pwa-title" data-path="feeds" href="#/-/Feeds">\n                                Feeds\n                        </a>\n                </li>\n        </ul>\n        <ul class="nav-list" id=\'feedlistViewContent\'>\n            {{#each feedlist.children }}\n                {{> sidebarChildFeed }}\n            {{/each}}\n        </ul>\n    ');constructor(e){this.#f=e,this.#te(),e.addEventListener("dragover",this.#be.bind(this)),e.addEventListener("dragleave",this.#xe.bind(this)),e.addEventListener("dragend",this.#xe.bind(this)),e.addEventListener("drop",this.#ke.bind(this)),document.addEventListener("nodeRemoved",this.#te),document.addEventListener("nodeUpdated",(t=>{const n=t.detail.id,s=e.querySelector(`#feedlist .nav-list-item[data-id="${n}"]`);if(s){const e=s.querySelector(".title"),n=s.querySelector(".count"),a=s.querySelector(".icon");e.textContent!=t.detail.title&&(e.textContent=t.detail.title),n.textContent!=""+t.detail.unreadCount&&(n.textContent=t.detail.unreadCount),n.dataset.count=t.detail.unreadCount,a&&t.detail.iconData&&(a.src=t.detail.iconData)}else this.#te()})),document.addEventListener("sections-updated",this.#te),e.addEventListener("click",(e=>{var t=e.target;for(this.#f.focus();t&&(!t.classList||!t.classList.contains("nav-list-expander"));)t=t.parentNode;t&&(e.preventDefault(),t.parentNode.classList.toggle("active"))})),e.addEventListener("auxclick",(e=>{var t=e.target;if(1===e.button){for(;t&&!t.classList.contains("nav-list-item");)t=t.parentNode;t&&t.classList.contains("nav-list-item")&&(e.preventDefault(),i.r.dispatch(`sidebar:${t.dataset.type}:middleClick`,t.dataset))}}))}#ke(e){let t;e.preventDefault(),t=e.dataTransfer.getData("text/plain"),t||(t=e.dataTransfer.getData("text/x-moz-url")),t||(t=e.dataTransfer.getData("text/url-list")[0]),console.log("FIXME Dropped URL: "+t),this.#f.classList.remove("drag-over")}#be(e){e.preventDefault(),this.#f.classList.add("drag-over")}#xe=()=>this.#f.classList.remove("drag-over");#te=async()=>o.dN(this.#f,r.#Q,{tree:await a.w.getTree(),feedlist:s.f.root});static selectionChanged(e){const t=e.replace(/\/$/,"").replaceAll(/\//g,":::").replace(/:::Item:::[^:]*$/,"");try{console.log("sidebar selection changed to: ",t);const n=document.getElementById("sidebar");if(Array.from(n.getElementsByClassName("active")).forEach((e=>e.classList.remove("active"))),Array.from(n.getElementsByClassName("selected")).forEach((e=>e.classList.remove("selected"))),""===e)return;const s=n.querySelector(`a[data-path="${t}"]`);s?.classList.add("active"),s?.classList.add("selected");let a=s;for(;a.parentNode&&"sidebar"!=a.id;)a=a.parentNode,a.classList.add("active");s?.scrollIntoView({block:"nearest"})}catch(e){console.error(`select "${t}" caused: ${e}`)}}}},209:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CheatSheetRenderer:()=>i});var s=n(779),a=n(662);class i{static#Ee=s.vs("\n        <div class='video'>\n            <a href='{{ href }}'>\n                <img src='https://i.ytimg.com/vi/{{ ytid }}/hqdefault.jpg'/>\n            </a>\n            <div class='title'>{{ title }}</div>\n            <div class='caption'>{{ caption }}</div>\n        </div>\n    ");static#Ce(e){const t=new RegExp("^https://www\\.youtube\\.com/watch\\?v=");e.querySelectorAll('a[href*="https://www.youtube.com/watch?v="]').forEach((e=>{const n=e.innerText.split(/---/);e.innerHTML=this.#Ee({href:e.href,ytid:e.href.replace(t,""),title:n[0],caption:n[1]})}))}static async renderDocument(e,t){let n=encodeURI(t.baseUrl);if("link"===t.type&&(e.innerHTML=`Fetching content from <a href="${t.baseUrl}">${t.baseUrl}</a>...`,t.data=await fetch(n+"/"+t.baseName).then((e=>e.text()))),!t.data)return;let s="",i={};try{t.baseName?.match(/\.rst$/)?s=(await a.u.get("rst"))(t.data):t.baseName?.match(/\.(adoc|asciidoc)$/)?s=(await a.u.get("adoc")).convert(t.data):(t.data=t.data.replace(/(\[[^\]]+\])\(\//g,"$1("+n+"/"),s=(await a.u.get("md")).makeHtml(t.data),i=(await a.u.get("md")).getMetadata()),s=(await a.u.get("DOMPurify")).sanitize(s)}catch(e){console.error(e),s="ERROR: Content rendering error!"}return s=s.replace(/<img /g,'<img loading="lazy" '),e.innerHTML=s.replace(/(<img[^>]src=["'])\//g,"$1"+n+"/").replace(/(<img[^>]+src=["'])([^h:][^t][^t][^p])/g,"$1"+n+"/$2").replace(/(<a[^>]+href=["'])([^#h:][^t][^t][^p])/g,"$1"+n+"/$2"),"true"===i?.videoEmbed&&this.#Ce(e),await(await a.u.get("Mermaid")).run({querySelector:".main-content-view .mermaid"}),t}static async load(e,t){await this.renderDocument(e,t),-1==e.innerHTML.indexOf("<h1")&&e.insertAdjacentHTML("afterbegin",`<h1>${t.baseName.replace(/\.[^.]*$/,"")}</h1>`);var n=document.getElementsByTagName("h1")[0];n&&t&&(t?.editUrl&&(n.innerHTML+=`<button id='editBtn' title='Edit in Github' data-edit-url="${t.editUrl}" class="btn">Edit</button>`),t?.editUrl&&(document.getElementById("editBtn").onclick=e=>{window.open(e.target.dataset.editUrl,"_blank")}))}}},965:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PdfRenderer:()=>s});class s{static async load(e,t){const n=await import("./vendor/pdf.mjs"),s=await import("./vendor/pdf_viewer/pdf_viewer.mjs");e.innerHTML='\n\t\t\t<div id="viewerContainer">\n\t\t\t\t<div id="viewer" class="pdfViewer"></div>\n\t\t\t</div>\n\t\t';const a=e.querySelector("#viewerContainer");a.style="position: absolute; width: 100%; height: 100%; overflow: auto;",n.GlobalWorkerOptions.workerSrc="vendor/pdf.worker.mjs";const i=t.baseUrl+"/"+t.baseName,o=new URL("vendor/pdf.sandbox.mjs",window.location),r=new s.EventBus,d=new s.PDFLinkService({eventBus:r}),c=new s.PDFFindController({eventBus:r,linkService:d}),l=new s.PDFScriptingManager({eventBus:r,sandboxBundleSrc:o}),h=new s.PDFViewer({container:a,eventBus:r,linkService:d,findController:c,scriptingManager:l});d.setViewer(h),l.setViewer(h),r.on("pagesinit",(function(){h.currentScaleValue="page-width"}));const u=n.getDocument({url:i,enableXfa:!0}),p=await u.promise;h.setDocument(p),d.setDocument(p,null)}}}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}};return n[e](i,i.exports,a),i.exports}a.m=n,a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".bundle.js",a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="lzone.de:",a.l=(n,s,i,o)=>{if(e[n])e[n].push(s);else{var r,d;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==t+i){r=h;break}}r||(d=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",t+i),r.src=n),e[n]=[s];var u=(t,s)=>{r.onerror=r.onload=null,clearTimeout(p);var a=e[n];if(delete e[n],r.parentNode&&r.parentNode.removeChild(r),a&&a.forEach((e=>e(s))),t)return t(s)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),d&&document.head.appendChild(r)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/js/bundle/",(()=>{var e={792:0};a.f.j=(t,n)=>{var s=a.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var i=new Promise(((n,a)=>s=e[t]=[n,a]));n.push(s[2]=i);var o=a.p+a.u(t),r=new Error;a.l(o,(n=>{if(a.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",r.name="ChunkLoadError",r.type=i,r.request=o,s[1](r)}}),"chunk-"+t,t)}};var t=(t,n)=>{var s,i,[o,r,d]=n,c=0;if(o.some((t=>0!==e[t]))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);d&&d(a)}for(t&&t(n);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunklzone_de=self.webpackChunklzone_de||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a(234),a(837),a(290),a(169),a(638)})();